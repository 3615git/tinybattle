{"version":3,"sources":["pics/opponents/alfadriel.png","pics/opponents/ansellus.png","pics/opponents/arcanegolem.png","pics/opponents/astrallich.png","pics/opponents/behemoth.png","pics/opponents/blindworm.png","pics/opponents/bloodmage.png","pics/ui/death.png","pics/opponents/bulldragon.png","pics/opponents/chimera.png","pics/opponents/clairvoyant.png","pics/opponents/corruptedelemental.png","pics/opponents/corruptedhorseman.png","pics/opponents/crocodilerogue.png","pics/opponents/crow.png","pics/opponents/crystalmage.png","pics/opponents/cthulhu.png","pics/opponents/cultist.png","pics/opponents/darknesstitan.png","pics/opponents/demon.png","pics/opponents/dragonemperor.png","pics/opponents/dryad.png","pics/opponents/dryadqueen.png","pics/opponents/dynamo.png","pics/opponents/elvenking.png","pics/opponents/elvenmage.png","pics/opponents/excelsios.png","pics/opponents/feralbeast.png","pics/opponents/fireangel.png","pics/opponents/fireimp.png","pics/opponents/firelord.png","pics/opponents/firewitch.png","pics/opponents/forestgolem.png","pics/opponents/gazer.png","pics/opponents/ghostknight.png","pics/opponents/giantfish.png","pics/opponents/goblinmage.png","pics/opponents/golddragon.png","pics/opponents/iceelemental.png","pics/opponents/harbinger.png","pics/opponents/ignis.png","pics/opponents/imp.png","pics/opponents/knightking.png","pics/opponents/koboldarcher.png","pics/opponents/lamprey.png","pics/opponents/lichwarlord.png","pics/opponents/mage.png","pics/opponents/minordemon.png","pics/opponents/myrdin.png","pics/opponents/primaldemon.png","pics/opponents/radulac.png","pics/opponents/rootgolem.png","pics/opponents/runicgolem.png","pics/opponents/scarletwyrm.png","pics/opponents/shadowscythe.png","pics/opponents/sparkdragon.png","pics/opponents/stonegolem.png","pics/opponents/succubus.png","pics/opponents/sunwarrior.png","pics/opponents/thanatos.png","pics/opponents/vampire.png","pics/opponents/voidgargoyle.png","pics/opponents/waterspirit.png","pics/opponents/windpriest.png","pics/opponents/yoggoth.png","pics/ui/sigil-white.svg","pics/ui/welcome.png","pics/ui/logo.png","pics/ui/fumble.png","pics/ui/critical.png","pics/ui/sigil.svg","pics/ui/portal.png","pics/ui/score.svg","actions/settings/tutorial.js","actions/settings/createMonsters.js","conf/settings.js","conf/settings_items.js","utils/utils.js","monsters/getMonsterReward.js","utils/forge.js","monsters/getMonsterWeapons.js","monsters/getMonsterItems.js","monsters/getShopInstants.js","actions/combat/stats.js","actions/combat/energy.js","actions/settings/onNewItem.js","actions/score/score.js","actions/settings/createPlayer.js","actions/settings/resetLevel.js","conf/version.js","actions/settings/updateVersion.js","actions/settings/releaseNotes.js","actions/settings/setVersion.js","actions/settings/resetGame.js","actions/settings/submitScore.js","actions/settings/setItem.js","actions/settings/setGold.js","actions/settings/keepItem.js","actions/settings/buyItem.js","actions/settings/buyInstant.js","actions/settings/sellItem.js","actions/settings/sellInstant.js","actions/settings/deleteLegacy.js","actions/settings/forgeUniques.js","actions/settings/moveItem.js","actions/settings/setUIColor.js","actions/settings/preference.js","actions/game/welcome.js","actions/game/welcome_keepQuitState.js","actions/game/quit.js","monsters/monsterList.js","monsters/getMonsterXp.js","monsters/monster.js","monsters/getMonsterFromLevel.js","monsters/getOpponentMap.js","actions/game/gameCreate.js","actions/game/levelTransition.js","actions/game/battleIntro.js","utils/formatDataLog.js","actions/game/startBattle.js","actions/game/victory.js","actions/game/defeat.js","actions/game/permadeath.js","actions/game/hallOfFame.js","actions/game/resetThenHallOfFame.js","actions/game/nextLoop.js","actions/game/openShop.js","actions/game/logsToPlayerTurn.js","actions/combat/rage.js","actions/combat/hit.js","actions/combat/attack.js","actions/combat/block.js","actions/combat/specialattack.js","actions/combat/cast.js","actions/combat/focus.js","actions/combat/specialcast.js","actions/combat/skip.js","actions/combat/stun.js","actions/combat/itembreak.js","actions/combat/psyblast.js","actions/combat/curse.js","actions/combat/heal.js","actions/combat/quickheal.js","actions/combat/upgrade.js","actions/combat/restore.js","actions/combat/damage.js","actions/combat/sharpen.js","actions/combat/reflect.js","actions/private/monstersDemo.js","redux/localStorage/index.js","redux/reducers/index.js","redux/constants/action-types.js","redux/store/index.js","redux/actions/index.js","ui/general/ModalAbout.js","ui/general/ModalSettings.js","ui/general/ModalReset.js","ui/battle/ItemVisual.js","ui/battle/Item.js","ui/battle/Bar.js","ui/battle/ActionButton.js","ui/battle/SkillButton.js","ui/battle/Element.js","ui/general/ModalHelp.js","ui/general/ModalFirst.js","ui/general/Modal.js","views/Welcome.js","views/AllReset.js","views/ReleaseNotes.js","ui/battle/Stats.js","ui/battle/Items.js","views/GameCreate.js","ui/battle/EliteBackground.js","ui/battle/Monster.js","views/LevelTransition.js","ui/battle/Weapons.js","ui/battle/StatsAndItems.js","ui/battle/Alterations.js","ui/battle/Opponent.js","ui/battle/Encounter.js","views/BattleIntro.js","ui/battle/EndGame.js","ui/battle/InstantButton.js","ui/battle/InstantButtons.js","ui/battle/Actions.js","ui/battle/Wheel.js","ui/battle/HitBar.js","ui/general/Delayed.js","ui/battle/Logs.js","ui/battle/DataLogs.js","ui/battle/VibrationWrapper.js","views/Battle.js","views/Victory.js","views/Defeat.js","views/Shop.js","views/EndGame.js","views/PermaDeath.js","views/HallOfFame.js","views/NextLoop.js","views/MonstersDemo.js","App.js","monsters/monsterdata.csv","index.js","pics/ui/logo2.png","pics/ui/help.svg","pics/ui/close.svg"],"names":["module","exports","tutorial","data","mode","amount","game","createMonsters","monsters","monsterTiers","index","length","monster","push","name","split","map","item","trim","tier","element","profile","boost","items","weapons","humanoid","elite","fumble","verticalPosition","gameSettings","maxLevel","zones","combatSpeed","widgetDelay","itemStateDelay","monsterCharPointsRange","monsterCharPointsRange_loop","eliteCharPointsRange","beastHealthBoostRange","manualCharBoostRange","postScoreUrl","getScoreUrl","maxEnergyMultiplyer","STR","MAG","CON","skillsRecharge","heal","stun","itembreak","reflect","psyblast","curse","icons","battleStart","block","focus","specialattack","specialcast","attackfumble","castfumble","critical","skip","defending","reflectfail","initialState","state","settings","defaultChars","warrior","DEX","LCK","startItem","mage","thief","defaultInstants","charItems","physicalWeapon","magicalWeapon","beast","charPower","normal","magic","rare","legendary","itemQuality","weaponElements","setElementsToChar","fire","earth","water","setCharToElements","weaponDamage","damage","weaponMultiplicator","weaponBonus","weaponCost","instantSpecs","quickheal","value","type","id","restore","charges","temporaryupgrade","temporaryluckupgrade","permanentupgrade","sharpenphysical","sharpenmagical","uniqueItems","light","darkness","itemRanges","diceRoll","sides","Math","floor","random","randomValue","array","getRandomInt","min","max","limitValue","generateWeight","weight","i","weighedItems","currentItem","clog","message","getMonsterReward","level","baseReward","randomBoost","eliteBoost","round","getItemPrice","quality","transaction","qualityRange","price","getMonsterLoot","loot","lootCount","reward","getItemFromChar","CHAR","getItemIdFromLevel","itemType","itemRange","lowTier","hightTier","ceil","getItemPowerFromLevel","getQualityWeight","peak","range","end","getItemQuality","getWeaponType","getWeaponDamage","heavyQualities","multiplicator","heavyBonus","displayBonus","getWeaponCost","itemCostRange","getWeaponElement","getInstant","effect","label","permanence","char","priceModifier","option","permancence","getMonsterWeapon","forceQuality","weaponType","itemId","weaponElement","score","cost","getMonsterWeapons","types","monsterWeapons","getMonsterItem","itemScore","getMonsterItems","monsterItems","getShopInstant","tempCharRange","permCharRange","getShopInstants","shopItems","getStat","player","stat","baseStat","temporaryBuff","findBuff","permanentBuff","itemBuff","natural","temporary","static","total","buff","filter","x","totalBuff","pushBuff","origin","rounds","permanent","autoResetBuff","opponent","decreaseBuffCounters","val","incrementSkillCount","playerTurn","Object","entries","skills","key","current","ready","maxEnergyRefresh","activePlayer","keys","maxHitPoints","maxMagicPoints","playerSTR","maxStamina","maxPhysicalRage","maxMagicalRage","energyRefresh","activePlayerMAG","updatedMana","magicPoints","activePlayerCON","updatedStamina","stamina","energyBurn","energyRestore","hitPoints","instantUse","instants","onNewItem","nextData","JSON","parse","stringify","sideEffects","setBonus","setElements","newBuffs","resetBuffByOrigin","setItems","previousCON","HPgain","addCounter","scope","alltime","run","folder","addBestCounter","pushCounter","depth","forceScore","getLevelFromXp","xp","sqrt","getXpToLevel","createPlayer","style","previousName","previousXp","previousGold","gold","legacy","itemKey","itemValue","physicalRage","magicalRage","startInstants","resetLevel","version","date","code","reset","note","changes","updateVersion","uniques","log","dataLogs","releaseNotes","setVersion","resetGame","submitScore","scoreSent","setItem","setGold","prevGold","nextGold","keepItem","buyItem","buyInstant","position","sellItem","sellInstant","deleteLegacy","forgeUniques","uniquePrice","uniqueScore","type_value","char_value","element_value","forgeUniqueItems","moveItem","setUIColor","color","uicolor","preference","welcome","quitState","welcome_keepQuitState","quit","monsterPics","alfadriel","ansellus","arcanegolem","astrallich","behemoth","blindworm","bloodmage","bulldragon","chimera","clairvoyant","corruptedelemental","corruptedhorseman","crocodilerogue","crow","crystalmage","cthulhu","cultist","darknesstitan","demon","dragonemperor","dryad","dryadqueen","dynamo","elvenking","elvenmage","excelsios","feralbeast","fireangel","fireimp","firelord","firewitch","forestgolem","gazer","ghostknight","giantfish","goblinmage","golddragon","harbinger","iceelemental","ignis","imp","knightking","koboldarcher","lamprey","lichwarlord","minordemon","myrdin","primaldemon","radulac","rootgolem","runicgolem","scarletwyrm","shadowscythe","sparkdragon","stonegolem","succubus","sunwarrior","thanatos","vampire","voidgargoyle","waterspirit","windpriest","yoggoth","monsterProfiles","brute","tank","duelist","archmage","wizard","balanced","getMonsterXp","specs","itemsXp","monsterName","monsterData","monsterPic","monsterElite","eliteRate","monsterStats","loop","points","chars","weights","weighedPoints","monsterCHAR","draw","monsterInfo","monsterSpecs","monsterXp","CONItemBuff","MAGItemBuff","job","pic","getMonsterFromLevel","pastOpponents","boss","levelInfo","getLevelInfo","el","indexOf","getOpponentMap","opponentMap","levelMonster","gameCreate","levelTransition","previousLevel","bestScore","battleIntro","playerHit","opponentHit","formatDataLog","fightLog","title","icon","attackResult","playerColor","vibrant","targetColor","playerDisplay","opponentDisplay","targetPlayer","reflectDisplay","boostDisplay","dexBonus","conBonus","rageBonus","magMalus","strBonus","magBonus","dexMalus","strMalus","lckBonus","hit","elemental","toHit","roll","fumbleMalus","healCapacity","healValue","buffChar","buffValue","buffType","startBattle","pushScore","victory","defeat","permadeath","hallOfFame","resetThenHallOfFame","previousState","nextLoop","openShop","logsToPlayerTurn","rage","resetRage","hitChance","critChance","criticalChance","fumbChance","fumbleChance","activePlayerDEX","targetPlayerDEX","targetPlayerMAG","magicalHit","elementalDamage","targetElement","a","b","bonus","elementalRules","physicalDamage","activePlayerSTR","targetPlayerCON","activePlayerItem","itemDamage","itemDamageResults","elementalBonus","baseDamage","itemDamageRoll","rpgDice","eval","render","criticalBonus","base","magicalDamage","displayHits","prevState","nextState","skillWheelRoll","positions","result","success","attack","damageResult","rageResult","displayEffect","hitResult","physicalHit","staminaburnResult","display","targetPlayerSTR","DEXbonus","CONbonus","MAGmalus","STRbonus","delay","activePlayerLCK","cast","rageResultDamage","manaResest","manaburnResult","MAGbonus","DEXmalus","abs","STRmalus","wheelPosition","category","sort","wheelItems","j","wheelPositions","FUMBLEmalus","healRanges","small","medium","large","string","charAt","toUpperCase","slice","upgrade","sharpen","weapon","weaponScore","sharpenScore","Number","isInteger","parseInt","join","monstersDemo","SecureStorage","require","CryptoJS","secureStorage","localStorage","hash","SHA256","toString","encrypt","AES","decrypt","enc","Utf8","saveState","serializedState","rootReducer","action","turnSwitch","payload","setting","skipTurn","persistedState","getItem","err","loadState","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","setGameState","connect","dispatch","className","href","target","onClick","ItemVisual","itemClasses","big","defaultProps","Item","props","itemDeleted","rollDelay","setTimeout","setState","itemState","prevProps","this","animations","costType","noPlus","shop","animateNumber","displayChar","plusSign","defaultClasses","glowClasses","updateClasses","emptyItemClasses","marks","dangerouslySetInnerHTML","__html","advantage","formatValue","toFixed","Component","Bar","maxValue","size","connectedData","indicator","indicatorStyle","background","width","blocks","blockWidth","ActionButton","buttonClass","bar","specialPhysicalReady","specialMagicalReady","castReady","attackReady","notready","physicalHitRatio","magicalHitRatio","SkillButton","skillReady","itemsReady","Element","skillButtons","src","alt","death","help","modalContent","content","ModalFirst","close","TransitionGroup","component","CSSTransition","timeout","classNames","appear","leave","e","stopPropagation","closeIcon","Welcome","openModal","modal","closeModal","newGame","startButton","innerStartButton","currentVersion","runs","coverart","sigil","logo2","logo","AllReset","ReleaseNotes","changesList","newsIndex","change","StatCounter","currentStatValue","uiBuffs","buffs","activeBuffs","buffIndex","listBuff","displayBuffs","displaySets","setItemBonusDisplayed","uiBuff","uiBuffDirection","variationClasses","setGlow","Stats","forceData","Items","checkLegacy","GameCreate","handleChange","event","setStyle","baseStyle","startGame","goldIcon","marginTop","onChange","autoComplete","disabled","Monster","fetchPalette","imgSrc","Vibrant","getPalette","then","palette","getHex","darkVibrant","DarkVibrant","darkMuted","DarkMuted","portraitReady","portrait","document","getElementById","that","addEventListener","naturalWidth","naturalHeight","outline","monsterList","monsterbackground","wrapperStyle","backgroundColor","portraitStyling","top","portraitClasses","EliteBackground","LevelTransition","scrollIntoView","behavior","inline","legacyItems","monsterTier","logoStyle","roadmap","history","opacity","transform","appBodyClass","Weapons","StatsAndItems","Alterations","alterations","Opponent","turn","intro","monstercolor","appbackground","chroma","darken","desaturate","turnClasses","introClasses","boxShadow","bgStyling","backgroundImage","opponents","victories","defeats","BattleIntro","EndGame","xpBarValue","playerLevel","playerNextLevel","levelUp","opponentNameStyle","InstantButton","onSell","actionClass","instantButtons","Wheel","rollPosition","naturalRoll","clearTimeout","fumbleIcon","customFumble","bezier1","bezier2","bezier3","bezier4","wheelStyle","transition","HitBar","fumbleLimit","hitLimit","criticalLimit","stages","limit","rollMarker","Delayed","hidden","waitBeforeShow","placeholder","children","React","Logs","widget","wrapperStyling","logStyle","alpha","borderColor","eyeColor","actionType","actionLevel","logContent","containerStyle","displayMessage","displayNote","turnTag","logClasses","zIndex","Date","nextProps","shadeStyle","logs","VibrationWrapper","condition","wrapper","Battle","changeTurn","playerTurnUI","opponentAttackChoice","skipTurnChange","opponentTurn","attackType","physicalHitChance","magicalHitChance","totalMotivation","physicalMotivation","launchOpponentTurn","waitTime","bind","battleEnd","endGame","hpRange","playerAreaClass","wrapperClass","Victory","getLoot","moveditems","updatedMovedItems","sellLoot","solditems","lootedGold","updatedSoldItems","sellMonsterPart","soldMonsterParts","updatedSoldMonsterParts","checkLoot","parseLoot","looted","sellButton","equipButton","parseMonsterLoot","monsterLoot","shopClasses","Defeat","movedItems","keepLoot","updatedmovedItems","itemCount","keepButton","scoreSubmitted","requestOptions","method","headers","body","run_rounds","run_maxlevel","maxlevel","game_runs","game_rounds","game_maxlevel","game_battles","battles","game_battles_defeats","game_battles_victories","alltime_runs","alltime_rounds","fetch","response","json","ok","error","status","Promise","reject","catch","console","itemCountLabel","submitButton","Shop","changeTab","tab","storeTab","buyLoot","soldItems","updatedsoldItems","generateCatalog","catalog","numberOfitems","itemsRange","selectedItems","elements","itemList","itemData","buyButton","overburden","Boolean","instants_weapon","unique_weapons","unique_items","abyss","HallOfFame","scoreTab","parseScore","scoresHeader","scores","levelStyle","Error","statusText","portal","MonstersDemo","levels","cumulatedReward","cumulatedXp","itemsReward","padding","App","Papa","header","dynamicTyping","complete","results","view","options","ambiantFog","fullOptions","smallOptions","helpOptions","PermaDeath","NextLoop","SwitchTransition","addEndListener","node","done"],"mappings":"+EAAAA,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,iBCA3CD,EAAOC,QAAU,0/J,oBCAjBD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,+C,oBCA3CD,EAAOC,QAAU,IAA0B,4C,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,0C,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oB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","file":"static/js/main.e42ead8e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/alfadriel.246ea0d4.png\";","module.exports = __webpack_public_path__ + \"static/media/ansellus.8fabb0ab.png\";","module.exports = __webpack_public_path__ + \"static/media/arcanegolem.6322e9aa.png\";","module.exports = __webpack_public_path__ + \"static/media/astrallich.a8693412.png\";","module.exports = __webpack_public_path__ + \"static/media/behemoth.5c878fe3.png\";","module.exports = __webpack_public_path__ + \"static/media/blindworm.28c0bf15.png\";","module.exports = __webpack_public_path__ + \"static/media/bloodmage.9d9f42cc.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/bulldragon.3a7b4c64.png\";","module.exports = __webpack_public_path__ + \"static/media/chimera.121b54c4.png\";","module.exports = __webpack_public_path__ + \"static/media/clairvoyant.592d4831.png\";","module.exports = __webpack_public_path__ + \"static/media/corruptedelemental.afac4950.png\";","module.exports = __webpack_public_path__ + \"static/media/corruptedhorseman.d1501579.png\";","module.exports = __webpack_public_path__ + \"static/media/crocodilerogue.b104c292.png\";","module.exports = __webpack_public_path__ + \"static/media/crow.7768b719.png\";","module.exports = __webpack_public_path__ + \"static/media/crystalmage.4bf957fc.png\";","module.exports = __webpack_public_path__ + \"static/media/cthulhu.20d00b63.png\";","module.exports = __webpack_public_path__ + \"static/media/cultist.ab38b046.png\";","module.exports = __webpack_public_path__ + \"static/media/darknesstitan.30cec73a.png\";","module.exports = __webpack_public_path__ + \"static/media/demon.e7f6100a.png\";","module.exports = __webpack_public_path__ + \"static/media/dragonemperor.a2a9b7a0.png\";","module.exports = __webpack_public_path__ + \"static/media/dryad.b2714efe.png\";","module.exports = __webpack_public_path__ + \"static/media/dryadqueen.be647a7b.png\";","module.exports = __webpack_public_path__ + \"static/media/dynamo.50a104fd.png\";","module.exports = __webpack_public_path__ + \"static/media/elvenking.aedd5575.png\";","module.exports = __webpack_public_path__ + \"static/media/elvenmage.1ab56b3c.png\";","module.exports = __webpack_public_path__ + \"static/media/excelsios.d2fc86a5.png\";","module.exports = __webpack_public_path__ + \"static/media/feralbeast.ddca472b.png\";","module.exports = __webpack_public_path__ + \"static/media/fireangel.eb4f7f44.png\";","module.exports = __webpack_public_path__ + \"static/media/fireimp.4e595ae6.png\";","module.exports = __webpack_public_path__ + \"static/media/firelord.f5c5d572.png\";","module.exports = __webpack_public_path__ + \"static/media/firewitch.21f6a5f8.png\";","module.exports = __webpack_public_path__ + \"static/media/forestgolem.2bd711d2.png\";","module.exports = __webpack_public_path__ + \"static/media/gazer.7f4081bf.png\";","module.exports = __webpack_public_path__ + \"static/media/ghostknight.1850fbe9.png\";","module.exports = __webpack_public_path__ + \"static/media/giantfish.87be5b4c.png\";","module.exports = __webpack_public_path__ + \"static/media/goblinmage.a43bec8c.png\";","module.exports = __webpack_public_path__ + \"static/media/golddragon.7dbeda6d.png\";","module.exports = __webpack_public_path__ + \"static/media/iceelemental.8db0dae5.png\";","module.exports = __webpack_public_path__ + \"static/media/harbinger.86e1bf28.png\";","module.exports = __webpack_public_path__ + \"static/media/ignis.a17d9620.png\";","module.exports = __webpack_public_path__ + \"static/media/imp.0cf4dc00.png\";","module.exports = __webpack_public_path__ + \"static/media/knightking.70b87189.png\";","module.exports = __webpack_public_path__ + \"static/media/koboldarcher.04bffa8d.png\";","module.exports = __webpack_public_path__ + \"static/media/lamprey.e7d4fc5a.png\";","module.exports = __webpack_public_path__ + \"static/media/lichwarlord.2854af5a.png\";","module.exports = __webpack_public_path__ + \"static/media/mage.e8269fe0.png\";","module.exports = __webpack_public_path__ + \"static/media/minordemon.412074be.png\";","module.exports = __webpack_public_path__ + \"static/media/myrdin.3e0fe616.png\";","module.exports = __webpack_public_path__ + \"static/media/primaldemon.304f6e51.png\";","module.exports = __webpack_public_path__ + \"static/media/radulac.fda502c8.png\";","module.exports = __webpack_public_path__ + \"static/media/rootgolem.69fffbee.png\";","module.exports = __webpack_public_path__ + \"static/media/runicgolem.be47b97c.png\";","module.exports = __webpack_public_path__ + \"static/media/scarletwyrm.31038366.png\";","module.exports = __webpack_public_path__ + \"static/media/shadowscythe.218ee83f.png\";","module.exports = __webpack_public_path__ + \"static/media/sparkdragon.ebb8eafc.png\";","module.exports = __webpack_public_path__ + \"static/media/stonegolem.34ebdfbb.png\";","module.exports = __webpack_public_path__ + \"static/media/succubus.69381290.png\";","module.exports = __webpack_public_path__ + \"static/media/sunwarrior.c3a396f6.png\";","module.exports = __webpack_public_path__ + \"static/media/thanatos.a423aaf0.png\";","module.exports = __webpack_public_path__ + \"static/media/vampire.61d0e2ae.png\";","module.exports = __webpack_public_path__ + \"static/media/voidgargoyle.9e5f2db9.png\";","module.exports = __webpack_public_path__ + \"static/media/waterspirit.ac60f791.png\";","module.exports = __webpack_public_path__ + \"static/media/windpriest.d3ff00f9.png\";","module.exports = __webpack_public_path__ + \"static/media/yoggoth.e62c50a1.png\";","module.exports = __webpack_public_path__ + \"static/media/sigil-white.89f0d8c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/welcome.df861ef6.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.eecd631a.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAABfmlDQ1BIRCA3MDktQQAAKJGVjrFKI1EUhr8bo1EMGCSohSwXFLGYSHSLGLUZIxjFQqJCkm4yGePCJLlMrqgPYGejhWizy+orLLvNFpZioYUgCMFnEARBRMZi0DQusn/1nQ/OOT+EtKWUGwaqNe3l5mdlvlCUkSbdROllin7LbihzeXmJjyPg8QYBcJ2wlHLXF55uZ3a3fvzqWDz+MqWNf+y9pbvsNGwQnYBdbthVEC5g2MrTII6AxJZWGsQ5EPfyhSKIJhCvBHwPxEv5QhFCYSDureYyEBoAYqWAR4FYJeBJIGZvWGUIZQEj6ABAV3ZOppLphPlJ7/9O1d18+yGAqFNbWwFiwCBZ5pCkSJImgamdbQ2Qqasd71tlQ0tTKdeRmXpVbWrHM+RCzR4z5ERyPAmQLxRlcPohhwBE31XL1X9Cegja9lqudAh//sLARcsNf4eeafh9qSzPei8uHsOfzY31rxMBR2eh/c73H0YgcgAv+77/fOL7L6fQ1oQz9xUmqGnhJTh2ngAAAAlwSFlzAAALEwAACxMBAJqcGAAABpJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0wMy0xM1QyMzozMjo0MyswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDMtMTNUMjM6Mzc6MTgrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDMtMTNUMjM6Mzc6MTgrMDE6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZDQ3YTQwNGItNDllMC00ZWU3LWIwZTItZDNhNTcxOGY1NDZkIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU1Q0YzNzcwNUQ5RTExRUFCRTFFOUFEQzgxMjM0QjZFIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6RTVDRjM3NzA1RDlFMTFFQUJFMUU5QURDODEyMzRCNkUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTVDRjM3NkQ1RDlFMTFFQUJFMUU5QURDODEyMzRCNkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTVDRjM3NkU1RDlFMTFFQUJFMUU5QURDODEyMzRCNkUiLz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzQ0YjM5OGQtNTYzOS00ZTVmLWFjNTAtNzAyZGI3MTBlZmI0IiBzdEV2dDp3aGVuPSIyMDIwLTAzLTEzVDIzOjM3OjA4KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZDQ3YTQwNGItNDllMC00ZWU3LWIwZTItZDNhNTcxOGY1NDZkIiBzdEV2dDp3aGVuPSIyMDIwLTAzLTEzVDIzOjM3OjE4KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz469glJAAAAi0lEQVQokY2RSw7AIAhEmR7Uw3HR6QYaPqIlMUHhAQ4gKdEALClGUlNOhACsWsTeE/jcAOuUJni2WRdrEAAB0Pwj9MdGIezz0dctVMEdkCBXx5T6EuLdYbicJZg6RZikQkTaONVqHHFx03JLR23qHcbL6k3JEzz+iaROxZp6dSc+doqT9ErL/d2J8RdHzrAW/vg69AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAPCAYAAAAyPTUwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTVDRjM3NzM1RDlFMTFFQUJFMUU5QURDODEyMzRCNkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTVDRjM3NzQ1RDlFMTFFQUJFMUU5QURDODEyMzRCNkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNUNGMzc3MTVEOUUxMUVBQkUxRTlBREM4MTIzNEI2RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNUNGMzc3MjVEOUUxMUVBQkUxRTlBREM4MTIzNEI2RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu+YZPEAAACUSURBVHjaYmRABZEMeAALusD/o2YYip6+/skgE3CRgRHZVLDCd+/gAn/4BBlevv8FVggEy5nwWYusEEQw4jL16V9uFIUggNVkJIUwT0fCTI78v1kFRaG0KDuG50A2MKIHF3JoICuEBd1ybOGMrhDZgwhP4lCI1YO4FGIEHT6FKCYTUgh365MN+pGEEhFGoBMCAAEGALMcUYplX765AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/sigil.282c65d0.svg\";","module.exports = __webpack_public_path__ + \"static/media/portal.348cb391.png\";","module.exports = __webpack_public_path__ + \"static/media/score.46c220b0.svg\";","\n/**\n  * @desc Mark welcome screen as read\n*/\n\nconst tutorial = (data, mode, amount) => {\n  data.game.tutorial = true\n  return data\n}\n\nexport { tutorial }\n","/**\n  * @desc Create monsters data tree\n*/\n\nconst createMonsters = (data, monsters) => {\n  // Reset data\n  data.monsters = {}\n  data.monsterTiers = {}\n\n  for (let index = 0; index < monsters.length; index++) {\n    const monster = monsters[index];\n\n    // Populate monster tiers\n    if (!data.monsterTiers[monster[`tier`]]) data.monsterTiers[monster[`tier`]] = []\n    data.monsterTiers[monster[`tier`]].push(monster[`code`])\n\n    // Populate monster list\n    data.monsters[monster[`code`]] = {\n      name: monster.name.split(\",\").map(item => item.trim()),\n      tier: monster.tier,\n      element: monster.element,\n      profile: monster.profile,\n      boost: monster.boost && monster.boost.split(\",\").map(item => item.trim()),\n      items: monster.items && monster.items.split(\",\").map(item => item.trim()),\n      weapons: monster.weapons && monster.weapons.split(\",\").map(item => item.trim()),\n      humanoid: monster.humanoid,\n      elite: monster.elite,\n      fumble: 1,\n      verticalPosition: monster.verticalPosition\n    }\n  }\n\n  return data\n}\n\nexport { createMonsters }\n","// Main game settings\nconst gameSettings = {\n  maxLevel: 30, // Highest level of the game\n  zones: 6, // Number of sections in levels (should be 5)\n  combatSpeed: 3000,\n  widgetDelay: 600,\n  itemStateDelay: 2000,\n  monsterCharPointsRange: [8, 110], // Range of monsters points, from level 1 to last level\n  monsterCharPointsRange_loop: [120, 500], // Range of monsters points, from level 1 to last level\n  eliteCharPointsRange: [30, 50], // elite % spec bonus\n  beastHealthBoostRange: [30, 60], // non humanoid HP boost\n  manualCharBoostRange: [30, 60], // manual char boost specified in monster settings\n  postScoreUrl: \"https://mhd20.com/postscore/\",\n  getScoreUrl: \"https://mhd20.com/getscore/\",\n  maxEnergyMultiplyer: {\n    STR: 10,\n    MAG: 10,\n    CON: 10\n  },\n  skillsRecharge: {\n    heal: 3,\n    stun: 3,\n    itembreak: 3,\n    reflect: 4,\n    psyblast: 3,\n    curse: 3,\n  },\n  icons: {\n    battleStart: [`book`, 1],\n    block: [`skill`, 6],\n    focus: [`skill`, 2],\n    specialattack: [`skill`, 3],\n    specialcast: [`skill`, 0],\n    stun: [`skill`, 8],\n    itembreak: [`skill`, 5],\n    psyblast: [`skill`, 4],\n    curse: [`skill`, 1],\n    attackfumble: [`skill`, 9],\n    castfumble: [`skill`, 9],\n    critical: [`skill`, 10],\n    fumble: [`skill`, 11],\n    skip: [`skill`, 12],\n    heal: [`skill`, 13],\n    reflect: [`skill`, 14],\n    defending: [`skill`, 15],\n    boost: [`skill`, 16],\n    reflectfail: [`skill`, 17],\n  }\n}\n\n// Initial game state\nconst initialState = {\n  game: {\n    state: `welcome`,\n    settings: {\n      combatSpeed: gameSettings.combatSpeed\n    }\n  }\n}\n\n// Default char settings\nconst defaultChars = {\n  warrior: {\n    STR: 8,\n    DEX: 4,\n    CON: 6,\n    MAG: 2,\n    LCK: 1,\n    fumble: 1,\n    startItem: `STR`\n  },\n  mage: {\n    STR: 2,\n    DEX: 5,\n    CON: 4,\n    MAG: 9,\n    LCK: 1,\n    fumble: 1,\n    startItem: `MAG`\n  },\n  thief: {\n    STR: 5,\n    DEX: 6,\n    CON: 4,\n    MAG: 5,\n    LCK: 2,\n    fumble: 2,\n    startItem: `DEX`\n  }\n}\n\n// Default consumables\nconst defaultInstants = {\n  warrior: [`quickheal`, `damage`, `restore`, `sharpenphysical`],\n  mage: [`quickheal`, `damage`, `temporaryupgrade`, `sharpenmagical`],\n  thief: [`quickheal`, `restore`, `temporaryluckupgrade`, `permanentupgrade`]\n}\n\nexport {\n  initialState,\n  gameSettings,\n  defaultChars,\n  defaultInstants\n}","// Type of items for each char\nconst charItems = {\n  humanoid: {\n    STR: [`belt`, `glove`, `ring`],\n    DEX: [`glove`, `ring`, `shoe`],\n    CON: [`armor`, `helmet`, `shield`],\n    MAG: [`amulet`, `book`, `ring`],\n    LCK: [`amulet`, `crystal`, `gem`],\n    physicalWeapon: [`axe`, `bow`, `flail`, `hammer`, `mace`, `morningstar`, `sword`],\n    magicalWeapon: [`cross`, `sceptre`, `wand`]\n  },\n  beast: {\n    STR: [],\n    DEX: [],\n    CON: [],\n    MAG: [],\n    LCK: [],\n    physicalWeapon: [],\n    magicalWeapon: []\n  }\n}\n\n// Maximum power range of items for each char\nconst charPower = {\n  STR: {\n    normal: [1,9],\n    magic: [10,19],\n    rare: [20,29],\n    legendary: [30,40]\n  },\n  DEX: {\n    normal: [1,9],\n    magic: [10,19],\n    rare: [20,29],\n    legendary: [30,40]\n  },\n  CON: {\n    normal: [1,9],\n    magic: [10,19],\n    rare: [20,29],\n    legendary: [30,40]\n  },\n  MAG: {\n    normal: [1,9],\n    magic: [10,19],\n    rare: [20,29],\n    legendary: [30,40]\n  },\n  LCK: {\n    normal: [1,1],\n    magic: [2,2],\n    rare: [3,3],\n    legendary: [4,5]\n  },\n}\n\n// Repartition of item quality\nconst itemQuality = {\n  quality: [`normal`, `magic`, `rare`, `legendary`],\n}\n\nconst weaponElements = {\n  elementsonly: [`fire`, `water`, `earth`],\n  elements: [`none`, `fire`, `water`, `earth`],\n  basicWeight: [8, 1, 1, 1]\n}\n\nconst setElementsToChar = {\n  fire: `STR`,\n  earth: `CON`,\n  water: `MAG`\n}\n\nconst setCharToElements = {\n  STR: `fire`,\n  CON: `earth`,\n  MAG: `water`\n}\n\nconst weaponDamage = {\n  damage: [`d4`, `d6`, `d8`, `d10`, `d12`, `d20`],\n  normal: [50, 50, 10, 0, 0, 0],\n  magic: [0, 0, 50, 50, 10, 0],\n  rare: [0, 0, 0, 50, 50, 10],\n  legendary: [0, 0, 0, 0, 50, 50]\n}\n\n// Number of dice to cast\nconst weaponMultiplicator = {\n  normal: [1,4],\n  magic: [3,6],\n  rare: [5,8],\n  legendary: [7,10]\n}\n\nconst weaponBonus = {\n  normal: [1,5],\n  magic: [6,10],\n  rare: [11,15],\n  legendary: [16,20]\n}\n\nconst weaponCost = {\n  physicalWeapon: {\n    normal: [10,20],\n    magic: [8,15],\n    rare: [6,10],\n    legendary: [4,8]\n  },\n  magicalWeapon: {\n    normal: [3,15],\n    magic: [3,15],\n    rare: [3,15],\n    legendary: [3,15]\n  }\n}\n\nconst instantSpecs = {\n  quickheal: {\n    normal: {\n      value: 30,\n      type: `food`,\n      id: [0, 34]\n    },\n    magic: {\n      value: 50,\n      type: `food`,\n      id: [35, 44]\n    },\n    rare: {\n      value: 100,\n      type: `potion`,\n      id: [14, 14]\n    },\n    legendary: {\n      value: 200,\n      type: `potion`,\n      id: [42,42]\n    }\n  },\n  restore: {\n    normal: {\n      type: `spell`,\n      id: 0,\n      charges: 1\n    },\n    magic: {\n      type: `spell`,\n      id: 0,\n      charges: 2\n    },\n    rare: {\n      type: `spell`,\n      id: 0,\n      charges: 3\n    },\n    legendary: {\n      type: `spell`,\n      id: 0,\n      charges: 4\n    }\n  },\n  temporaryupgrade: {\n    normal: {\n      value: 5,\n      type: `vial`\n    },\n    magic: {\n      value: 10,\n      type: `vial`\n    },\n    rare: {\n      value: 20,\n      type: `vial`\n    },\n    legendary: {\n      value: 30,\n      type: `vial`\n    }\n  },\n  temporaryluckupgrade: {\n    normal: {\n      value: 2,\n      type: `skill`,\n      id: 9,\n      charges: 1\n    },\n    magic: {\n      value: 4,\n      type: `skill`,\n      id: 9,\n      charges: 1\n    },\n    rare: {\n      value: 6,\n      type: `skill`,\n      id: 9,\n      charges: 2\n    },\n    legendary: {\n      value: 10,\n      type: `skill`,\n      id: 9,\n      charges: 3\n    }\n  },\n  permanentupgrade: {\n    normal: {\n      value: 2,\n      type: `spell`\n    },\n    magic: {\n      value: 4,\n      type: `spell`\n    },\n    rare: {\n      value: 6,\n      type: `spell`\n    },\n    legendary: {\n      value: 10,\n      type: `spell`\n    }\n  },\n  damage: {\n    normal: {\n      value: 20,\n      type: `throw`,\n      id: [0, 13]\n    },\n    magic: {\n      value: 30,\n      type: `throw`,\n      id: [0, 13]\n    },\n    rare: {\n      value: 60,\n      type: `throw`,\n      id: [14, 33]\n    },\n    legendary: {\n      value: 100,\n      type: `throw`,\n      id: [14, 33]\n    }\n  },\n  sharpenphysical: {\n    normal: {\n      type: `tool`,\n      id: [0, 3],\n      charges: 1\n    },\n    magic: {\n      type: `tool`,\n      id: [4, 7],\n      charges: 2\n    },\n    rare: {\n      type: `tool`,\n      id: [8, 11],\n      charges: 3\n    },\n    legendary: {\n      type: `tool`,\n      id: [8, 11],\n      charges: 4\n    }\n  },\n  sharpenmagical: {\n    normal: {\n      type: `tool`,\n      id: [0, 3],\n      charges: 1\n    },\n    magic: {\n      type: `tool`,\n      id: [4, 7],\n      charges: 2\n    },\n    rare: {\n      type: `tool`,\n      id: [8, 11],\n      charges: 3\n    },\n    legendary: {\n      type: `tool`,\n      id: [8, 11],\n      charges: 4\n    }\n  },\n}\n\nconst uniqueItems = {\n  items: {\n    STR: {\n      fire: [70,71],\n      water: [74,75],\n      earth: [72,73],\n      light: [78,79],\n      darkness: [76,77]\n    },\n    DEX: {\n      fire: [60,61],\n      water: [64,65],\n      earth: [62,63],\n      light: [68,69],\n      darkness: [66,67]\n    },\n    CON: {\n      fire: [40,41],\n      water: [44,45],\n      earth: [42,43],\n      light: [48,49],\n      darkness: [46,47]\n    },\n    MAG: {\n      fire: [50,51],\n      water: [54,55],\n      earth: [52,53],\n      light: [58,59],\n      darkness: [56,57]\n    },\n    LCK: {\n      fire: [80],\n      water: [82],\n      earth: [81],\n      light: [84],\n      darkness: [83]\n    }\n  },\n  weapons: {\n    STR: {\n      fire: [0,1,2,3],\n      water: [8,9,10,11],\n      earth: [4,5,6,7],\n      light: [16,17,18,19],\n      darkness: [12,13,14,15]\n    },\n    MAG: {\n      fire: [20,21,22,23],\n      water: [28,29,30,31],\n      earth: [24,25,26,27],\n      light: [36,37,38,39],\n      darkness: [32,33,34,35]\n    }\n  }\n}\n\n// @todo : share variables https://itnext.io/sharing-variables-between-js-and-sass-using-webpack-sass-loader-713f51fa7fa0\nconst itemRanges = {\n  \"amulet\": 42,\n  \"armor\": 192,\n  \"axe\": 119,\n  \"bag\": 11,\n  \"belt\": 1,\n  \"book\": 24,\n  \"bow\": 27,\n  \"coin\": 11,\n  \"coins\": 11,\n  \"cross\": 35,\n  \"crystal\": 11,\n  \"drops\": 20,\n  \"flail\": 25,\n  \"food\": 44,\n  \"gem\": 12,\n  \"glove\": 10,\n  \"hammer\": 35,\n  \"helmet\": 180,\n  \"mace\": 70,\n  \"morningstar\": 22,\n  \"potion\": 69,\n  \"ring\": 19,\n  \"sceptre\": 21,\n  \"shield\": 144,\n  \"shoe\": 43,\n  \"skill\": 17,\n  \"spell\": 47,\n  \"sword\": 161,\n  \"throw\": 33,\n  \"tool\": 11,\n  \"unique\": 84,\n  \"vial\": 7,\n  \"wand\": 17\n}\n\nexport {\n  charItems, \n  charPower,\n  itemQuality,\n  itemRanges,\n  weaponDamage,\n  weaponMultiplicator, \n  weaponBonus,\n  weaponCost,\n  weaponElements,\n  instantSpecs,\n  uniqueItems,\n  setElementsToChar,\n  setCharToElements\n}","// Utils\nfunction diceRoll(sides) {\n  return Math.floor(Math.random() * sides) + 1\n}\n\nfunction randomProperty(obj) {\n  var keys = Object.keys(obj);\n  return obj[keys[keys.length * Math.random() << 0]]\n}\n\nfunction randomKey(obj) {\n  var keys = Object.keys(obj);\n  return keys[keys.length * Math.random() << 0]\n}\n\nfunction randomValue(array) {\n  return array[Math.floor(Math.random() * array.length)]\n}\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction limitValue(value, min, max) {\n  if (value > max) value = max\n  if (value < min) value = min\n  return value\n}\n\nconst sumOfArray = arr => arr.reduce((a, b) => a + b, 0)\n\nfunction generateWeight(items, weight) {\n  var weighedItems = []\n  var currentItem = 0\n  var i\n\n  while (currentItem < items.length) {\n    for (i = 0; i < weight[currentItem]; i++)\n      weighedItems[weighedItems.length] = items[currentItem]\n    currentItem++\n  }\n\n  return weighedItems\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction clog(message, mode = \"default\") {\n  // let color, icon\n  // switch (mode) {\n  //   case \"location\":\n  //     color = \"white\"\n  //     icon = \"\"\n  //     break;\n  //   case  \"action\":\n  //     color = \"red\"\n  //     icon = \"\"\n  //     break;\n  //   case \"reducer\":\n  //     color = \"orange\"\n  //     icon = \"\"\n  //     break;\n  //   case \"function\":\n  //     color = \"grey\";\n  //     icon =\"\"\n  //     break;\n  //   case \"stop\":\n  //     color = \"red\";\n  //     icon = \"\"\n  //     break;\n  //   case \"error\":\n  //     color = \"Red\";\n  //     break;\n  //   case \"warning\":\n  //     color = \"Orange\";\n  //     break;\n  //   default:\n  //     color = \"white\"\n  //     break;\n  // }\n\n  // if (mode === `data`) console.table(message);\n  // else console.log(`%c${icon} ${message}`, `color:${color}`);\n}\n\nexport {\n  diceRoll,\n  randomProperty,\n  randomKey,\n  randomValue,\n  getRandomInt, \n  limitValue,\n  sumOfArray,\n  generateWeight,\n  clog,\n  capitalizeFirstLetter\n}","import { getRandomInt } from \"../utils/utils\"\nimport { itemRanges } from \"../conf/settings_items\"\n\nfunction getMonsterReward(level, elite) {\n  const baseReward = 30 * level\n  const randomBoost = getRandomInt(0, 20)\n  const eliteBoost = getRandomInt(20, 40)\n\n  // Return conf\n  return baseReward + (Math.round(baseReward * randomBoost / 100)) + (Math.round(baseReward * eliteBoost / 100))\n}\n\nfunction getItemPrice(level, quality, transaction=\"sell\") {\n  const randomBoost = getRandomInt(0, 10)\n  const qualityRange = {\n    normal: [50,100],\n    magic: [100,300],\n    rare: [400,1000],\n    legendary: [1000,2000]\n  }\n  const baseReward = getRandomInt(qualityRange[quality][0], qualityRange[quality][1])\n\n  let price = baseReward + (Math.round(baseReward * randomBoost / 100))\n\n  // Buy or sell\n  if (transaction !== `buy`) {\n    price = Math.round(price / 2)\n  }\n  // Return conf\n  return price\n}\n\nfunction getMonsterLoot(level, elite) {\n  let loot = []\n  // get base sell price\n  const baseReward = 20 * level / 2\n  const lootCount = getRandomInt(1, 3)\n  \n  for (let index = 0; index < lootCount; index++) {\n    const randomBoost = getRandomInt(0, 10)\n\n    loot.push({ \n        type: \"drops\", \n        id: getRandomInt(1, itemRanges[`drops`]), \n        reward: baseReward + (Math.round(baseReward * randomBoost / 100))\n    })\n  }\n\n  // get elite body parts & price\n  if (elite) {\n    const randomBoost = getRandomInt(0, 10)\n    const eliteBoost = getRandomInt(200, 300)\n\n    loot.push({\n      type: \"drops\",\n      id: getRandomInt(1, itemRanges[`drops`]),\n      quality: `rare`,\n      reward: baseReward + (Math.round(baseReward * randomBoost / 100)) + (Math.round(baseReward * eliteBoost / 100))\n    })\n  }\n\n  return loot\n}\n\nexport {\n  getMonsterReward,\n  getItemPrice,\n  getMonsterLoot\n}","import { gameSettings } from \"../conf/settings\"\nimport { charItems, itemRanges, charPower, itemQuality, weaponDamage, weaponMultiplicator, weaponBonus, weaponCost, weaponElements, instantSpecs, uniqueItems } from \"../conf/settings_items\"\nimport { getRandomInt, randomValue, generateWeight } from \"../utils/utils\"\nimport { getItemPrice } from '../monsters/getMonsterReward'\n\n// Item utils\nfunction getItemFromChar(CHAR, humanoid) {\n  const items = humanoid ? charItems.humanoid[CHAR] : charItems.beast[CHAR]\n  if (items && items.length > 0) return items[Math.floor(Math.random() * items.length)]\n  else return null\n}\n\nfunction getItemIdFromLevel(itemType, level) {\n  // Cut item range into level segments\n  const itemRange = itemRanges[itemType]\n  const lowTier = Math.floor(itemRange / gameSettings.maxLevel)\n  const hightTier = Math.ceil(itemRange / gameSettings.maxLevel)\n  // Get low and high points of the range\n  const possibleItemLow = lowTier * (level - 1) < 1 ? 1 : lowTier * (level - 1)\n  const possibleItemHigh = hightTier * level > itemRange ? itemRange : hightTier * level\n\n  return getRandomInt(possibleItemLow, possibleItemHigh)\n}\n\nfunction getItemPowerFromLevel(CHAR, itemQuality) {\n  return getRandomInt(charPower[CHAR][itemQuality][0], charPower[CHAR][itemQuality][1])\n}\n\nfunction getQualityWeight(level, peak, range, end=false) {\n  let value\n  if (level === peak) value = 100\n  else if (level < peak) value = 100 - (peak - level) * 15\n  else if (level > peak) {\n    if (end) value = 100\n    else {\n      value = 100 - (level - peak) * 15\n    }\n  }\n  // Non negative proba\n  if (value < 0) value = 0\n  \n  return value\n}\n\nfunction getItemQuality(level, elite) {\n  // New dynamic solution\n  const qualities = itemQuality.quality\n  const weight = [\n    getQualityWeight(level, 1, 7), \n    getQualityWeight(level, 7, 7), \n    getQualityWeight(level, 13, 7), \n    getQualityWeight(level, 20, 7, true)\n  ]\n  const weighedqualities = generateWeight(qualities, weight)\n\n  return randomValue(weighedqualities)\n}\n\n// Weapon utils\nfunction getWeaponType(type, humanoid) {\n  const weapons = humanoid \n    ? type === `STR` \n      ? charItems.humanoid[`physicalWeapon`] \n      : charItems.humanoid[`magicalWeapon`]\n    : type === `STR`\n      ? charItems.beast[`physicalWeapon`]\n      : charItems.beast[`magicalWeapon`]\n  return weapons[Math.floor(Math.random() * weapons.length)]\n}\n\nfunction getWeaponDamage(itemQuality) {\n  // Pick from a weighed array of dice (d4, d6, d8, d10, d12, d20, d100)\n  const heavyQualities = generateWeight(weaponDamage.damage, weaponDamage[itemQuality])\n  // Pick from a weighed array of multiplicators\n  const multiplicator = getRandomInt(weaponMultiplicator[itemQuality][0], weaponMultiplicator[itemQuality][1])\n  // Pick from a weighed array of bonuses\n  const heavyBonus = getRandomInt(weaponBonus[itemQuality][0], weaponBonus[itemQuality][1])\n  const displayBonus = (heavyBonus === 0) ? `` : `+` + heavyBonus\n  return multiplicator + randomValue(heavyQualities) + displayBonus\n}\n\nfunction getWeaponCost(type, itemQuality) {\n  const itemCostRange = type === `STR`\n    ? weaponCost[`physicalWeapon`][itemQuality]\n    : weaponCost[`magicalWeapon`][itemQuality]\n  // Pick from a weighed array of costs (stamina : lower is rare / mana : equally balanced)\n  const itemCost = getRandomInt(itemCostRange[0], itemCostRange[1]) \n\n  return itemCost\n}\n\nfunction getWeaponElement() {\n  // Pick from a weighed array of elements\n  const heavyElements = generateWeight(weaponElements.elements, weaponElements.basicWeight)\n\n  return randomValue(heavyElements)\n}\n\n// Forge unique weapons\nfunction forgeUniqueItems() {\n\n  let uniques = {}\n  uniques[\"items\"] = {}\n  uniques[\"weapons\"] = {}\n\n  function uniquePrice(type, element) {\n    let price = getRandomInt(200, 400) * 13\n    // Light weapons are more exepensive (endgame critics)\n    if (type === `weapons` && element === `light`) price = price * 2\n    return price\n  }\n\n  function uniqueScore(type, char, profile) {\n    let score\n    // Weapons\n    if (type === `weapons`) {\n      switch (profile) {\n        case 0:\n          score = getRandomInt(10, 15) + `d` + randomValue([20])\n          break;\n\n        case 1:\n          score = getRandomInt(7, 9) + `d` + randomValue([4, 6]) + `+` + getRandomInt(5, 7)*10\n          break;\n\n        case 2:\n          score = `d4+` + getRandomInt(9, 13) * 10\n          break;\n\n        case 3:\n          score = getRandomInt(7, 9) + `d` + randomValue([10, 12]) + `+` + getRandomInt(3, 5)*10\n          break;\n      \n        default:\n          break;\n      }\n    }\n    // Items\n    else if (type === `items`) {\n      if (char === `LCK`) {\n        score = getRandomInt(4,5)\n      }\n      else {\n        switch (profile) {\n          case 0:\n          case 2:\n            score = getRandomInt(40,50)\n            break;\n  \n          case 1:\n          case 3:\n            score = getRandomInt(45,65)\n            break;\n  \n          default:\n            break;\n        }\n      }\n    }\n\n    return score\n  }\n\n  // Loop through uniqueItems array category\n  for (let [type, type_value] of Object.entries(uniqueItems)) {\n    // Loop CHAR\n    for (let [char, char_value] of Object.entries(type_value)) {\n      // Loop element\n      for (let [element, element_value] of Object.entries(char_value)) {\n        let profile = 0\n        // Loop items\n        for (let index = 0; index < element_value.length; index++) {\n          const id = element_value[index];\n          // Generate object values\n          uniques[type][id] = {\n            type: `unique`,\n            char: char,\n            id: id,\n            score: uniqueScore(type, char, profile),\n            element: element,\n            cost: type === `weapons` ? getWeaponCost(char, `legendary`) : null,\n            quality: `unique`,\n            reward: 0,\n            price: uniquePrice(type, element)\n          }\n          if (profile === 3) profile = 0\n          else profile++\n        }\n      }\n    }\n  }\n\n  return uniques\n}\n\n// Forge instants\nfunction getInstant(itemType, itemQuality, level, option = false) {\n\n  // quality: [`normal`, `magic`, `rare`, `legendary`]\n  let effect, value, type, id, label, permanence, char\n  let charges = 1\n  let charColors\n  // Some instants are cheaper\n  let priceModifier\n\n  switch (itemType) {\n    case `quickheal`:\n      effect = `quickheal`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      id = getRandomInt(instantSpecs[itemType][itemQuality].id[0], instantSpecs[itemType][itemQuality].id[1])\n      label = `${value} HP`\n      priceModifier = .7\n      break;\n\n    case `restore`:\n      effect = `restore`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      id = instantSpecs[itemType][itemQuality].id\n      charges = instantSpecs[itemType][itemQuality].charges\n      label = `Energy`\n      priceModifier = .7\n      break;\n\n    case `temporaryupgrade`:\n      effect = `upgrade`\n      permanence = `temporary`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      charColors = { STR: 2, MAG: 4, DEX: 6, CON: 5 }\n      id = charColors[option]\n      char = option\n      label = `+${value} ${option}`\n      priceModifier = .7\n      break;\n\n    case `temporaryluckupgrade`:\n      effect = `upgrade`\n      permanence = `temporary`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      id = instantSpecs[itemType][itemQuality].id\n      charges = instantSpecs[itemType][itemQuality].charges\n      char = `LCK`\n      label = `+${value} ${char}`\n      priceModifier = .7\n      break;\n\n    case `permanentupgrade`:\n      effect = `upgrade`\n      permanence = `permanent`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      charColors = { STR: 24, MAG: 29, DEX: 28, CON: 32 }\n      id = charColors[option]\n      char = option\n      label = `+${value} ${option}`\n      priceModifier = .9\n      break;\n\n    case `damage`:\n      effect = `damage`\n      value = instantSpecs[itemType][itemQuality].value\n      type = instantSpecs[itemType][itemQuality].type\n      id = getRandomInt(instantSpecs[itemType][itemQuality].id[0], instantSpecs[itemType][itemQuality].id[1])\n      label = `${value} DMG`\n      priceModifier = .7\n      break;\n\n    case `sharpenphysical`:\n      effect = `sharpen`\n      value = `STR`\n      type = instantSpecs[itemType][itemQuality].type\n      id = getRandomInt(instantSpecs[itemType][itemQuality].id[0], instantSpecs[itemType][itemQuality].id[1])\n      charges = instantSpecs[itemType][itemQuality].charges\n      label = `Sharpen`\n      priceModifier = .7\n      break;\n\n    case `sharpenmagical`:\n      effect = `sharpen`\n      value = `MAG`\n      type = instantSpecs[itemType][itemQuality].type\n      id = getRandomInt(instantSpecs[itemType][itemQuality].id[0], instantSpecs[itemType][itemQuality].id[1])\n      charges = instantSpecs[itemType][itemQuality].charges\n      label = `Enchant`\n      priceModifier = .7\n      break;\n  \n    default:\n      break;\n  }\n\n  return {\n    type: type, \n    id: id,\n    effect: effect,\n    char: char,\n    quality: itemQuality,\n    permancence: permanence,\n    value: value,\n    label: label,\n    charges: charges,\n    reward: Math.round(getItemPrice(level, itemQuality) * priceModifier),\n    price: Math.round(getItemPrice(level, itemQuality, `buy`) * priceModifier)\n  }\n}\n\nexport {\n  getItemFromChar,\n  getItemIdFromLevel,\n  getItemPowerFromLevel,\n  getItemQuality,\n  getWeaponType,\n  getWeaponDamage, \n  getWeaponCost,\n  getWeaponElement, \n  getInstant,\n  forgeUniqueItems\n}","import { getWeaponType, getItemQuality, getItemIdFromLevel, getWeaponDamage, getWeaponCost, getWeaponElement } from '../utils/forge'\nimport { getItemPrice } from '../monsters/getMonsterReward'\n\nfunction getMonsterWeapon(type, level, humanoid, elite, forceQuality = false) {\n  // Get weapon type\n  const weaponType = getWeaponType(type, humanoid) // Get weapon from type\n  const itemQuality = forceQuality ? forceQuality : getItemQuality(level, elite) // Get item rank\n  const itemId = getItemIdFromLevel(weaponType, level) // Select item id from level\n  const weaponDamage = getWeaponDamage(itemQuality) // Get weapon damage from level\n  const weaponElement = getWeaponElement() // Get weapon cost\n  const weaponCost = getWeaponCost(type, itemQuality) // Get weapon cost\n\n    return {\n      type: weaponType,\n      char: type,\n      id: itemId,\n      score: weaponDamage,\n      element: weaponElement,\n      cost: weaponCost,\n      quality: itemQuality,\n      reward: getItemPrice(level, itemQuality),\n      price: getItemPrice(level, itemQuality, `buy`)\n  }\n}\n\nfunction getMonsterWeapons(types, level, humanoid, elite, forceQuality=false) {\n  let monsterWeapons = {}\n\n  if (types) {\n    // Parse items array\n    for (var i = 0; i < types.length; i++) {\n      // Get each weapons\n      monsterWeapons[types[i]] = getMonsterWeapon(types[i], level, humanoid, elite, forceQuality)\n    }\n  }\n\n  // Return conf\n  return monsterWeapons\n}\n\nexport {\n  getMonsterWeapons\n}","import { getItemFromChar, getItemIdFromLevel, getItemPowerFromLevel, getItemQuality } from '../utils/forge'\nimport { getItemPrice } from '../monsters/getMonsterReward'\n\n\nfunction getMonsterItem(CHAR, level, humanoid, elite, forceQuality = false) {\n  const itemType = getItemFromChar(CHAR, humanoid) // Get item type from char\n  // Check if item is special\n  const itemQuality = forceQuality ? forceQuality : getItemQuality(level, elite) // Get item rank\n  const itemId = getItemIdFromLevel(itemType, level) // Select item id from level\n  const itemScore = getItemPowerFromLevel(CHAR, itemQuality) // Select item power from level\n\n  // Generate item conf\n  return {\n    type: itemType,\n    char: CHAR,\n    id: itemId,\n    score: itemScore, \n    quality: itemQuality,\n    reward: getItemPrice(level, itemQuality),\n    price: getItemPrice(level, itemQuality, `buy`)\n  }\n}\n\nfunction getMonsterItems(items, level, humanoid, elite, forceQuality = false) {\n  let monsterItems = {}\n  if (items) {\n    // Parse items array\n    for (var i = 0; i < items.length; i++) {\n      // Get each item\n      monsterItems[items[i]] = getMonsterItem(items[i], level, humanoid, elite, forceQuality)\n    }\n  }\n\n  // Return conf\n  return monsterItems\n}\n\nexport {\n  getMonsterItems\n}","\nimport { getItemQuality } from '../utils/forge'\nimport { randomValue } from \"../utils/utils\"\nimport { getInstant } from '../utils/forge'\n\n\nfunction getShopInstant(effect, level, forceQuality = false) {\n\n  let option\n  // Check if item is special\n  const itemQuality = forceQuality ? forceQuality : getItemQuality(level, false) // Get item rank\n\n  // Ranges\n  let tempCharRange = [`STR`, `DEX`, `MAG`]\n  let permCharRange = [`STR`, `DEX`, `CON`, `MAG`]\n  if (effect === `temporaryupgrade`) option = randomValue(tempCharRange)\n  if (effect === `permanentupgrade`) option = randomValue(permCharRange)\n  if (effect === `temporaryluckupgrade`) option = `LCK`\n\n  // Generate item conf\n  return getInstant(effect, itemQuality, level, option)\n}\n\nfunction getShopInstants(items, level, forceQuality = false) {\n  let shopItems = {}\n  if (items) {\n    // Parse items array\n    for (var i = 0; i < items.length; i++) {\n      // Get each item\n      shopItems[items[i]] = getShopInstant(items[i], level, forceQuality)\n    }\n  }\n\n  // Return conf\n  return shopItems\n}\n\nexport {\n  getShopInstants\n}","// Get compiled Stats with all the bonus\nconst getStat = (player, stat) => {\n\n  // Base stats\n  const baseStat = player[stat]\n  // Temporary buff\n  const temporaryBuff = findBuff(player, `temporary`, stat)\n  // Permanent buff\n  const permanentBuff = findBuff(player, `permanent`, stat)\n  // Item buff\n  let itemBuff = player.items[stat] && player.items[stat].score ? player.items[stat].score : 0\n\n  // Return base/bonus/total\n  return {\n    natural: baseStat + permanentBuff,\n    items: itemBuff,\n    temporary: temporaryBuff,\n    static: baseStat + permanentBuff + itemBuff,\n    total: baseStat + permanentBuff + itemBuff + temporaryBuff\n  }\n}\n\n// Find buff and return value\nconst findBuff = (player, type, stat) => {\n  let buff = 0\n\n  if (player.buff && player.buff[type] && player.buff[type].length > 0) {\n    // Find array of buffs for this stat\n    buff = player.buff[type].filter(x => x.stat === stat);\n    // Compute total\n    let totalBuff = 0\n    for (let index = 0; index < buff.length; index++) {\n      totalBuff += buff[index].value\n    }\n\n    buff = totalBuff\n  }\n\n  return buff\n}\n\n// List all active buff for a CHAR\nconst listBuff = (stat, player) => {\n  let types = [`permanent`, `temporary`]\n  let buffs = []\n\n  for (let index = 0; index < types.length; index++) {\n    const type = types[index]\n    if (player.buff && player.buff[type] && player.buff[type].length > 0) {\n      // Find array of buffs for this stat\n      let activeBuffs\n      if (type === `permanent`) activeBuffs = player.buff[type].filter(x => x.stat === stat && x.origin !== \"instant\")\n      else activeBuffs = player.buff[type].filter(x => x.stat === stat)\n      // No value = empty array, so push only if values\n      for (let buffIndex = 0; buffIndex < activeBuffs.length; buffIndex++) {\n        if (activeBuffs.length > 0) buffs.push(activeBuffs[buffIndex])\n      }\n    }\n  }\n\n  return buffs\n}\n\n// Push buff\nconst pushBuff = (player, type, stat, value, origin, rounds = 1) => {\n\n  // Create buff object if not existing\n  if (!player.buff) player.buff = {\n    temporary: [],\n    permanent: []\n  }\n  \n  if (type === `temporary` && !player.buff.temporary) player.buff.temporary = []\n  if (type === `permanent` && !player.buff.permanent) player.buff.permanent = []\n\n  const buff = {\n    stat: stat,\n    value: value,\n    origin: origin,\n    rounds: rounds\n  }\n\n  // Pushing buff\n  if (type === `temporary`) player.buff.temporary.push(buff)\n  if (type === `permanent`) player.buff.permanent.push(buff)\n\n  return player\n}\n\n// Reset buffs\nconst resetBuff = (data, player, type) => {\n\n  // Create buff object if not existing\n  if (!data[player].buff) data[player].buff = {\n    temporary: [],\n    permanent: []\n  }\n\n  if (type === `temporary`) data[player].buff.temporary = []\n  if (type === `permanent`) data[player].buff.permanent = []\n\n  return data\n}\n\nconst resetBuffByOrigin = (data, player, type, origin) => {\n\n  // Create buff object if not existing\n  if (!data[player].buff || !data[player].buff[type]) data[player].buff = {\n    temporary: [],\n    permanent: []\n  } \n  else {\n    let newBuffs = []\n    for (let index = 0; index < data[player].buff[type].length; index++) {\n      const buff = data[player].buff[type][index]\n      if (buff.origin !== origin) newBuffs.push(buff)\n    }\n    data[player].buff[type] = newBuffs\n  }\n\n  return data\n}\n\n// Alernate reset\nconst autoResetBuff = (data) => {\n\n  // Create buff object if not existing\n  if (!data.player.buff) data.player.buff = {\n    temporary: [],\n    permanent: []\n  }\n  if (!data.opponent.buff) data.opponent.buff = {\n    temporary: [],\n    permanent: []\n  }\n\n  // Decrease buff duration counter\n  data.player = decreaseBuffCounters(data.player)\n  data.opponent = decreaseBuffCounters(data.opponent)\n\n  return data\n}\n\nconst decreaseBuffCounters = (player) => {\n  // Parse all buffs \n  for (let index = 0; index < player.buff.temporary.length; index++) {\n    // Decrease counts\n    player.buff.temporary[index].rounds--\n    // Remove buffs with a now dead counter\n    if (player.buff.temporary[index].rounds < 0) {\n      delete player.buff.temporary[index]\n    }\n  }\n\n  // Removing empty items (delete calls) from array\n  player.buff.temporary = player.buff.temporary.filter(val => val)\n\n  return player\n}\n\nconst incrementSkillCount = (data) => {\n  let { game } = data\n\n  // Parse all skills\n  if (!game.playerTurn) {\n    for (let [key, value] of Object.entries(data.player.skills)) {\n      if (value.current < value.ready) data.player.skills[key].current++\n    }\n  }\n  return data\n}\n\nexport {\n  getStat,\n  pushBuff, \n  findBuff,\n  listBuff,\n  resetBuff,\n  autoResetBuff,\n  incrementSkillCount,\n  resetBuffByOrigin\n}","import { getStat } from './stats'\nimport { gameSettings } from \"../../conf/settings\"\n\n// Refesh max energy values\nconst maxEnergyRefresh = (data) => {\n  let { player } = data\n  let activePlayer = { ...player } \n\n  if (Object.keys(activePlayer).length !== 0) {\n    // Compute maxHitPoints\n    const playerCON = getStat(activePlayer, `CON`)\n    const maxHitPoints = playerCON.static * gameSettings.maxEnergyMultiplyer.CON\n    activePlayer.maxHitPoints = maxHitPoints\n    // Compute maxMagicPoints\n    const playerMAG = getStat(activePlayer, `MAG`)\n    const maxMagicPoints = playerMAG.static * gameSettings.maxEnergyMultiplyer.MAG\n    activePlayer.maxMagicPoints = maxMagicPoints\n    // Compute maxStamina\n    const playerSTR = getStat(activePlayer, `STR`)\n    activePlayer.maxStamina = playerSTR.static * gameSettings.maxEnergyMultiplyer.STR\n    // Compute maxPhysicalRage\n    activePlayer.maxPhysicalRage = Math.round(maxHitPoints * 50 / 100)\n    // Compute maxMagicalRage\n    activePlayer.maxMagicalRage = Math.round(maxMagicPoints * 50 / 100)\n\n    // Update data\n    data.player = activePlayer\n  }\n\n  return data\n}\n\n// Refesh energy\nconst energyRefresh = (data, type) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = !game.playerTurn ? { ...player } : { ...opponent }\n\n  if (type === `magical`) {\n    // Upgrade mana\n    const activePlayerMAG = getStat(activePlayer, `MAG`)\n    // Set to max mana if over limit\n    const updatedMana =\n      activePlayer.magicPoints + activePlayerMAG.total > activePlayer.maxMagicPoints\n        ? activePlayer.maxMagicPoints\n        : activePlayer.magicPoints + activePlayerMAG.total\n\n    // Update data\n    if (!game.playerTurn) data.player.magicPoints = updatedMana\n    else data.opponent.magicPoints = updatedMana\n  } \n  \n  if (type === `physical`) {\n    // Upgrade stamina\n    const activePlayerCON = getStat(activePlayer, `CON`)\n    // Set to max stamina if over limit\n    const updatedStamina =\n      (activePlayer.stamina + activePlayerCON.natural) > activePlayer.maxStamina\n        ? activePlayer.maxStamina\n        : activePlayer.stamina + activePlayerCON.natural\n\n    // Update data\n    if (!game.playerTurn) data.player.stamina = updatedStamina\n    else data.opponent.stamina = updatedStamina\n  }\n\n  return data\n}\n\nconst energyBurn = (player, value, type) => {\n  // Burn mana\n  if (type === `magical`) {\n    player.magicPoints = player.magicPoints - value\n    if (player.magicPoints < 0) player.magicPoints = 0\n  }\n  // Burn stamina\n  if (type === `physical`) {\n    player.stamina = player.stamina - value\n    if (player.stamina < 0) player.stamina = 0\n  }\n  return player\n}\n\n// Heal a player\nconst energyRestore = (player, value, type) => {\n  // Restore health\n  if (type === `hitPoints`) {\n    player.hitPoints += value\n    if (player.hitPoints > player.maxHitPoints) player.hitPoints = player.maxHitPoints\n  }\n  // Restore stamina\n  if (type === `stamina`) {\n    player.stamina += value\n    if (player.stamina > player.maxStamina) player.stamina = player.maxStamina\n  }\n  // Restore mana\n  if (type === `magicPoints`) {\n    player.magicPoints += value\n    if (player.magicPoints > player.maxMagicPoints) player.magicPoints = player.maxMagicPoints\n  }\n  // Restore skills\n  if (type === `skills`) {\n    for (let [key] of Object.entries(player.skills)) {\n      player.skills[key].current = player.skills[key].ready\n    }\n  }\n  return player\n}\n\n// Use instant items\nconst instantUse = (player, id) => {\n  // Remove 1 counter\n  player.instants[id].charges--\n  // If zero, destroy item\n  if (player.instants[id].charges === 0) player.instants[id] = null\n\n  return player\n}\n\nexport {\n  maxEnergyRefresh,\n  energyRefresh, \n  energyBurn,\n  energyRestore,\n  instantUse\n}","import { maxEnergyRefresh } from '../../actions/combat/energy'\nimport { pushBuff, getStat, resetBuffByOrigin } from '../../actions/combat/stats'\nimport { gameSettings } from \"../../conf/settings\"\nimport { setElementsToChar } from \"../../conf/settings_items\"\n\n/**\n  * @desc Optional updates on item acquisition (from loot or shop)\n*/\n\nconst onNewItem = (data, type, char, item) => {\n  // Next state\n  let nextData = JSON.parse(JSON.stringify(data))\n\n  // Get item\n  nextData.player[type][char] = item\n\n  // Compute side effects\n  nextData = sideEffects(data, nextData, type, char)\n\n  return nextData\n}\n\nconst setBonus = (data) => {\n  /** Check for sets items */\n  let setElements = {}\n  // eslint-disable-next-line no-unused-vars\n  for (let [key, value] of Object.entries(data.player.items)) {\n    if (value.element) setElements[value.element] = (setElements[value.element] || 0) + 1;\n  }\n  // Remove set buffs\n  resetBuffByOrigin(data, `player`, `permanent`, `setItems`)\n  data.player.setItems = {}\n  // Update set buffs\n  for (let [element, value] of Object.entries(setElements)) {\n    if (value > 1) {\n      for (let index = 1; index < value; index++) {\n        if (setElementsToChar[element]) pushBuff(data.player, `permanent`, setElementsToChar[element], value * 2, `setItems`)\n        data.player.setItems[element] = value\n      }\n    }\n  }\n\n  return data\n}\n\nconst sideEffects = (data, nextData, type, char) => {\n  // Refresh energies\n  nextData = maxEnergyRefresh(nextData)\n\n  /** Special behaviors */\n\n  // Item sets bonus\n  nextData = setBonus(nextData)\n\n  /** CON items upgrades current HP following ratio */\n  if ((type === \"items\" || type === \"upgrade\") && char === `CON`) {\n    // Previous and next CON\n    let previousCON = getStat(data.player, `CON`)\n    let nextCON = getStat(nextData.player, `CON`)\n    let HPgain = (nextCON.static - previousCON.static) * gameSettings.maxEnergyMultiplyer.CON\n    // Upgrading HP\n    nextData.player.hitPoints = nextData.player.hitPoints + HPgain\n  }\n\n  return nextData\n}\n\nexport { onNewItem, sideEffects, setBonus }\n","/**\n  * Score and global logs functions\n*/\n\nconst addCounter = (data, scope, item, value) => {\n  // Create score object if not existing\n  if (!data.score) data.score = {\n    alltime: {},\n    game: {},\n    run: {}\n  }\n\n  const folder = item.split('/');\n\n  // Non recursive sad way =[\n  switch (folder.length) {\n    case 1:\n      if (data.score[scope][folder[0]]) data.score[scope][folder[0]] += value\n      else data.score[scope][folder[0]] = value\n      break;\n    case 2:\n      if (!data.score[scope][folder[0]]) data.score[scope][folder[0]] = {}\n      if (data.score[scope][folder[0]][folder[1]]) data.score[scope][folder[0]][folder[1]] += value\n      else data.score[scope][folder[0]][folder[1]] = value\n      break;\n    case 3:\n      if (!data.score[scope][folder[0]]) data.score[scope][folder[0]] = {}\n      if (!data.score[scope][folder[0]][folder[1]]) data.score[scope][folder[0]][folder[1]] = {}\n      if (data.score[scope][folder[0]][folder[1]][folder[2]]) data.score[scope][folder[0]][folder[1]][folder[2]] += value\n      else data.score[scope][folder[0]][folder[1]][folder[2]] = value\n      break;\n    default:\n      break;\n  }\n  return data\n}\n\nconst addBestCounter = (data, scope, item, value) => {\n  // Create score object if not existing\n  if (!data.score) data.score = {\n    alltime: {},\n    game: {},\n    run: {}\n  }\n\n  if (data.score[scope][item]) {\n    if (value > data.score[scope][item]) data.score[scope][item] = value \n  } else {\n    data.score[scope][item] = value\n  }\n\n  return data\n}\n\nconst pushCounter = (data, scope, item, value) => {\n  // Create score object if not existing\n  if (!data.score) data.score = {\n    alltime: {},\n    game: {},\n    run: {}\n  }\n\n  if (data.score[scope][item]) {\n    data.score[scope][item].push(value)\n  } else {\n    data.score[scope][item] = []\n    data.score[scope][item].push(value)\n  }\n\n  return data\n}\n\nconst score = (data, item, depth, value = 1) => {\n  // Only works for player's actions\n  if (data.game.playerTurn) {\n  \n    switch (depth) {\n      case `run`:\n        data = addCounter(data, `alltime`, item, value)\n        data = addCounter(data, `game`, item, value)\n        data = addCounter(data, `run`, item, value)\n        break;\n\n      case `game`:\n        data = addCounter(data, `alltime`, item, value)\n        data = addCounter(data, `game`, item, value)\n        break;\n\n      case `alltime`:\n        data = addCounter(data, `alltime`, item, value)\n        break;\n    \n      default:\n        break;\n    }\n\n    return data\n  } \n  else {\n    return data\n  }\n}\n\nconst forceScore = (data, item, depth, value = 1) => {\n  // Always work\n  switch (depth) {\n    case `run`:\n      data = addCounter(data, `alltime`, item, value)\n      data = addCounter(data, `game`, item, value)\n      data = addCounter(data, `run`, item, value)\n      break;\n\n    case `game`:\n      data = addCounter(data, `alltime`, item, value)\n      data = addCounter(data, `game`, item, value)\n      break;\n\n    case `alltime`:\n      data = addCounter(data, `alltime`, item, value)\n      break;\n\n    default:\n      break;\n  }\n\n  return data\n}\n\nconst bestScore = (data, item, depth, value) => {\n  // Only scores if value is better than previously\n  switch (depth) {\n    case `run`:\n      data = addBestCounter(data, `alltime`, item, value)\n      data = addBestCounter(data, `game`, item, value)\n      data = addBestCounter(data, `run`, item, value)\n      break;\n\n    case `game`:\n      data = addBestCounter(data, `alltime`, item, value)\n      data = addBestCounter(data, `game`, item, value)\n      break;\n\n    case `alltime`:\n      data = addBestCounter(data, `alltime`, item, value)\n      break;\n\n    default:\n      break;\n  }\n\n  return data\n}\n\nconst pushScore = (data, item, depth, value) => {\n  // Add value to a list\n  switch (depth) {\n    case `run`:\n      data = pushCounter(data, `alltime`, item, value)\n      data = pushCounter(data, `game`, item, value)\n      data = pushCounter(data, `run`, item, value)\n      break;\n\n    case `game`:\n      data = pushCounter(data, `alltime`, item, value)\n      data = pushCounter(data, `game`, item, value)\n      break;\n\n    case `alltime`:\n      data = pushCounter(data, `alltime`, item, value)\n      break;\n\n    case `onlyrun`:\n      data = pushCounter(data, `run`, item, value)\n      break;\n\n    default:\n      break;\n  }\n\n  return data\n}\n\nconst getLevelFromXp = (xp) => {\n  return Math.floor(Math.floor(25 + Math.sqrt(625 + 100 * xp)) / 50)\n}\n\nconst getXpToLevel = (level) => {\n  return 25 * level * level - 25 * level\n}\n\nexport { score, forceScore, bestScore, pushScore, getLevelFromXp, getXpToLevel }\n","import { defaultChars, defaultInstants } from \"../../conf/settings\"\nimport { getMonsterWeapons } from '../../monsters/getMonsterWeapons'\nimport { getMonsterItems } from '../../monsters/getMonsterItems'\nimport { gameSettings } from \"../../conf/settings\"\nimport { getShopInstants } from '../../monsters/getShopInstants'\nimport { maxEnergyRefresh } from '../../actions/combat/energy'\nimport { setBonus } from '../../actions/settings/onNewItem'\nimport { getLevelFromXp } from '../../actions/score/score'\n\n/**\n  * @desc Create initial player\n*/\n\nconst createPlayer = (data, style) => {\n\n  let previousName = data.player ? data.player.name : ``\n  let previousXp = data.player && data.player.xp ? data.player.xp : 0\n  let previousGold = data.player ? data.player.gold : 0\n\n  // Set basic player info\n  data.player = {\n    name: previousName,\n    level: 1,\n    gold: previousGold,\n    xp: previousXp,\n    items: {},\n    weapons: {},\n    skills : {},\n  }\n\n  // Define characs\n  data.player.STR = defaultChars[style].STR\n  data.player.DEX = defaultChars[style].DEX\n  data.player.CON = defaultChars[style].CON\n  data.player.MAG = defaultChars[style].MAG\n  data.player.LCK = defaultChars[style].LCK\n  data.player.fumble = defaultChars[style].fumble\n\n  // Get default weapons\n  const weapons = getMonsterWeapons([`STR`, `MAG`], 1, true, false, `normal`)\n  data.player.weapons.STR = weapons[`STR`]\n  data.player.weapons.MAG = weapons[`MAG`]\n\n  // Get default free item\n  const item = getMonsterItems([defaultChars[style].startItem], 1, true, false, `normal`)\n  // Start item is junk, so make sure bonus is crap\n  if (item[defaultChars[style].startItem].score > 2) item[defaultChars[style].startItem].score = 2\n  // Set data\n  data.player.items[defaultChars[style].startItem] = item[defaultChars[style].startItem]\n  \n  // Overwrite with legacy items\n  if (data.game && data.game.legacy) {\n    for (let [key] of Object.entries(data.game.legacy)) {\n      for (let [itemKey, itemValue] of Object.entries(data.game.legacy[key])) {\n        data.player[key][itemKey] = itemValue\n      }\n    }\n  }\n\n  // Compute energies\n  data = maxEnergyRefresh(data)\n  // Item sets bonus\n  data = setBonus(data)\n  // Basic stats\n  data.player.hitPoints = data.player.maxHitPoints\n  data.player.magicPoints = data.player.maxMagicPoints\n  data.player.stamina = data.player.maxStamina\n  data.player.physicalRage = 0\n  data.player.magicalRage = 0\n\n  // Create secondary attacks counters\n  data.player.skills.heal = { current: gameSettings.skillsRecharge.heal, ready: gameSettings.skillsRecharge.heal }\n  data.player.skills.stun = { current: gameSettings.skillsRecharge.stun, ready: gameSettings.skillsRecharge.stun }\n  data.player.skills.itembreak = { current: gameSettings.skillsRecharge.itembreak, ready: gameSettings.skillsRecharge.itembreak }\n  data.player.skills.reflect = { current: gameSettings.skillsRecharge.reflect, ready: gameSettings.skillsRecharge.reflect }\n  data.player.skills.psyblast = { current: gameSettings.skillsRecharge.psyblast, ready: gameSettings.skillsRecharge.psyblast }\n  data.player.skills.curse = { current: gameSettings.skillsRecharge.curse, ready: gameSettings.skillsRecharge.curse }\n  \n  // Instant items\n  data.player.instants = []\n  let catalog = defaultInstants[style]\n  const instantsLevel = (Math.floor(getLevelFromXp(data.player.xp)/2))*5 < 1 ? 1 : (Math.floor(getLevelFromXp(data.player.xp)/2))*5\n  let startInstants = getShopInstants(catalog, instantsLevel)\n  // eslint-disable-next-line no-unused-vars\n  for (let [key, value] of Object.entries(startInstants)) {\n    data.player.instants.push(value)\n  }\n\n  return data\n}\n\nexport { createPlayer }\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Restart game to level 0\n*/\n\nconst resetLevel = (data) => {\n  data.game.level = 0 \n\n  // Score\n  data = forceScore(data, `runs`, `game`)\n  // Reset run\n  data.score.run = {}\n\n  return data\n}\n\nexport { resetLevel }\n","// Version and release notes\nconst version = [\n  {\n    version: `1.2`,\n    date: `21.06.20`,\n    code: `Permadeath`,\n    reset: false,\n    note: `A final run, the Abyss of Permadeath, is now available after the last boss is defeated (thanks to GrandMaster Bab for the idea). The run is extra hard, and death is final.`,\n    changes: [\n      `New last run in super hard mode`,\n      `Better endgame screens (they still suck)`,\n      `Various nerfing`,\n      `Various bug fixes`,\n      `Hall of fame scores reset`\n    ],\n  },\n  {\n    version: `1.1`,\n    date: `18.06.20`,\n    code: `Git gud`,\n    reset: `run`,\n    note: `Beta testers complain the game is too hard. Filthy casuals. Game difficulty lowered and testing a less punitive elite system.`,\n    changes: [\n      `Global monster nerfing`,\n      `Adding 5 more levels (now 30)`,\n      `Boss every 5 levels replaces the random/frustrating elites`,\n      `Game creation refacto : all levels computed at start`,\n      `Better level roadmap`,\n      `New ennemies`,\n      `Release note view + run reset system`,\n    ],\n  },\n  {\n    version: `1.0`,\n    date: `13.06.20`,\n    code: `Are we there yet?`,\n    reset: false,\n    note: `First \"almost done\" release, w00t.`,\n    changes: [],\n  }\n]\n\nexport {\n  version\n}","import { initialState } from '../../conf/settings'\nimport { version } from '../../conf/version'\n\n/**\n  * @desc Soft reset and display news\n*/\n\nconst updateVersion = (data) => {\n\n  // Reset run, all except player\n  data.game = initialState.game\n  data.game.tutorial = true\n  data.opponent = {}\n  data.monsters = {}\n  data.monsterTiers = {}\n  data.uniques = {}\n  data.log = {}\n  data.dataLogs = {}\n  if (data.score) data.score.run = {}\n  // Set to current version\n  data.version = version[0].version\n\n  // Display version notes\n  data.game.state = `releaseNotes`\n\n  return data\n}\n\nexport { updateVersion }\n","/**\n  * @desc Display news\n*/\n\nconst releaseNotes = (data) => {\n\n  // Display version notes\n  data.game.state = `releaseNotes`\n\n  return data\n}\n\nexport { releaseNotes }\n","import { version } from '../../conf/version'\n\n/**\n  * @desc Soft reset (only current run)\n*/\n\nconst setVersion = (data) => {\n\n  // Set to current version\n  data.version = version[0].version\n\n  return data\n}\n\nexport { setVersion }\n","import { score } from '../../actions/score/score'\nimport { initialState } from '../../conf/settings'\n\n/**\n  * @desc Restart game to level 0\n*/\n\nconst resetGame = (data) => {\n\n  // Reset everything\n  data.game = initialState.game\n  data.player = {}\n  data.opponent = {}\n  data.log = {}\n  data.dataLogs = {}\n  data.score.run = {}\n  data.score.game = {}\n\n  // Return home \n  data.game.state = `allReset`\n\n  // Score\n  data = score(data, `resets`, `alltime`)\n\n  return data\n}\n\nexport { resetGame }\n","/**\n  * @desc Set score as submitted\n*/\n\nconst submitScore = (data) => {\n\n  // Set score submitted\n  data.score.run.scoreSent = true\n\n  return data\n}\n\nexport { submitScore }\n","\n/**\n  * @desc Set item or weapon\n*/\n\nconst setItem = (data, type, char, item) => {\n  // Set basic player info\n  data.player[type][char] = item\n\n  return data\n}\n\nexport { setItem }\n","\n/**\n  * @desc Sell item or weapon\n*/\n\nconst setGold = (data, mode, amount) => {\n  // Get item value\n  let prevGold = data.player.gold\n  let nextGold = mode === `add` ? prevGold + amount : prevGold - amount\n  data.player.gold = nextGold\n\n  return data\n}\n\nexport { setGold }\n","\n/**\n  * @desc Keep item for legacy\n*/\n\nconst keepItem = (data, type, char, item) => {\n  // Save item\n  if (!data.game.legacy) data.game.legacy = {}\n  if (!data.game.legacy[type]) data.game.legacy[type] = {}\n  \n  data.game.legacy[type][char] = item\n\n  return data\n}\n\nexport { keepItem }\n","import { onNewItem } from '../../actions/settings/onNewItem'\nimport { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Set item or weapon\n*/\n\nconst buyItem = (data, type, char, item) => {\n  // Handle purchase\n  data = onNewItem(data, type, char, item)\n  // Pay item price\n  data.player.gold -= item.price\n\n  // Score\n  data = forceScore(data, `shop/gold/spent`, `alltime`, item.price)\n  data = forceScore(data, `shop/items/purchased`, `alltime`)\n\n  return data\n}\n\nexport { buyItem }\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Set item or weapon\n*/\n\nconst buyInstant = (data, item) => {\n  // Set item\n  let position = false\n  if (data.player.instants) {\n    for (let index = 0; index < data.player.instants.length; index++) {\n      if (!data.player.instants[index]) {\n        position = index\n        break;\n      }  \n    }\n  } else {\n    data.player.instants = []\n  }\n\n  if (position !== false) {\n    // Overwriting a null\n    data.player.instants[position] = item\n  }\n  else {\n    // Pushing at the end\n    data.player.instants.push(item)\n  }\n  \n  // Pay item price\n  data.player.gold -= item.price\n\n  // Score\n  data = forceScore(data, `shop/gold/spent`, `alltime`, item.price)\n  data = forceScore(data, `shop/items/purchased`, `alltime`)\n\n  return data\n}\n\nexport { buyInstant}\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Sell item or weapon\n*/\n\nconst sellItem = (data, type, char) => {\n  // Get item value\n  let prevGold = data.player.gold\n  let nextGold = prevGold + data.opponent[type][char].reward\n  data.player.gold = nextGold\n  // Remove item from opponent\n  data.opponent[type][char] = {}\n\n  // Score\n  data = forceScore(data, `shop/gold/won`, `alltime`, data.opponent[type][char].reward)\n  data = forceScore(data, `shop/items/sold`, `alltime`)\n\n  return data\n}\n\nexport { sellItem }\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Sell item or weapon\n*/\n\nconst sellInstant = (data, index, item) => {\n  // Get item value\n  let prevGold = data.player.gold\n  let nextGold = prevGold + item.reward\n  data.player.gold = nextGold\n  // Remove item from opponent\n  data.player.instants[index]= null\n\n  // Score\n  data = forceScore(data, `shop/gold/won`, `alltime`, item.reward)\n  data = forceScore(data, `shop/items/sold`, `alltime`)\n\n  return data\n}\n\nexport { sellInstant }\n","\n/**\n  * @desc Remove legacy items\n*/\n\nconst deleteLegacy = (data) => {\n  data.game.legacy = {}\n\n  return data\n}\n\nexport { deleteLegacy }\n","import { forgeUniqueItems } from '../../utils/forge'\n\n/**\n  * @desc Forge unique items\n*/\n\nconst forgeUniques = (data) => {\n  data.uniques = forgeUniqueItems()\n\n  return data\n}\n\nexport { forgeUniques }\n","import { onNewItem } from '../../actions/settings/onNewItem'\nimport { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Moveitem or weapon\n*/\n\nconst moveItem = (data, type, char, item) => {\n  // Handle loot\n  data = onNewItem(data, type, char, item)\n  // Remove item from opponent\n  data.opponent[type][char] = {}\n\n  // Score\n  data = forceScore(data, `shop/items/looted`, `alltime`)\n\n  return data\n}\n\nexport { moveItem }\n","\n/**\n  * @desc Set ui color (for monsters)\n*/\n\nconst setUIColor = (data, color) => {\n  // Set game state\n  data.game.uicolor = color\n\n  return data\n}\n\nexport { setUIColor }\n","\n/**\n  * @desc Set preferences\n*/\n\nconst preference = (data, type, value) => {\n  // Set preferences\n  if (type === `playerName`) data.player.name = value\n\n  return data\n}\n\nexport { preference }\n","/**\n  * @desc Resetting game to title screen\n*/\n\nconst welcome = (data) => {\n  // Erasing quit save state, except for home screen access\n  delete data.game.quitState\n  // Set game state\n  data.game.state = `welcome`\n\n  return data\n}\n\nexport { welcome }\n","/**\n  * @desc Resetting game to title screen\n*/\n\nconst welcome_keepQuitState = (data) => {\n  // Set game state\n  data.game.state = `welcome`\n\n  return data\n}\n\nexport { welcome_keepQuitState }\n","/**\n  * @desc Resetting game to title screen + saving exit state\n*/\n\nconst quit = (data) => {\n  // Saving current state (to be able to come back later)\n  data.game.quitState = data.game.state\n  // Set game state\n  data.game.state = `welcome`\n\n  return data\n}\n\nexport { quit }\n","import alfadriel from '../pics/opponents/alfadriel.png'\nimport ansellus from '../pics/opponents/ansellus.png'\nimport arcanegolem from '../pics/opponents/arcanegolem.png'\nimport astrallich from '../pics/opponents/astrallich.png'\nimport behemoth from '../pics/opponents/behemoth.png'\nimport blindworm from '../pics/opponents/blindworm.png'\nimport bloodmage from '../pics/opponents/bloodmage.png'\nimport bulldragon from '../pics/opponents/bulldragon.png'\nimport chimera from '../pics/opponents/chimera.png'\nimport clairvoyant from '../pics/opponents/clairvoyant.png'\nimport corruptedelemental from '../pics/opponents/corruptedelemental.png'\nimport corruptedhorseman from '../pics/opponents/corruptedhorseman.png'\nimport crocodilerogue from '../pics/opponents/crocodilerogue.png'\nimport crow from '../pics/opponents/crow.png'\nimport crystalmage from '../pics/opponents/crystalmage.png'\nimport cthulhu from '../pics/opponents/cthulhu.png'\nimport cultist from '../pics/opponents/cultist.png'\nimport darknesstitan from '../pics/opponents/darknesstitan.png'\nimport demon from '../pics/opponents/demon.png'\nimport dragonemperor from '../pics/opponents/dragonemperor.png'\nimport dryad from '../pics/opponents/dryad.png'\nimport dryadqueen from '../pics/opponents/dryadqueen.png'\nimport dynamo from '../pics/opponents/dynamo.png'\nimport elvenking from '../pics/opponents/elvenking.png'\nimport elvenmage from '../pics/opponents/elvenmage.png'\nimport excelsios from '../pics/opponents/excelsios.png'\nimport feralbeast from '../pics/opponents/feralbeast.png'\nimport fireangel from '../pics/opponents/fireangel.png'\nimport fireimp from '../pics/opponents/fireimp.png'\nimport firelord from '../pics/opponents/firelord.png'\nimport firewitch from '../pics/opponents/firewitch.png'\nimport forestgolem from '../pics/opponents/forestgolem.png'\nimport gazer from '../pics/opponents/gazer.png'\nimport ghostknight from '../pics/opponents/ghostknight.png'\nimport giantfish from '../pics/opponents/giantfish.png'\nimport goblinmage from '../pics/opponents/goblinmage.png'\nimport golddragon from '../pics/opponents/golddragon.png'\nimport iceelemental from '../pics/opponents/iceelemental.png'\nimport harbinger from '../pics/opponents/harbinger.png'\nimport ignis from '../pics/opponents/ignis.png'\nimport imp from '../pics/opponents/imp.png'\nimport knightking from '../pics/opponents/knightking.png'\nimport koboldarcher from '../pics/opponents/koboldarcher.png'\nimport lamprey from '../pics/opponents/lamprey.png'\nimport lichwarlord from '../pics/opponents/lichwarlord.png'\nimport mage from '../pics/opponents/mage.png'\nimport minordemon from '../pics/opponents/minordemon.png'\nimport myrdin from '../pics/opponents/myrdin.png'\nimport primaldemon from '../pics/opponents/primaldemon.png'\nimport radulac from '../pics/opponents/radulac.png'\nimport rootgolem from '../pics/opponents/rootgolem.png'\nimport runicgolem from '../pics/opponents/runicgolem.png'\nimport scarletwyrm from '../pics/opponents/scarletwyrm.png'\nimport shadowscythe from '../pics/opponents/shadowscythe.png'\nimport sparkdragon from '../pics/opponents/sparkdragon.png'\nimport stonegolem from '../pics/opponents/stonegolem.png'\nimport succubus from '../pics/opponents/succubus.png'\nimport sunwarrior from '../pics/opponents/sunwarrior.png'\nimport thanatos from '../pics/opponents/thanatos.png'\nimport vampire from '../pics/opponents/vampire.png'\nimport voidgargoyle from '../pics/opponents/voidgargoyle.png'\nimport waterspirit from '../pics/opponents/waterspirit.png'\nimport windpriest from '../pics/opponents/windpriest.png'\nimport yoggoth from '../pics/opponents/yoggoth.png'\n\n\nconst monsterPics = {\n  alfadriel, ansellus, arcanegolem, astrallich, behemoth, blindworm, bloodmage, bulldragon, chimera, clairvoyant, corruptedelemental,\n  corruptedhorseman, crocodilerogue, crow, crystalmage, cthulhu, cultist, darknesstitan, demon, dragonemperor, dryad, dryadqueen, \n  dynamo, elvenking, elvenmage, excelsios, feralbeast, fireangel, fireimp, firelord, firewitch, forestgolem, \n  gazer, ghostknight, giantfish, goblinmage, golddragon, harbinger, iceelemental, ignis, imp, knightking, koboldarcher, \n  lamprey, lichwarlord, mage, minordemon, myrdin, primaldemon, radulac, rootgolem, runicgolem, scarletwyrm, shadowscythe, sparkdragon, stonegolem, succubus, sunwarrior, thanatos, vampire, voidgargoyle, waterspirit, \n  windpriest, yoggoth\n}\n\nconst monsterProfiles = {\n  brute: { STR: 10, DEX: 6, CON: 4, MAG: 1, LCK: 1 },     // High STR\n  tank: { STR: 6, DEX: 4, CON: 9, MAG: 2, LCK: 1 },      // High CON\n  duelist: { STR: 7, DEX: 8, CON: 3, MAG: 2, LCK: 4 },    // Hit strong, high luck, low HP\n  archmage: { STR: 1, DEX: 3, CON: 4, MAG: 12, LCK: 2 },  // Ultra high MAG\n  wizard: { STR: 2, DEX: 2, CON: 5, MAG: 11, LCK: 1 },    // High MAG\n  balanced: { STR: 5, DEX: 5, CON: 5, MAG: 5, LCK: 2 },   // Full random\n  // Todo : mimic (same as player but a bit better) (elemental orbs ?)\n}\n\nexport {\n  monsterProfiles,\n  monsterPics\n}","function getMonsterXp(specs, monsterItems) {\n  let itemsXp = 0\n  // eslint-disable-next-line no-unused-vars\n  for (let [key, value] of Object.entries(monsterItems)) { \n    itemsXp = itemsXp + value.score; \n  }\n\n  return Math.round((specs.STR + specs.DEX + specs.CON + specs.MAG + specs.LCK + itemsXp) / 4)\n}\n\nexport {\n    getMonsterXp\n}","import { gameSettings } from '../conf/settings'\nimport { monsterProfiles, monsterPics } from './monsterList'\nimport { getMonsterItems } from './getMonsterItems'\nimport { getMonsterWeapons } from './getMonsterWeapons'\nimport { getMonsterReward } from './getMonsterReward'\nimport { getMonsterXp } from './getMonsterXp'\nimport { getRandomInt, randomValue, generateWeight } from '../utils/utils'\n\nfunction monsterName(monsterData) {\n  return monsterData.name[Math.floor(Math.random() * monsterData.name.length)]\n}\n\nfunction monsterPic(type) {\n  // Try to find pic in pics array\n  if (monsterPics[type]) return monsterPics[type]\n  else return monsterPics[`mimic`]\n}\n\n// Check if current monster is elite level\nfunction monsterElite(monsterData) {\n  const eliteRate = monsterData.elite ? monsterData.elite : 0\n  return getRandomInt(1, 100) <= eliteRate\n}\n\nfunction monsterStats(monsterData, level, elite, loop=false) {\n  const { maxLevel, monsterCharPointsRange, monsterCharPointsRange_loop, eliteCharPointsRange, beastHealthBoostRange, manualCharBoostRange } = gameSettings\n\n  // Get points counts (base * level)\n  let points = loop \n    ? monsterCharPointsRange_loop[0] + Math.round(((monsterCharPointsRange_loop[1] - monsterCharPointsRange_loop[0]) / maxLevel) * level)\n    : monsterCharPointsRange[0] + Math.round(((monsterCharPointsRange[1] - monsterCharPointsRange[0]) / maxLevel) * level)\n  // Beasts have no items, so they have some bonus points\n  if (!monsterData.humanoid) points += level * 6\n  // Apply random elite bonus\n  if (elite) points += Math.round(points * getRandomInt(eliteCharPointsRange[0], eliteCharPointsRange[1]) / 100)\n\n  // Weight of points\n  let chars = []\n  let weights = []\n  let profile = monsterProfiles[monsterData.profile]\n\n  // Loops weights\n  for (let [key, value] of Object.entries(profile)) {\n    // LCK is not weighted\n    if (key !== `LCK`) {\n      chars.push(key)\n      weights.push(value)\n    }\n  }\n  const weighedPoints = generateWeight(chars, weights)\n\n  // Draw randomized stats\n  let monsterCHAR = []\n  monsterCHAR[`LCK`] = monsterProfiles[monsterData.profile].LCK\n  for (let index = 0; index < points; index++) {\n    // Draw a point\n    let draw = randomValue(weighedPoints)\n    if (monsterCHAR[draw]) monsterCHAR[draw]++\n    else monsterCHAR[draw] = 1\n  }\n\n  // Values are at least 1\n  if (!monsterCHAR[`STR`] || monsterCHAR[`STR`] === 0) monsterCHAR[`STR`] = 1\n  if (!monsterCHAR[`DEX`] || monsterCHAR[`DEX`] === 0) monsterCHAR[`DEX`] = 1\n  if (!monsterCHAR[`CON`] || monsterCHAR[`CON`] === 0) monsterCHAR[`CON`] = 1\n  if (!monsterCHAR[`MAG`] || monsterCHAR[`MAG`] === 0) monsterCHAR[`MAG`] = 1\n\n  // Apply optional boost\n  if (monsterData.boost) {\n    for (let index = 0; index < monsterData.boost.length; index++) {\n      monsterCHAR[monsterData.boost[index]] += Math.round(monsterCHAR[monsterData.boost[index]] * getRandomInt(manualCharBoostRange[0], manualCharBoostRange[1]) / 100)\n    }\n  }\n\n  // Compute HP\n  let hitPoints = monsterCHAR[`CON`] * 10\n  \n  // Beasts have a random HP boost\n  if (!monsterData.humanoid) hitPoints += Math.round(hitPoints * getRandomInt(beastHealthBoostRange[0], beastHealthBoostRange[1]) / 100)\n  const magicPoints = monsterCHAR[`MAG`] * 10 // Useless ATM\n\n  return {\n    STR: monsterCHAR[`STR`] ? monsterCHAR[`STR`] : 1,\n    DEX: monsterCHAR[`DEX`] ? monsterCHAR[`DEX`] : 1,\n    CON: monsterCHAR[`CON`] ? monsterCHAR[`CON`] : 1,\n    MAG: monsterCHAR[`MAG`] ? monsterCHAR[`MAG`] : 1,\n    LCK: monsterCHAR[`LCK`] ? monsterCHAR[`LCK`] : 1,\n    hitPoints: hitPoints,\n    maxHitPoints: hitPoints,\n    magicPoints: magicPoints,\n    maxMagicPoints: magicPoints,\n    items: monsterData.items,\n    weapons: monsterData.weapons,\n    humanoid: monsterData.humanoid\n  }\n}\n\nfunction monsterInfo(type, level, monsters, loop=false) {\n  const monsterData = monsters[type]\n  // console.log(monsterData)\n  const elite = loop ? true : monsterElite(monsterData)\n  const monsterSpecs = monsterStats(monsterData, level, elite, loop)\n  const monsterItems = getMonsterItems(monsterSpecs[`items`], loop ? gameSettings.maxLevel : level, monsterSpecs[`humanoid`], elite)\n  const monsterWeapons = getMonsterWeapons(monsterSpecs[`weapons`], loop ? gameSettings.maxLevel : level, monsterSpecs[`humanoid`], elite)\n  const monsterXp = getMonsterXp(monsterSpecs, monsterItems)\n\n  // Computing final HP\n  let CONItemBuff = monsterItems[`CON`] && monsterItems[`CON`].score ? monsterItems[`CON`].score * 10 : 0\n  let MAGItemBuff = monsterItems[`MAG`] && monsterItems[`MAG`].score ? monsterItems[`MAG`].score * 10 : 0\n\n  return {\n    name: monsterName(monsterData),\n    job: type,\n    xp: monsterXp,\n    reward: getMonsterReward(level, elite),\n    element: monsterData.element,\n    elite: elite,\n    humanoid: monsterData.humanoid ? true : false,\n    pic: monsterPic(type),\n    verticalPosition: monsterData.verticalPosition,\n    STR: monsterSpecs[`STR`],\n    DEX: monsterSpecs[`DEX`],\n    CON: monsterSpecs[`CON`],\n    MAG: monsterSpecs[`MAG`],\n    LCK: monsterSpecs[`LCK`],\n    fumble: monsterData.fumble,\n    hitPoints: monsterSpecs[`hitPoints`] + CONItemBuff,\n    maxHitPoints: monsterSpecs[`maxHitPoints`] + CONItemBuff,\n    magicPoints: monsterSpecs[`magicPoints`] + MAGItemBuff,\n    maxMagicPoints: monsterSpecs[`maxMagicPoints`] + MAGItemBuff,\n    items: monsterItems,\n    weapons: monsterWeapons\n  }\n}\n\nexport {\n  monsterInfo, monsterPic\n}","import { monsterInfo } from '../monsters/monster'\nimport { randomValue } from '../utils/utils'\nimport { gameSettings } from \"../conf/settings\"\n\nfunction getLevelInfo(level, monsterTiers, boss=false) {\n  let levelMonsters\n\n  // Tier switch\n  if (boss) {\n    levelMonsters = monsterTiers['boss-'+Math.ceil(level / (gameSettings.maxLevel / gameSettings.zones))]\n  } else {\n    levelMonsters = monsterTiers[Math.ceil(level / (gameSettings.maxLevel / gameSettings.zones))]\n  }\n\n  const levelInfo = {\n    monsters: levelMonsters\n  }\n\n  return levelInfo\n}\n\nfunction getMonsterFromLevel(level, monsterTiers, monsters, pastOpponents, boss, loop) {\n  const levelInfo = getLevelInfo(level, monsterTiers, boss)\n  // Remove alredy played monsters from array\n  let availableOpponents\n  if (pastOpponents) {\n    availableOpponents = levelInfo.monsters.filter(function (el) {\n      return pastOpponents.indexOf(el) < 0\n    })\n  } else {\n    availableOpponents = levelInfo.monsters\n  }\n\n  const monster = randomValue(availableOpponents)\n  \n  return monsterInfo(monster, level, monsters, loop)\n}\n\nexport {\n  getMonsterFromLevel\n}","import { gameSettings } from \"../conf/settings\"\nimport { getMonsterFromLevel } from '../monsters/getMonsterFromLevel'\n\nfunction getOpponentMap(monsters, monsterTiers, loop) {\n\n  let opponentMap = []\n  let pastOpponents = []\n\n  for (let level = 1; level <= gameSettings.maxLevel; level++) {\n    let levelMonster\n    // Boss\n    if ( level % 5 === 0 ) {\n      levelMonster = getMonsterFromLevel(level, monsterTiers, monsters, pastOpponents, true, loop)\n    } else {\n      levelMonster = getMonsterFromLevel(level, monsterTiers, monsters, pastOpponents, false, loop)\n    }\n    // Add to roadmap\n    opponentMap.push(levelMonster)\n    // Add monster to history\n    pastOpponents.push(levelMonster.job)\n  }\n\n  return opponentMap\n}\n\nexport {\n  getOpponentMap\n}","import { getOpponentMap } from '../../monsters/getOpponentMap'\n\n/**\n  * @desc Creating new game\n*/\n\nconst gameCreate = (data) => {\n  // Set game state\n  data.game.state = `gameCreate`\n\n  // Prepare opponent roadmap\n  const monsterTiers = data.monsterTiers\n  const monsters = data.monsters\n\n  data.game.opponentMap = getOpponentMap(monsters, monsterTiers, false)\n\n  return data\n}\n\nexport { gameCreate }\n","import { bestScore } from '../../actions/score/score'\nimport { gameSettings } from \"../../conf/settings\"\n\n/**\n  * @desc Displaying next level number\n*/\n\nconst levelTransition = (data) => {\n  // Initialize level if needed\n  if (typeof data.game.level !== 'number' || !data.game.level) data.game.level = 0\n  // Increment level \n  const previousLevel = data.game.level\n  data.game.level = previousLevel + 1\n  // Set game state\n  data.game.state = `levelTransition`\n\n  // TO BE REMOVED : temporary endgame fix for Thomas :)\n  if (data.game.level > gameSettings.maxLevel) data.game.level = gameSettings.maxLevel\n  // Prepare opponent data from level\n  data.opponent = data.game.opponentMap[data.game.level-1]\n\n  // Add monster to history\n  if (!data.game.pastOpponents) data.game.pastOpponents = [data.opponent.job]\n  else data.game.pastOpponents.push(data.opponent.job)\n\n  // Score\n  data = bestScore(data, `maxlevel`, `run`, previousLevel + 1)\n\n  return data\n}\n\nexport { levelTransition }\n","/**\n  * @desc Battle intro and monster presentation\n*/\n\nconst battleIntro = (data) => {\n  // Get initiative and playerTurn value\n  data.game.playerTurn = true\n  // Reset log\n  data.game.log = null\n\n  // Todo : Reset buffs\n  // Todo : Reset stamina, life and mana\n\n  // Rest hit UI\n  data.game.playerHit = false\n  data.game.opponentHit = false\n  \n  // Set game state\n  data.game.state = `battleIntro`\n  return data\n}\n\nexport { battleIntro }\n","import { gameSettings } from \"../conf/settings\"\n\nfunction formatDataLog(type, fightLog, game) {\n  let title, log, message, note, icon\n\n  let playerColor = game \n    ? game.playerTurn ? `white` : game.uicolor.vibrant\n    : null\n\n  let targetColor = game\n    ? !game.playerTurn ? `white` : game.uicolor.vibrant\n    : null\n\n  let playerDisplay = fightLog.activePlayer\n    ? `<span style=\"color:${playerColor}\">${fightLog.activePlayer.name}</span>`\n    : null\n  \n  let opponentDisplay = fightLog.targetPlayer\n    ? `<span style=\"color:${targetColor}\">${fightLog.targetPlayer.name}</span>`\n    : null\n\n  let attackResult, damage\n  // Special attacks\n  const reflectDisplay = (fightLog.data && fightLog.data.reflect) ? `<span class=\"reflect\">Reflected !</span>` : ``\n  const boostDisplay = (fightLog.data && fightLog.data.boost) ? `<span class=\"boost\">Boost !</span>` : ``\n\n  switch (type) {\n    case `battleStart`:\n      log = `Battle starts !`\n      icon = gameSettings.icons.battleStart\n      break;\n\n    case `skip`:\n      title = `Nothing!`\n      message = `Skip!`\n      note = `${playerDisplay} skips turn!`\n      log = `${playerDisplay} skips turn!`\n      icon = gameSettings.icons.skip\n      break;\n\n    case `block`:\n      title = `${playerDisplay} blocks!`\n      message = `<span class=\"up\">${fightLog.data.dexBonus}</span> DEX, <span class=\"up\">${fightLog.data.conBonus}</span> CON, <span class=\"up\">${fightLog.data.rageBonus}</span> rage`\n      note = `<span class=\"down\">${fightLog.data.magMalus}</span> MAG, ${opponentDisplay} <span class=\"up\">${fightLog.data.strBonus}</span> STR`\n      log = `${playerDisplay} ${message} ${note}`\n      icon = gameSettings.icons.block\n      break;\n\n    case `focus`:\n      title = `${playerDisplay} focus!`\n      message = `<span class=\"up\">${fightLog.data.magBonus}</span> MAG`\n      note = `<span class=\"down\">${fightLog.data.dexMalus}</span> DEX and <span class=\"down\">${fightLog.data.strMalus}</span> STR`\n      log = `${playerDisplay} focus! <span class=\"up\">${fightLog.data.magBonus}</span> MAG, <span class=\"down\">${fightLog.data.dexMalus}</span> DEX and <span class=\"down\">${fightLog.data.strMalus}</span> STR.`\n      icon = gameSettings.icons.focus\n      break;\n    \n    case `specialattack`:\n      log = `${playerDisplay} rage! <span class=\"up\">${fightLog.data.strBonus}</span> STR, <span class=\"up\">${fightLog.data.dexBonus}</span> DEX and <span class=\"up\">${fightLog.data.lckBonus}</span> LCK.`\n      icon = gameSettings.icons.specialattack\n      break;\n\n    case `specialcast`:\n      log = `${playerDisplay} mana flare! <span class=\"up\">${fightLog.data.magBonus}</span> MAG and <span class=\"up\">${fightLog.data.lckBonus}</span> LCK.`\n      icon = gameSettings.icons.specialcast\n      break;\n\n    case `attack`:\n      // Hit\n      attackResult = `Miss.`\n      if (fightLog.data.hit.hit) attackResult = `Hit!`\n      if (fightLog.data.hit.critical) attackResult = `<span class=\"critical\">Critical hit!</span>`\n      if (fightLog.data.hit.fumble) attackResult = `<span class=\"fumble\">Fumble!</span> ${opponentDisplay} gains LCK bonus.`\n\n      // Elemental hit\n      if (fightLog.data.damage && fightLog.data.damage.elemental > 0) {\n        // Find element of attacking weapon\n        let element = fightLog.activePlayer.weapons.STR.element\n        attackResult += `<span class=\"elementalDamageLog element_${element}\">${element} bonus : ${fightLog.data.damage.elemental}</span>`\n      }\n\n      // Damage\n      damage = ``\n\n      if (fightLog.data.damage && fightLog.data.damage.damage > 0) {\n        damage = `Damage : <span class=\"physicaldamage\">${fightLog.data.damage.damage}</span>`\n      } else {\n        if (fightLog.data.hit.hit) damage = `But no damage.`\n      }\n\n      title = `${playerDisplay} attacks!`\n      message = `${attackResult} ${reflectDisplay}${boostDisplay} ${damage}`\n      note = `To hit : ${fightLog.data.hit.toHit}`\n      log = `${playerDisplay} attacks! To hit : ${fightLog.data.hit.toHit} <span class=\"roll\">${fightLog.data.hit.roll}</span>${attackResult} ${reflectDisplay}${boostDisplay} ${damage}`\n      // Weapon icon\n      if (fightLog.activePlayer.weapons && fightLog.activePlayer.weapons.STR) icon = [fightLog.activePlayer.weapons.STR.type, fightLog.activePlayer.weapons.STR.id]\n      else icon = [`drops`, 18]\n      break;\n\n    case `cast`:\n      // Hit\n      attackResult = `Spell failed.`\n      if (fightLog.data.hit.hit) attackResult = `Success!`\n      if (fightLog.data.hit.critical) attackResult = `<span class=\"critical\">Perfect!</span>`\n      if (fightLog.data.hit.fumble) attackResult = `<span class=\"fumble\">Total failure!</span> ${opponentDisplay} gains LCK bonus.`\n\n      // Elemental hit\n      if (fightLog.data.damage && fightLog.data.damage.elemental > 0) {\n        // Find element of attacking weapon\n        let element = fightLog.activePlayer.weapons.MAG.element\n        attackResult += `<span class=\"elementalDamageLog element_${element}\">${element} bonus : ${fightLog.data.damage.elemental}</span>`\n      }\n\n      // Damage\n      damage = ``\n\n      if (fightLog.data.damage && fightLog.data.damage.damage > 0) {\n        damage = `Damage : <span class=\"magicaldamage\">${fightLog.data.damage.damage}</span>`\n      } else {\n        if (fightLog.data.hit.hit) damage = `But no damage.`\n      }\n      \n      title = `${playerDisplay} casts a spell!`\n      message = `${attackResult} ${reflectDisplay}${boostDisplay}<br />${damage}`\n      note = `To hit : ${fightLog.data.hit.toHit}`\n      log = `${playerDisplay} casts a spell! To hit : ${fightLog.data.hit.toHit} <span class=\"roll\">${fightLog.data.hit.roll}</span>${attackResult} ${reflectDisplay}${boostDisplay} ${damage}`\n      // Weapon icon\n      if (fightLog.activePlayer.weapons && fightLog.activePlayer.weapons.MAG) icon = [fightLog.activePlayer.weapons.MAG.type, fightLog.activePlayer.weapons.MAG.id]\n      else icon = [`drops`, 18]\n      break;\n\n    case `psyblast`:\n      // Hit\n      if (fightLog.data.hit === `success`) {\n        attackResult = `Success!`\n        damage = `${opponentDisplay} <span class=\"down\">${fightLog.data.magMalus}</span> MAG for 2 turns.`\n      }\n      if (fightLog.data.hit === `critical`) {\n        attackResult = `<span class=\"critical\">Mind blasted!</span>`\n        damage = `${opponentDisplay} <span class=\"down\">${fightLog.data.magMalus}</span> MAG for 2 turns.`\n      }\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `<span class=\"fumble\">Backfire!</span>`\n        damage = `${playerDisplay} <span class=\"down\">${fightLog.data.magMalus}</span> MAG for 2 turns.`\n      }\n\n      title = `${playerDisplay} uses psychic blast!`\n      message = `${attackResult}`\n      note = damage\n      log = `${playerDisplay} uses psychic blast! ${attackResult} ${damage}`\n      icon = gameSettings.icons.psyblast\n      break;\n\n    case `stun`:\n      // Hit\n      if (fightLog.data.hit === `success`) {\n        attackResult = `BAM!`\n        damage = `${opponentDisplay} is stunned, skip ${fightLog.data.rounds} turn and <span class=\"down\">${fightLog.data.dexMalus}</span> DEX for 3 turns.`\n      }\n      if (fightLog.data.hit === `critical`) {\n        attackResult = `<span class=\"critical\">Head shot!</span>`\n        damage = `${opponentDisplay} is knocked out, skip ${fightLog.data.rounds} turns and <span class=\"down\">${fightLog.data.dexMalus}</span> DEX for 4 turns.`\n      }\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `<span class=\"fumble\">Missed!</span>`\n        damage = `${playerDisplay} slips! <span class=\"down\">${fightLog.data.dexMalus}</span> DEX and <span class=\"down\">${fightLog.data.strMalus}</span>.`\n      }\n\n      title = `${playerDisplay} tries a stunning blast!`\n      message = `${attackResult}`\n      note = damage\n      log = `${title} ${attackResult} ${damage}`\n      icon = gameSettings.icons.stun\n      break;\n\n    case `itembreak`:\n      // Hit\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `<span class=\"fumble\">Missed!</span>`\n        damage = `${playerDisplay} slips! <span class=\"down\">${fightLog.data.dexMalus}</span> DEX. ${opponentDisplay} gains LCK bonus.`\n      } else {\n        attackResult = `Item broken!`\n        damage = `${opponentDisplay} loses an item.`\n      }\n\n      title = `${playerDisplay} tries to break enemy's item!`\n      message = `${attackResult}`\n      note = damage\n      log = `${title} ${attackResult} ${damage}`\n      icon = gameSettings.icons.itembreak\n      break;\n\n    case `heal`:\n      // Hit\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `<span class=\"fumble\">Oh no!</span>`\n        damage = `It's empty! <span class=\"up\">${fightLog.data.fumbleMalus}</span> fumble rate for 2 turns.`\n      } else {\n        attackResult = `${fightLog.data.healCapacity} health recovery!`\n        damage = `${playerDisplay} recovers ${fightLog.data.healValue} HP.`\n      }\n\n      title = `${playerDisplay} uses a potion!`\n      message = `${attackResult}`\n      note = damage\n      log = `${title} ${attackResult} ${damage}`\n      icon = gameSettings.icons.heal\n      break;\n\n    case `quickheal`:\n      // Hit\n      attackResult = `${fightLog.data.healValue} health recovery!`\n      damage = `${playerDisplay}&nbsp;recovers&nbsp;${fightLog.data.healValue} HP.`\n\n      title = `${playerDisplay} uses healing item!`\n      message = `${attackResult}`\n      note = damage\n      log = `${title} ${attackResult} ${damage}`\n      icon = fightLog.data.icon\n      break;\n\n    case `upgrade`:\n      // Hit\n      attackResult = `${fightLog.data.buffChar} boost!`\n      damage = `<span class=\"up\">${fightLog.data.buffValue}</span> ${fightLog.data.buffChar}`\n\n      title = `${playerDisplay} uses boost item!`\n      message = damage\n      note = `${fightLog.data.buffType} boost`\n      log = `${title} ${damage} (${note})`\n      icon = fightLog.data.icon\n      break;\n\n    case `restore`:\n      // Hit\n      attackResult = `Energy restore!`\n      damage = `Fully restored!`\n\n      title = `${playerDisplay} restores energy!`\n      message = damage\n      note = `Stamina, mana and skills energy restored.`\n      log = `${title} ${note}`\n      icon = fightLog.data.icon\n      break;\n\n    case `damage`:\n      // Hit\n      attackResult = `Weapon throw!`\n      damage = `${fightLog.data.damage} damage!`\n\n      title = `${playerDisplay} throws weapon!`\n      message = damage\n      note = ``\n      log = `${title} ${damage}`\n      icon = fightLog.data.icon\n      break;\n\n    case `sharpen`:\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `This did not work`\n        damage = `No effect.`\n        note = `Weapon has not changed.`\n      } else {\n        attackResult = `Weapon enhanced!`\n        damage = `<span class=\"up\">1D</span> damage!`\n        if (fightLog.data.element) note = `New elemental bonus <span class=\"elementWrapper ${fightLog.data.element}\" /> `\n      }\n\n      // Hit\n      title = `${playerDisplay} sharpens a weapon!`\n      message = damage\n      log = `${title} ${damage} ${note}`\n      icon = fightLog.data.icon\n      break;\n\n    case `curse`:\n      // Hit\n      if (fightLog.data.hit === `success`) {\n        attackResult = `Curse!`\n        damage = `${opponentDisplay} <span class=\"up\">${fightLog.data.fumbleMalus}</span> fumble rate for 2 turns.`\n      }\n      if (fightLog.data.hit === `critical`) {\n        attackResult = `<span class=\"critical\">Evil curse!</span>`\n        damage = `${opponentDisplay} <span class=\"up\">${fightLog.data.fumbleMalus}</span> fumble rate for 2 turns.`\n      }\n      if (fightLog.data.hit === `fumble`) {\n        attackResult = `<span class=\"fumble\">Bad luck!</span>`\n        damage = `${playerDisplay} <span class=\"up\">${fightLog.data.fumbleMalus}</span> fumble rate for 1 turn.`\n      }\n\n      title = `${playerDisplay} uses evil eye!`\n      message = `${attackResult}`\n      note = damage\n      log = `${playerDisplay} uses evil eye! ${attackResult} ${damage}`\n      icon = gameSettings.icons.curse\n      break;\n\n    case `reflect`:\n      // Hit\n      if (fightLog.data.reflect === `miss`) {\n        attackResult = `<span class=\"fumble\">Missed!</span>`\n        damage = `Spell has no effect !`\n      } else if (fightLog.data.reflect === `success`) {\n        attackResult = `Success!`\n        damage = `${opponentDisplay}'s next attack will be reflected!`\n      } else {\n        attackResult = `Disaster!`\n        damage = `${opponentDisplay}'s next attack will amplified!`\n      }\n\n      title = `${playerDisplay} uses reflect spell!`\n      message = `${attackResult}`\n      note = damage\n      log = `${title} ${attackResult} ${damage}`\n      icon = gameSettings.icons.reflect\n      break;\n\n    default:\n      break;\n  }\n\n  return {\n    type,\n    title,\n    message, \n    note,\n    log,\n    icon\n  }\n}\n\nexport {\n  formatDataLog\n}","import { formatDataLog } from '../../utils/formatDataLog'\nimport { forceScore, pushScore } from '../../actions/score/score'\n\n/**\n  * @desc Starting a new battle\n*/\n\nconst startBattle = (data) => {\n  // Reset log\n  data.log = {} // was {type: `battleStart`}\n  // Set dataLog to battleStart\n  data.dataLogs = []\n  data.dataLogs.push(formatDataLog(`battleStart`, data.log, data.game))\n  // Set game state\n  data.game.state = `battle`\n\n  // Score\n  data = forceScore(data, `battles/total`, `game`)\n  data = forceScore(data, `opponents/${data.opponent.job}/total`, `alltime`)\n  data = pushScore(data, `history`, `onlyrun`, [data.opponent.job, data.opponent.name, data.opponent.elite])\n\n  return data\n}\n\nexport { startBattle }\n","import { forceScore } from '../../actions/score/score'\nimport { gameSettings } from \"../../conf/settings\"\n\n/**\n  * @desc Victory is yours\n*/\n\nconst victory = (data) => {\n  // Get reward\n  data.player.gold += data.opponent.reward\n  // Win XP\n  data.player.xp += data.opponent.xp\n\n  // Score\n  data = forceScore(data, `shop/gold/won`, `alltime`, data.opponent.reward)\n  data = forceScore(data, `battles/victories`, `game`)\n  data = forceScore(data, `opponents/${data.opponent.job}/victories`, `alltime`)\n\n  // Loot screen or endgame\n  if (data.game.level === gameSettings.maxLevel) {\n    data.game.state = `endgame`\n  } else {\n    data.game.state = `victory`\n  }\n\n  return data\n}\n\nexport { victory }\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Defeat, selecting legacy items\n*/\n\nconst defeat = (data) => {\n\n  // Set game state \n  data.game.state = `defeat`\n\n  // Score\n  data = forceScore(data, `battles/defeats`, `game`)\n  data = forceScore(data, `opponents/${data.opponent.job}/defeats`, `alltime`)\n\n  return data\n}\n\nexport { defeat }\n","import { forceScore } from '../../actions/score/score'\n\n/**\n  * @desc Permadeath, game ended\n*/\n\nconst permadeath = (data) => {\n\n  // Set game state \n  data.game.state = `permadeath`\n\n  // Score\n  data = forceScore(data, `permadeath`, `alltime`)\n\n  return data\n}\n\nexport { permadeath }\n","\n/**\n  * @desc Resetting game to title screen\n  * @todo Reset most of the store to initial state\n*/\n\nconst hallOfFame = (data) => {\n  // Set game state\n  data.game.state = `hallOfFame`\n\n  return data\n}\n\nexport { hallOfFame }\n","import { initialState } from '../../conf/settings'\n\n/**\n  * @desc Resetting game, then display HOF\n*/\n\nconst resetThenHallOfFame = (data) => {\n\n  // Reset everything\n  data.game = initialState.game\n  data.player = {}\n  data.opponent = {}\n  data.log = {}\n  data.dataLogs = {}\n  data.score.run = {}\n  data.score.game = {}\n  \n  // Set game state\n  data.game.previousState = `permadeath`\n  data.game.state = `hallOfFame`\n\n  return data\n}\n\nexport { resetThenHallOfFame }\n","import { forceScore } from '../../actions/score/score'\nimport { getOpponentMap } from '../../monsters/getOpponentMap'\n\n/**\n  * @desc Enters permadeath loop\n*/\n\nconst nextLoop = (data) => {\n\n  // Set game state \n  data.game.state = `nextLoop`\n\n  // Setting a loop counter (maybe multiple loops one day...)\n  if (data.game.loop) data.game.loop = data.game.loop + 1\n  else data.game.loop = 1\n\n  // Reset run\n  data.opponent = {}\n  data.log = {}\n  data.dataLogs = {}\n  data.score.run = {}\n  data.game.level = 0\n  data.game.pastOpponents = []\n\n  // Prepare opponent roadmap\n  const monsterTiers = data.monsterTiers\n  const monsters = data.monsters\n  data.game.opponentMap = getOpponentMap(monsters, monsterTiers, true)\n\n  // Score\n  data = forceScore(data, `loops`, `alltime`)\n\n  return data\n}\n\nexport { nextLoop }\n","/**\n  * @desc Opening shop\n*/\n\nconst openShop = (data) => {\n\n  // Set game state\n  data.game.state = `shop`\n\n  return data\n}\n\nexport { openShop }\n","\n/**\n  * @desc Starting a new battle\n*/\n\nconst logsToPlayerTurn = (data) => {\n  // Set log to playerTurn\n  // data.log = { type: `playerTurn` }\n  data.log = {}\n\n  return data\n}\n\nexport { logsToPlayerTurn }\n","// Rage management\nconst rage = (type, player, value) => {\n  let rage \n  if (type === `attack`) {\n    rage = (player.physicalRage + value > player.maxPhysicalRage) ? player.maxPhysicalRage : player.physicalRage + value\n  }\n  if (type === `cast`) {\n    rage = (player.magicalRage + value > player.maxMagicalRage) ? player.maxMagicalRage : player.magicalRage + value\n  }\n\n  return rage\n}\n\nconst resetRage = (type, player) => {\n  if (type === `physical`) {\n    player.physicalRage = 0\n  }\n  if (type === `magical`) {\n    player.magicalRage = 0\n  }\n\n  return player\n}\n\nexport {\n  rage, \n  resetRage\n}","import { diceRoll, getRandomInt, randomValue } from '../../utils/utils'\nimport { getStat } from './stats'\nimport rpgDice from \"rpgdicejs\"\n\nconst toHit = (activePlayer, targetPlayer, type) => {\n  const critChance = criticalChance(activePlayer)\n  const fumbChance = fumbleChance(activePlayer)\n  let hitChance\n\n  if (type === `physical`) {\n    // Get DEX from both players\n    const activePlayerDEX = getStat(activePlayer, `DEX`)\n    const targetPlayerDEX = getStat(targetPlayer, `DEX`)\n    hitChance = 20 - (10 + activePlayerDEX.total - targetPlayerDEX.total)\n  }\n\n  if (type === `magical`) {\n    // Get MAG from both players\n    const activePlayerMAG = getStat(activePlayer, `MAG`)\n    const targetPlayerMAG = getStat(targetPlayer, `MAG`)\n    hitChance = 20 - (10 + activePlayerMAG.total - targetPlayerMAG.total)\n  }\n\n  // hitChance can never be 0, always LCK hitChance\n  if (hitChance > critChance) hitChance = critChance\n  // hitChance can never be negative, always fumble chance\n  if (hitChance < fumbChance) hitChance = fumbChance\n\n  return hitChance\n}\n\n// Turns D20 to hit into classic %\nconst hitChance = (toHit) => {\n  return (20 - toHit) * 5\n}\n\n// Physical hit chance\n// @todo : merge both\nconst physicalHit = (activePlayer, targetPlayer) => {\n  const roll = diceRoll(20)\n  let hit = roll >= toHit(activePlayer, targetPlayer, `physical`)\n  const critical = roll >= criticalChance(activePlayer)\n  const fumble = roll <= fumbleChance(activePlayer)\n\n  // Fixing \"always hit\" bug fur super high scores\n  if (fumble) hit = false\n\n  return {\n    roll,\n    toHit: toHit(activePlayer, targetPlayer, `physical`),\n    hit,\n    critical,\n    fumble\n  }\n}\n\n// Magical hit chance\n// @todo : merge both\nconst magicalHit = (activePlayer, targetPlayer) => {\n  const roll = diceRoll(20)\n  let hit = roll >= toHit(activePlayer, targetPlayer, `magical`)\n  const critical = roll >= criticalChance(activePlayer)\n  const fumble = roll <= fumbleChance(activePlayer)\n\n  // Fixing \"always hit\" bug fur super high scores\n  if (fumble) hit = false\n\n  return {\n    roll,\n    toHit: toHit(activePlayer, targetPlayer, `magical`),\n    hit,\n    critical,\n    fumble\n  }\n}\n\n// Elemental fight rules\nconst elementalRules = (a,b) => {\n  let bonus\n\n  if (a === `fire`) {\n    if (b === `fire`) bonus = false\n    if (b === `water`) bonus = false\n    if (b === `earth`) bonus = true\n  }\n  else if (a === `water`) {\n    if (b === `fire`) bonus = true\n    if (b === `water`) bonus = false\n    if (b === `earth`) bonus = false\n  }\n  else if (a === `earth`) {\n    if (b === `fire`) bonus = false\n    if (b === `water`) bonus = true\n    if (b === `earth`) bonus = false\n  } \n  // Lights only crits against darkness\n  else if (a === `light`) {\n    if (b === `darkness`) bonus = true\n    else bonus = false\n  }\n  // Darkness crits against all, at random\n  else if (a === `darkness`) {\n    let roll = randomValue([1,2,3])\n    if (roll === 1) bonus = true\n    else bonus = false\n  }\n  return bonus\n}\n\n// Elemental damage bonus\nconst elementalDamage = (activePlayer, targetPlayer, CHAR, damage) => {\n  // If activePlayer has item\n  const weaponElement = activePlayer.weapons[CHAR].element\n  // If targetPlayer has base element\n  const targetElement = targetPlayer.element\n  // If element has ascendant\n  if (weaponElement && targetElement) {\n    if (elementalRules(weaponElement, targetElement)) {\n      return Math.round(damage*50/100)\n    } else return false\n  } else return false\n}\n\n// Critical chance\nconst criticalChance = (activePlayer) => {\n  const playerLuck = getStat(activePlayer, `LCK`)\n  \n  return 20 - playerLuck.total\n}\n\n// Fumble chance\nconst fumbleChance = (activePlayer) => {\n  const playerFumble = getStat(activePlayer, `fumble`)\n\n  return playerFumble.total\n}\n\n// Physical damage count\nconst physicalDamage = (activePlayer, targetPlayer, critical) => {\n  // Item bonus / item malus\n  const activePlayerSTR = getStat(activePlayer, `STR`)\n  const targetPlayerCON = getStat(targetPlayer, `CON`)\n  // Weapon\n  const activePlayerItem = activePlayer.weapons.STR ? activePlayer.weapons.STR.score : false\n\n  // Item damage\n  let itemDamage = 0 \n  let itemDamageResults = 0\n  let elementalBonus = 0\n\n  let baseDamage = activePlayerSTR.total - targetPlayerCON.total\n  // Negative damage fix\n  if (baseDamage < 0) baseDamage = 0\n\n  if (activePlayerItem) {\n    let itemDamageRoll = rpgDice.eval(activePlayerItem)\n    itemDamageResults = itemDamageRoll.render()\n    itemDamage = itemDamageRoll.value\n    elementalBonus = elementalDamage(activePlayer, targetPlayer, `STR`, baseDamage+itemDamage)\n  }\n\n  // Critical hit bonus, @TBT : ignores opponent CON + double STR\n  let criticalBonus = critical ? activePlayerSTR.total + targetPlayerCON.total : 0\n\n  let damage = baseDamage + itemDamage + criticalBonus + elementalBonus\n  if (damage < 0) damage = 0\n\n  // console.log(`baseDamage`, baseDamage)\n  // console.log(`itemDamage`, itemDamage)\n  // console.log(`criticalBonus`, criticalBonus)\n  // console.log(`elementalBonus`, elementalBonus)\n  // console.log(`damage`, damage)\n  \n  return {\n    roll: itemDamageResults,\n    base: baseDamage,\n    item: itemDamage,\n    critical: criticalBonus,\n    elemental: elementalBonus,\n    damage: damage\n  }\n}\n\n// Magical damage count\nconst magicalDamage = (activePlayer, targetPlayer, critical) => {\n  // Item bonus / item malus\n  const activePlayerMAG = getStat(activePlayer, `MAG`)\n  const targetPlayerMAG = getStat(targetPlayer, `MAG`)\n  // Weapon\n  const activePlayerItem = activePlayer.weapons.MAG ? activePlayer.weapons.MAG.score : false\n\n  // Item damage\n  let itemDamage = 0\n  let itemDamageResults = 0\n  let elementalBonus = 0\n\n  let baseDamage = activePlayerMAG.total - targetPlayerMAG.total\n  // Negative damage fix\n  if (baseDamage < 0) baseDamage = 0\n\n  if (activePlayerItem) {\n    let itemDamageRoll = rpgDice.eval(activePlayerItem)\n    itemDamageResults = itemDamageRoll.render()\n    itemDamage = itemDamageRoll.value\n    elementalBonus = elementalDamage(activePlayer, targetPlayer, `MAG`, baseDamage+itemDamage)\n  }\n\n  // Critical hit bonus, @TBT : ignores opponent MAG + double MAG\n  let criticalBonus = critical ? activePlayerMAG.total + targetPlayerMAG.total : 0\n\n  let damage = baseDamage + itemDamage + criticalBonus + elementalBonus\n  if (damage < 0) damage = 0\n\n  // console.log(`baseDamage`, baseDamage)\n  // console.log(`itemDamage`, itemDamage)\n  // console.log(`criticalBonus`, criticalBonus)\n  // console.log(`elementalBonus`, elementalBonus)\n  // console.log(`damage`, damage)\n\n  return {\n    roll: itemDamageResults,\n    base: baseDamage,\n    item: itemDamage,\n    critical: criticalBonus,\n    elemental: elementalBonus,\n    damage: damage\n  }\n}\n\n// Set hit state for UI display\nconst displayHits = (prevState, nextState) => {\n  nextState.game.playerHit = prevState.player.hitPoints > nextState.player.hitPoints\n  nextState.game.opponentHit = prevState.opponent.hitPoints > nextState.opponent.hitPoints\n  return nextState\n}\n\n// Roll dice on the skill wheel\nconst skillWheelRoll = (items) => {\n  // roll d8\n  const roll = getRandomInt(0,7)\n  let positions, wheelVariations\n\n  // Wheel with prizes\n  if (items) {\n    positions = [items[0], items[1], items[2], `fumble`, items[3], items[4], items[5], `fumble`]\n    // return value and position\n    return {\n      result: positions[roll],\n      positions: positions,\n      position: roll\n    }\n  } \n  // Wheel with skill\n  else {\n    positions = [`success`, `critical`, `success`, `fumble`, `success`, `fumble`, `success`, `critical` ]\n    wheelVariations = {\n      success: [0,2,4,6],\n      critical: [1,7],\n      fumble: [3,5]\n    }\n    // return value and position\n    return {\n      result: positions[roll],\n      positions: positions,\n      position: randomValue(wheelVariations[positions[roll]])\n    }\n  }\n}\n\nexport {\n  toHit,\n  hitChance,\n  physicalHit, \n  magicalHit,\n  physicalDamage,\n  magicalDamage,\n  criticalChance,\n  fumbleChance,\n  displayHits,\n  skillWheelRoll\n}","import { rage } from './rage'\nimport { physicalHit, physicalDamage } from './hit'\nimport { pushBuff } from './stats'\nimport { energyBurn } from './energy'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { findBuff } from '../../actions/combat/stats'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the basic physical attack results\n*/\n\nconst attack = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  let damageResult, rageResult, displayEffect\n\n  // Hit ?\n  const hitResult = physicalHit(activePlayer, targetPlayer)\n\n  // Amount of stamina burned by item/attack\n  let staminaburnResult = activePlayer.weapons.STR ? activePlayer.weapons.STR.cost : 0\n  // Applying stamina burn\n  activePlayer = energyBurn(activePlayer, staminaburnResult, `physical`)\n\n  /* Compute damages */\n\n  // Special effects\n  const reflect = findBuff(activePlayer, `temporary`, `reflect`) > 0\n  const boost = findBuff(activePlayer, `temporary`, `boost`) > 0\n\n  if (reflect) displayEffect = \"reflectEffect\"\n  if (boost) displayEffect = \"boostEffect\"\n\n  // Critical hit\n  if (hitResult.hit && hitResult.critical) {\n    damageResult = physicalDamage(activePlayer, targetPlayer, true)\n    rageResult = rage(`attack`, targetPlayer, damageResult.damage)\n\n    // Applying damage\n    if (boost) damageResult.damage = Math.round(damageResult.damage * 1.5)\n\n    if (reflect) {\n      activePlayer.hitPoints -= damageResult.damage\n      if (activePlayer.hitPoints < 0) activePlayer.hitPoints = 0\n    }\n    else {\n      targetPlayer.hitPoints -= damageResult.damage\n      if (targetPlayer.hitPoints < 0) targetPlayer.hitPoints = 0\n      // Applying rage\n      targetPlayer.physicalRage = rageResult\n    }\n    // Score\n    data = score(data, `action/attack/critical`, `game`)\n    data = score(data, `action/attack/damage`, `game`, damageResult.damage)\n    data = score(data, `damage`, `game`, damageResult.damage)\n  }\n  // Normal hit\n  else if (hitResult.hit && !hitResult.critical) {\n    damageResult = physicalDamage(activePlayer, targetPlayer, false)\n    rageResult = rage(`attack`, targetPlayer, damageResult.damage)\n\n    // Applying damage\n    if (boost) damageResult.damage = Math.round(damageResult.damage * 1.5)\n\n    if (reflect) {\n      activePlayer.hitPoints -= damageResult.damage\n      if (activePlayer.hitPoints < 0) activePlayer.hitPoints = 0\n    }\n    else {\n      targetPlayer.hitPoints -= damageResult.damage\n      if (targetPlayer.hitPoints < 0) targetPlayer.hitPoints = 0\n      // Applying rage\n      targetPlayer.physicalRage = rageResult\n    }\n\n    // Score\n    data = score(data, `action/attack/hit`, `game`)\n    data = score(data, `action/attack/damage`, `game`, damageResult.damage)\n    data = score(data, `damage`, `game`, damageResult.damage)\n  }\n  // Fumble miss\n  else if (!hitResult.hit && hitResult.fumble) {\n    // Give LCK bonus to opponent \n    pushBuff(targetPlayer, `temporary`, `LCK`, 1, `attackfumble`, 5)\n    // Reset rage because of the fumble\n    activePlayer.physicalRage = 0\n    // Score\n    data = score(data, `action/attack/fumble`, `game`)\n  }\n  // Miss\n  else if (!hitResult.hit && !hitResult.fumble) {\n    // Score\n    data = score(data, `action/attack/miss`, `game`)\n  }\n\n  // Score\n  data = score(data, `action/attack/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `attack`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hitResult,\n      critical: false,\n      reflect: reflect,\n      boost: boost,\n      displayEffect: displayEffect,\n      damage: damageResult\n    }\n  }\n  log.display = formatDataLog(`attack`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`attack`, log, game))\n\n  return data \n}\n\nexport { attack }\n","import { pushBuff } from './stats'\nimport { energyRestore } from './energy'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { rage } from './rage'\nimport { score } from '../../actions/score/score'\nimport { getStat } from './stats'\n\n/**\n  * @desc Computing the basic physical attack results\n*/\n\nconst block = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  // Defends gives temporary DEX and CON bonus but opponent will strike harder and MAG is reduced\n  const activePlayerDEX = getStat(activePlayer, `DEX`)\n  const activePlayerCON = getStat(activePlayer, `CON`)\n  const activePlayerMAG = getStat(activePlayer, `MAG`)\n  const targetPlayerSTR = getStat(targetPlayer, `STR`)\n  // Computing bonus \n  const DEXbonus = Math.ceil(activePlayerDEX.total / 2)\n  const CONbonus = activePlayerCON.total\n  const MAGmalus = -Math.ceil(activePlayerMAG.total / 2)\n  const STRbonus = Math.ceil(targetPlayerSTR.total / 2)\n  // Applying buffs\n  pushBuff(activePlayer, `temporary`, `DEX`, DEXbonus, `block`)\n  pushBuff(activePlayer, `temporary`, `CON`, CONbonus, `block`)\n  pushBuff(activePlayer, `temporary`, `MAG`, MAGmalus, `block`)\n  pushBuff(targetPlayer, `temporary`, `STR`, STRbonus, `defending`)\n  // Defends restores CON stamina\n  activePlayer = energyRestore(activePlayer, activePlayer.CON, `stamina`)\n\n  // Applying rage\n  let rageBonus = activePlayer.CON\n  let rageResult = rage(`attack`, activePlayer, rageBonus)\n  activePlayer.physicalRage = rageResult\n\n  // Score\n  data = score(data, `action/block/total`, `game`)\n\n  // Build logs\n  let log = {\n    type: `block`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      dexBonus: DEXbonus,\n      conBonus: CONbonus,\n      magMalus: MAGmalus,\n      strBonus: STRbonus,\n      rageBonus: rageBonus\n    }\n  }\n  log.display = formatDataLog(`block`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`block`, log, game))\n\n  return data \n}\n\nexport { block }\n","import { resetRage } from './rage'\nimport { pushBuff } from './stats'\nimport { attack } from './attack'\nimport { getStat } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the special physical attack results\n*/\n\nconst specialattack = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n\n  // Push DEX and STR buff for next attack\n  const activePlayerDEX = getStat(activePlayer, `DEX`)\n  const activePlayerSTR = getStat(activePlayer, `STR`)\n  const activePlayerLCK = getStat(activePlayer, `LCK`)\n  const strBonus = activePlayerSTR.natural\n  const dexBonus = activePlayerDEX.natural\n  const lckBonus = activePlayerLCK.natural\n  pushBuff(activePlayer, `temporary`, `STR`, strBonus, `specialattack`)\n  pushBuff(activePlayer, `temporary`, `DEX`, dexBonus, `specialattack`)\n  pushBuff(activePlayer, `temporary`, `LCK`, lckBonus, `specialattack`)\n  // Reset rage\n  activePlayer = resetRage(`physical`, activePlayer)\n  // Update data\n  data.player = activePlayer\n\n  // Score\n  data = score(data, `action/specialattack/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `specialattack`,\n    activePlayer,\n    data: {\n      strBonus,\n      dexBonus,\n      lckBonus\n    }\n  }\n\n  // Logs\n  data.dataLogs.push(formatDataLog(`specialattack`, log, game))\n\n  // Returns updated physical attack\n  return attack(data)\n}\n\nexport { specialattack }\n","import { magicalHit, magicalDamage } from './hit'\nimport { rage } from './rage'\nimport { energyBurn } from './energy'\nimport { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { findBuff } from '../../actions/combat/stats'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the basic magical attack results\n*/\n\nconst cast = (data, manaResest = false) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  let damageResult, rageResult, rageResultDamage, displayEffect\n\n  // Hit ?\n  const hitResult = magicalHit(activePlayer, targetPlayer)\n\n  // Amount of mana burned by item/attack\n  let manaburnResult = activePlayer.weapons.MAG ? activePlayer.weapons.MAG.cost : 0\n  // Applying rage & mana burn to player\n  rageResult = rage(`cast`, activePlayer, manaburnResult)\n  activePlayer.magicalRage = rageResult\n  activePlayer = energyBurn(activePlayer, manaburnResult, `magical`)\n\n  /* Compute damages */\n\n  // Special effects\n  const reflect = findBuff(activePlayer, `temporary`, `reflect`) > 0\n  const boost = findBuff(activePlayer, `temporary`, `boost`) > 0\n\n  if (reflect) displayEffect = \"reflectEffect\"\n  if (boost) displayEffect = \"boostEffect\"\n\n  // Critical hit\n  if (hitResult.hit && hitResult.critical) {\n    damageResult = magicalDamage(activePlayer, targetPlayer, true)\n\n    // Applying damage\n    if (boost) damageResult.damage = Math.round(damageResult.damage * 1.5)\n\n    if (reflect) {\n      activePlayer.hitPoints -= damageResult.damage\n      if (activePlayer.hitPoints < 0) activePlayer.hitPoints = 0\n    }\n    else {\n      targetPlayer.hitPoints -= damageResult.damage\n      if (targetPlayer.hitPoints < 0) targetPlayer.hitPoints = 0\n      // Applying physical rage to target player\n      rageResultDamage = rage(`attack`, targetPlayer, damageResult.damage)\n      targetPlayer.physicalRage = rageResultDamage\n    }\n    // Score\n    data = score(data, `action/cast/critical`, `game`)\n    data = score(data, `action/cast/damage`, `game`, damageResult.damage)\n    data = score(data, `damage`, `game`, damageResult.damage)\n  }\n  // Normal hit\n  else if (hitResult.hit && !hitResult.critical) {\n    damageResult = magicalDamage(activePlayer, targetPlayer, false)\n    \n    // Applying damage\n    if (boost) damageResult.damage = Math.round(damageResult.damage * 1.5)\n\n    if (reflect) {\n      activePlayer.hitPoints -= damageResult.damage\n      if (activePlayer.hitPoints < 0) activePlayer.hitPoints = 0\n    }\n    else {\n      targetPlayer.hitPoints -= damageResult.damage\n      if (targetPlayer.hitPoints < 0) targetPlayer.hitPoints = 0\n      // Applying physical rage to target player\n      rageResultDamage = rage(`attack`, targetPlayer, damageResult.damage)\n      targetPlayer.physicalRage = rageResultDamage\n    }\n\n    // Score\n    data = score(data, `action/cast/hit`, `game`)\n    data = score(data, `action/cast/damage`, `game`, damageResult.damage)\n    data = score(data, `damage`, `game`, damageResult.damage)\n  }\n  // Fumble miss\n  else if (!hitResult.hit && hitResult.fumble) {\n    // Give LCK bonus to opponent \n    pushBuff(targetPlayer, `temporary`, `LCK`, 1, `castfumble`, 5)\n    // Reset rage because of the fumble\n    activePlayer.magicalRage = 0\n    // Score\n    data = score(data, `action/cast/fumble`, `game`)\n  }\n  // Miss\n  else if (!hitResult.hit && !hitResult.fumble) {\n    // Score\n    data = score(data, `action/cast/miss`, `game`)\n  }\n\n  // Reset rage because of the special cast\n  if (manaResest) activePlayer.magicalRage = 0\n\n  // Score\n  data = score(data, `action/cast/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `cast`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hitResult,\n      reflect: reflect,\n      boost: boost,\n      displayEffect: displayEffect,\n      damage: damageResult\n    }\n  }\n  log.display = formatDataLog(`cast`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`cast`, log, game))\n\n  return data \n}\n\nexport { cast }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { score } from '../../actions/score/score'\nimport { getStat } from './stats'\n\n/**\n  * @desc Computing the results of magical defense\n*/\n\nconst focus = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  // Defends gives temporary MAGx2, lasts 2 turns, but decreases DEX and STR by half\n  const activePlayerMAG = getStat(activePlayer, `MAG`)\n  const activePlayerDEX = getStat(activePlayer, `DEX`)\n  const targetPlayerSTR = getStat(targetPlayer, `STR`)\n  // Computing bonus \n  const MAGbonus = Math.ceil(activePlayerMAG.total)\n  const DEXmalus = -Math.abs(Math.ceil(activePlayerDEX.total / 2))\n  const STRmalus = -Math.abs(Math.ceil(targetPlayerSTR.total / 2))\n  // Applying buffs\n  pushBuff(activePlayer, `temporary`, `DEX`, DEXmalus, `focus`, 2)\n  pushBuff(activePlayer, `temporary`, `STR`, STRmalus, `focus`, 2)\n  pushBuff(activePlayer, `temporary`, `MAG`, MAGbonus, `focus`, 2)\n\n  // Score\n  data = score(data, `action/focus/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `focus`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      dexMalus: DEXmalus,\n      strMalus: STRmalus,\n      magBonus: MAGbonus\n    }\n  }\n  log.display = formatDataLog(`focus`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`focus`, log, game))\n\n  return data \n}\n\nexport { focus }\n","import { resetRage } from './rage'\nimport { pushBuff } from './stats'\nimport { cast } from './cast'\nimport { getStat } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the special magical attack results\n*/\n\nconst specialcast = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n\n  // Push DEX and STR buff for next attack\n  const activePlayerMAG = getStat(activePlayer, `MAG`)\n  const activePlayerLCK = getStat(activePlayer, `LCK`)\n  const magBonus = activePlayerMAG.natural\n  const lckBonus = activePlayerLCK.natural\n  pushBuff(activePlayer, `temporary`, `MAG`, magBonus, `specialcast`)\n  pushBuff(activePlayer, `temporary`, `LCK`, lckBonus, `specialcast`)\n  // Reset rage\n  activePlayer = resetRage(`magical`, activePlayer)\n  // Update data\n  data.player = activePlayer\n\n  // Score\n  data = score(data, `action/specialcast/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `specialcast`,\n    activePlayer,\n    data: {\n      magBonus,\n      lckBonus\n    }\n  }\n\n  // Logs\n  data.dataLogs.push(formatDataLog(`specialcast`, log, game))\n\n  // Returns updated magical attack\n  return cast(data, true)\n}\n\nexport { specialcast }\n","import { formatDataLog } from '../../utils/formatDataLog'\n\n/**\n  * @desc Skipping turn\n*/\n\nconst skip = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  // Skip\n\n  // Build logs\n  let log = {\n    type: `skip`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {}\n  }\n  log.display = formatDataLog(`skip`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`skip`, log, game))\n\n  return data \n}\n\nexport { skip }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { score } from '../../actions/score/score'\nimport { getStat } from './stats'\n\n/**\n  * @desc Computing the results of stun skill\n*/\n\nconst stun = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Stun can make opponent skip a fex turns\n  const hit = skillWheelRoll()\n  let DEXmalus, STRmalus, rounds\n  const activePlayerDEX = getStat(activePlayer, `DEX`)\n  const activePlayerSTR = getStat(activePlayer, `STR`)\n  const targetPlayerDEX = getStat(targetPlayer, `DEX`)\n\n  switch (hit.result) {\n    case `success`:\n      DEXmalus = -Math.abs(Math.ceil(targetPlayerDEX.total / 2))\n      rounds = 2\n      pushBuff(targetPlayer, `temporary`, `STUN`, rounds, `stun`, 4)\n      pushBuff(targetPlayer, `temporary`, `DEX`, DEXmalus, `stun`, 6)\n      // Score\n      data = score(data, `action/stun/success`, `game`)\n      break;\n    case `critical`:\n      DEXmalus = -Math.abs(targetPlayerDEX.total)\n      rounds = 3\n      pushBuff(targetPlayer, `temporary`, `STUN`, rounds, `stun`, 6)\n      pushBuff(targetPlayer, `temporary`, `DEX`, DEXmalus, `stun`, 8)\n      // Score\n      data = score(data, `action/stun/critical`, `game`)\n      break;\n    case `fumble`:\n      DEXmalus = -Math.abs(Math.ceil(activePlayerDEX.total / 2))\n      STRmalus = -Math.abs(Math.ceil(activePlayerSTR.total / 2))\n      pushBuff(activePlayer, `temporary`, `DEX`, DEXmalus, `stun`, 2)\n      pushBuff(activePlayer, `temporary`, `STR`, STRmalus, `stun`, 2)\n      // Score\n      data = score(data, `action/stun/fumble`, `game`)\n      break;\n\n    default:\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.stun.current = 0\n\n  // Score\n  data = score(data, `action/stun/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `stun`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPosition: hit.position,\n      dexMalus: DEXmalus,\n      strMalus: STRmalus,\n      rounds: rounds\n    }\n  }\n  log.display = formatDataLog(`stun`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`stun`, log, game))\n\n  return data\n}\n\nexport { stun }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { score } from '../../actions/score/score'\nimport { getStat } from './stats'\n\n/**\n  * @desc Computing the results of itembreak skill\n*/\n\nconst itembreak = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Itembreak can break some of the enemy's item\n\n  // Select enemy items\n  let items = []\n  for (let [key, value] of Object.entries(opponent.items)) {\n    items.push({ category: `items`, char: key, item: value})\n  } \n  for (let [key, value] of Object.entries(opponent.weapons)) {\n    items.push({ category: `weapons`, char: key, item: value })\n  }\n\n  // Shuffle results\n  items = items\n    .map((a) => ({ sort: Math.random(), value: a }))\n    .sort((a, b) => a.sort - b.sort)\n    .map((a) => a.value)\n\n  // Build a 6 items array\n  let wheelItems = []\n  let j = 0\n  for (let i = 0; i < 20; i++) {\n    if (items[j]) {\n      wheelItems.push(items[j])\n      j++\n    } else {\n      j=0\n    }\n    if (wheelItems.length === 6) break\n  }\n  \n  // Pass to skillWheel\n  const hit = skillWheelRoll(wheelItems)\n  let DEXmalus\n  switch (hit.result) {\n    case `fumble`:\n      // If fumble, LCK malus\n      const activePlayerDEX = getStat(activePlayer, `DEX`)\n      DEXmalus = -Math.abs(Math.ceil(activePlayerDEX.total / 2))\n      pushBuff(activePlayer, `temporary`, `DEX`, DEXmalus, `stun`, 2)\n      // Give LCK bonus to opponent \n      pushBuff(targetPlayer, `temporary`, `LCK`, 3, `attackfumble`, 5)\n      // Score\n      data = score(data, `action/itembreak/fumble`, `game`)\n      break;\n\n    default:\n      // Destroy one or more items\n      delete targetPlayer[hit.result.category][hit.result.char]\n      // Score\n      data = score(data, `action/itembreak/success`, `game`)\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.itembreak.current = 0\n\n  // Score\n  data = score(data, `action/itembreak/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `itembreak`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPositions: hit.positions,\n      wheelPosition: hit.position,\n      dexMalus: DEXmalus\n    }\n  }\n  log.display = formatDataLog(`itembreak`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`itembreak`, log, game))\n\n  return data\n}\n\nexport { itembreak }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { score } from '../../actions/score/score'\nimport { getStat } from './stats'\n\n/**\n  * @desc Computing the results of psyblast skill\n*/\n\nconst psyblast = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? {...player} : {...opponent}\n  let targetPlayer = game.playerTurn ? {...opponent} : {...player}\n\n  // Psychic blast can reduce opponent MAG to a super low value for 2 turns\n  const hit = skillWheelRoll()\n  \n  let MAGmalus\n  const activePlayerMAG = getStat(activePlayer, `MAG`)\n  const targetPlayerMAG = getStat(targetPlayer, `MAG`)\n\n  switch (hit.result) {\n    case `success`:\n      MAGmalus = -Math.abs(Math.ceil(targetPlayerMAG.total))\n      pushBuff(targetPlayer, `temporary`, `MAG`, MAGmalus, `psyblast`, 4)\n      // Score\n      data = score(data, `action/psyblast/success`, `game`)\n      break;\n    case `critical`:\n      MAGmalus = -Math.abs(Math.ceil(targetPlayerMAG.total * 2))\n      pushBuff(targetPlayer, `temporary`, `MAG`, MAGmalus, `psyblast`, 4)\n      // Score\n      data = score(data, `action/psyblast/critical`, `game`)\n      break;\n    case `fumble`:\n      MAGmalus = -Math.abs(Math.ceil(activePlayerMAG.total / 2))\n      pushBuff(activePlayer, `temporary`, `MAG`, MAGmalus, `psyblast`, 2)\n      // Score\n      data = score(data, `action/psyblast/fumble`, `game`)\n      break;\n  \n    default:\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.psyblast.current = 0\n\n  // Score\n  data = score(data, `action/psyblast/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `psyblast`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPosition: hit.position,\n      magMalus: MAGmalus\n    }\n  }\n  log.display = formatDataLog(`psyblast`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`psyblast`, log, game))\n\n  return data \n}\n\nexport { psyblast }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { getRandomInt } from '../../utils/utils'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of psyblast skill\n*/\n\nconst curse = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Fumble can raise fumble rate\n  const hit = skillWheelRoll()\n  let FUMBLEmalus\n\n  switch (hit.result) {\n    case `success`:\n      FUMBLEmalus = getRandomInt(5, 7)\n      pushBuff(targetPlayer, `temporary`, `fumble`, FUMBLEmalus, `curse`, 4)\n      // Score\n      data = score(data, `action/curse/success`, `game`)\n      break;\n    case `critical`:\n      FUMBLEmalus = getRandomInt(7, 9)\n      pushBuff(targetPlayer, `temporary`, `fumble`, FUMBLEmalus, `curse`, 4)\n      // Score\n      data = score(data, `action/curse/critical`, `game`)\n      break;\n    case `fumble`:\n      FUMBLEmalus = getRandomInt(3, 5)\n      pushBuff(activePlayer, `temporary`, `fumble`, FUMBLEmalus, `curse`, 2)\n      // Score\n      data = score(data, `action/curse/fumble`, `game`)\n      break;\n\n    default:\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.curse.current = 0\n\n  // Score\n  data = score(data, `action/curse/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `curse`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPosition: hit.position,\n      fumbleMalus: FUMBLEmalus\n    }\n  }\n  log.display = formatDataLog(`curse`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`curse`, log, game))\n\n  return data\n}\n\nexport { curse }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { energyRestore } from './energy'\nimport { getRandomInt, capitalizeFirstLetter } from '../../utils/utils'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of heal skill\n*/\n\nconst heal = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Fumble can raise fumble rate\n  let wheelItems = [\n    { item: { type: \"potion\", id: 57, healCapacity: \"small\" } },\n    { item: { type: \"potion\", id: 2, healCapacity: \"medium\" } },\n    { item: { type: \"potion\", id: 57, healCapacity: \"small\" } },\n    { item: { type: \"potion\", id: 2, healCapacity: \"medium\" } },\n    { item: { type: \"potion\", id: 43, healCapacity: \"large\" } },\n    { item: { type: \"potion\", id: 57, healCapacity: \"small\" } },\n  ]\n\n  let healRanges = {\n    small: [10,20],\n    medium: [20,50],\n    large: [50,80]\n  }\n\n  const hit = skillWheelRoll(wheelItems)\n  let FUMBLEmalus, healValue, healCapacity\n\n  switch (hit.result) {\n    case `fumble`:\n      FUMBLEmalus = getRandomInt(3, 5)\n      pushBuff(activePlayer, `temporary`, `fumble`, FUMBLEmalus, `curse`, 4)\n      // Score\n      data = score(data, `action/heal/fumble`, `game`)\n      break;\n\n    default:\n      // Test potion size\n      healCapacity = hit.result.item.healCapacity\n      // Value is a % of maxHitPoints\n      healValue = Math.round( getRandomInt(healRanges[healCapacity][0], healRanges[healCapacity][1]) * player.maxHitPoints / 100 )\n      activePlayer = energyRestore(activePlayer, healValue, `hitPoints`)\n      // Score\n      data = score(data, `action/heal/success`, `game`)\n      data = score(data, `action/heal/heal`, `game`, healValue)\n      data = score(data, `heal`, `game`, healValue)\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.heal.current = 0\n\n  // Score\n  data = score(data, `action/heal/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `heal`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPositions: hit.positions,\n      wheelPosition: hit.position,\n      fumbleMalus: FUMBLEmalus,\n      healCapacity: healCapacity && capitalizeFirstLetter(healCapacity),\n      healValue: healValue\n    }\n  }\n  log.display = formatDataLog(`heal`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`heal`, log, game))\n\n  return data\n}\n\nexport { heal }\n","import { formatDataLog } from '../../utils/formatDataLog'\nimport { energyRestore, instantUse } from './energy'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of quick heal instant\n*/\n\nconst quickheal = (data, item, id) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  let healValue = item.value\n  activePlayer = energyRestore(activePlayer, healValue, `hitPoints`)\n\n  // Update instant counter\n  activePlayer = instantUse(activePlayer, id)\n\n  // Score\n  data = score(data, `instant/quickheal/total`, `game`)\n  data = score(data, `instant/quickheal/heal`, `game`, healValue)\n  data = score(data, `heal`, `game`, healValue)\n\n  // Build log\n  let log = {\n    type: `quickheal`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      healValue: healValue,\n      icon: [item.type, item.id]\n    }\n  }\n  log.display = formatDataLog(`quickheal`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`quickheal`, log, game))\n\n  return data\n}\n\nexport { quickheal }\n","import { formatDataLog } from '../../utils/formatDataLog'\nimport { pushBuff } from './stats'\nimport { instantUse } from './energy'\nimport { sideEffects } from '../../actions/settings/onNewItem'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of upgrade instant\n*/\n\nconst upgrade = (data, item, id) => {\n  // Next state\n  let nextData = JSON.parse(JSON.stringify(data))\n  let { player, opponent, game } = nextData\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  let buffValue = item.value\n  let buffChar = item.char\n  let buffType = item.permancence\n\n  // Push buff\n  pushBuff(activePlayer, buffType, buffChar, buffValue, `instant`, 10)\n\n  // Update instant counter\n  activePlayer = instantUse(activePlayer, id)\n\n  // Score\n  nextData = score(nextData, `instant/upgrade/${buffType}`, `game`)\n\n  // Build log\n  let log = {\n    type: `upgrade`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      buffValue: buffValue,\n      buffChar: buffChar,\n      buffType: buffType,\n      icon: [item.type, item.id]\n    }\n  }\n  log.display = formatDataLog(`upgrade`, log, game)\n\n  // Apply changes\n  nextData.player = game.playerTurn ? activePlayer : targetPlayer\n  nextData.opponent = !game.playerTurn ? activePlayer : targetPlayer\n\n  // Compute side effects\n  nextData = sideEffects(data, nextData, `upgrade`, buffChar)\n\n  nextData.log = log\n  nextData.dataLogs.push(formatDataLog(`upgrade`, log, game))\n\n  return nextData\n}\n\nexport { upgrade }\n","import { formatDataLog } from '../../utils/formatDataLog'\nimport { instantUse, energyRestore } from './energy'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of restore instant\n*/\n\nconst restore = (data, item, id) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Restore energies\n  activePlayer = energyRestore(activePlayer, 100, `magicPoints`)\n  activePlayer = energyRestore(activePlayer, 100, `stamina`)\n  activePlayer = energyRestore(activePlayer, 100, `skills`)\n\n  // Update instant counter\n  activePlayer = instantUse(activePlayer, id)\n\n  // Score\n  data = score(data, `instant/restore/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `restore`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      icon: [item.type, item.id]\n    }\n  }\n  log.display = formatDataLog(`restore`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`restore`, log, game))\n\n  return data\n}\n\nexport { restore }\n","import { formatDataLog } from '../../utils/formatDataLog'\nimport { instantUse } from './energy'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of damage instant\n*/\n\nconst damage = (data, item, id) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  let damageResult = item.value\n\n  // Damage opponent\n  targetPlayer.hitPoints -= damageResult\n  if (targetPlayer.hitPoints < 0) targetPlayer.hitPoints = 0\n  // Applying rage\n  targetPlayer.physicalRage = damageResult\n\n  // Update rumble ui\n  data.game.opponentHit = true\n\n  // Update instant counter\n  activePlayer = instantUse(activePlayer, id)\n\n  // Score\n  data = score(data, `instant/damage/total`, `game`)\n  data = score(data, `instant/damage/damage`, `game`, damageResult)\n  data = score(data, `damage`, `game`, damageResult)\n\n  // Build log\n  let log = {\n    type: `damage`,\n    delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      icon: [item.type, item.id],\n      damage: damageResult\n    }\n  }\n  log.display = formatDataLog(`damage`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`damage`, log, game))\n\n  return data\n}\n\nexport { damage }\n","import { formatDataLog } from '../../utils/formatDataLog'\nimport { instantUse } from './energy'\nimport { weaponElements } from \"../../conf/settings_items\"\nimport { randomValue } from \"../../utils/utils\"\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of sharpen instant\n*/\n\nconst sharpen = (data, item, id) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Select weapon\n  let weapon = activePlayer.weapons[item.value]\n  let weaponScore = weapon.score.split(`d`)\n  let element\n\n  // Get current sharpen score\n  let sharpenScore = weapon.sharpen ? weapon.sharpen : 0\n  // Wheel roll, can be sharpen (+1D) or fail\n  let wheelItems = []\n  for (let i = 0; i < 6; i++) {\n    if (i < sharpenScore) wheelItems.push(`fumble`)\n    else wheelItems.push({ category: `items`, item: { type: item.type, id: item.id} })\n  }\n  // Succes ratio goes down with sharpen count (but can't be 0, still a 1/8 chance at worst)\n  if (sharpenScore > 5) wheelItems[5] = { category: `items`, item: { type: item.type, id: item.id } }\n  \n  // Compute skill roll\n  const hit = skillWheelRoll(wheelItems)\n\n  switch (hit.result) {\n    case `fumble`:\n      // Score\n      data = score(data, `instant/sharpen/miss`, `game`)\n      break;\n\n    default:\n      // Success ! Add 1D\n      if (Number.isInteger(parseInt(weaponScore[0]))) weaponScore[0]++\n      else weaponScore[0] = 2\n      weapon.score = weaponScore.join('d')\n      // Give random element to classic items\n      if (weapon.quality !== `unique`) {\n        element = randomValue(weaponElements.elementsonly)\n        weapon.element = element\n      } else {\n        element = false\n      }\n      // Add + 1 sharpen score\n      activePlayer.weapons[item.value].sharpen = sharpenScore + 1\n      // Score\n      data = score(data, `instant/sharpen/success`, `game`)\n      break;\n  }\n\n  // Update weapon\n  activePlayer.weapons[item.value] = weapon\n\n  // Update instant counter\n  activePlayer = instantUse(activePlayer, id)\n\n  // Score\n  data = score(data, `instant/sharpen/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `sharpen`,\n    // delay: `immediate`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPositions: hit.positions,\n      wheelPosition: hit.position,\n      icon: [item.type, item.id, weapon.type, weapon.id],\n      element: element\n    }\n  }\n  log.display = formatDataLog(`sharpen`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`sharpen`, log, game))\n\n  return data\n}\n\nexport { sharpen }\n","import { pushBuff } from './stats'\nimport { formatDataLog } from '../../utils/formatDataLog'\nimport { skillWheelRoll } from '../../actions/combat/hit'\nimport { score } from '../../actions/score/score'\n\n/**\n  * @desc Computing the results of reflect skill\n*/\n\nconst reflect = (data) => {\n  let { player, opponent, game } = data\n\n  let activePlayer = game.playerTurn ? { ...player } : { ...opponent }\n  let targetPlayer = game.playerTurn ? { ...opponent } : { ...player }\n\n  // Fumble can raise fumble rate\n  let wheelItems = [\n    { item: { type: \"skill\", id: 14, effect: `reflect` } },\n    { item: { type: \"skill\", id: 14, effect: `reflect` }},\n    { item: { type: \"skill\", id: 14, effect: `reflect` }},\n    { item: { type: \"skill\", id: 14, effect: `reflect` }},\n    { item: { type: \"skill\", id: 14, effect: `reflect` }},\n    { item: { type: \"skill\", id: 16, effect: `boost` } },\n  ]\n\n  const hit = skillWheelRoll(wheelItems)\n\n  let reflect\n\n  switch (hit.result) {\n    case `fumble`:\n      reflect = `miss`\n      // Score\n      data = score(data, `action/reflect/miss`, `game`)\n      break;\n\n    default:\n      if (hit.result.item.effect === `reflect`) {\n        reflect = `success`\n        pushBuff(targetPlayer, `temporary`, `reflect`, 1, `reflect`)\n        // Score\n        data = score(data, `action/reflect/success`, `game`)\n      } else {\n        reflect = `boost`\n        pushBuff(targetPlayer, `temporary`, `boost`, 1, `boost`)\n        // Score\n        data = score(data, `action/reflect/fumble`, `game`)\n      }\n      break;\n  }\n\n  // Reset skill energy\n  activePlayer.skills.reflect.current = 0\n\n  // Score\n  data = score(data, `action/reflect/total`, `game`)\n\n  // Build log\n  let log = {\n    type: `reflect`,\n    delay: `long`,\n    activePlayer,\n    targetPlayer,\n    data: {\n      hit: hit.result,\n      wheelPositions: hit.positions,\n      wheelPosition: hit.position,\n      reflect: reflect\n    }\n  }\n  log.display = formatDataLog(`reflect`, log, game)\n\n  // Apply changes\n  data.player = game.playerTurn ? activePlayer : targetPlayer\n  data.opponent = !game.playerTurn ? activePlayer : targetPlayer\n  data.log = log\n  data.dataLogs.push(formatDataLog(`reflect`, log, game))\n\n  return data\n}\n\nexport { reflect }\n","\n/**\n  * @desc Opening shop\n*/\n\nconst monstersDemo = (data) => {\n  // Set game state\n  data.game.state = `monstersDemo`\n\n  return data\n}\n\nexport { monstersDemo }\n","var SecureStorage = require(\"secure-web-storage\")\nvar CryptoJS = require(\"crypto-js\")\nvar SECRET_KEY = 'passion poney . com'\n\nconst secureStorage = new SecureStorage(localStorage, {\n    hash: function hash(key) {\n        key = CryptoJS.SHA256(key, SECRET_KEY)\n        return key.toString()\n    },\n    encrypt: function encrypt(data) {\n        data = CryptoJS.AES.encrypt(data, SECRET_KEY);\n        data = data.toString()\n        return data\n    },\n    decrypt: function decrypt(data) {\n        data = CryptoJS.AES.decrypt(data, SECRET_KEY)\n        data = data.toString(CryptoJS.enc.Utf8)\n        return data\n    }\n})\n\nexport const loadState = () => {\n  try {\n    const serializedState = secureStorage.getItem('state');\n    if (serializedState === null) {\n      return undefined\n    }\n    return JSON.parse(serializedState)\n  } catch (err) {\n    return undefined\n  }\n}\n\nexport const saveState = (state) => {\n  try {\n    const serializedState = JSON.stringify(state)\n    secureStorage.setItem('state', serializedState)\n    // localStorage.setItem('state', serializedState)\n  } catch {\n    // ignore write errors\n  }\n}","import { GAMESTATE, ATTACK, SETTINGS } from \"../constants/action-types\"\n// Settings\nimport { tutorial } from '../../actions/settings/tutorial'\nimport { createMonsters } from '../../actions/settings/createMonsters'\nimport { createPlayer } from '../../actions/settings/createPlayer'\nimport { resetLevel } from '../../actions/settings/resetLevel'\nimport { updateVersion } from '../../actions/settings/updateVersion'\nimport { releaseNotes } from '../../actions/settings/releaseNotes'\nimport { setVersion } from '../../actions/settings/setVersion'\nimport { resetGame } from '../../actions/settings/resetGame'\nimport { submitScore } from '../../actions/settings/submitScore'\nimport { setItem } from '../../actions/settings/setItem'\nimport { setGold } from '../../actions/settings/setGold'\nimport { keepItem } from '../../actions/settings/keepItem'\nimport { buyItem } from '../../actions/settings/buyItem'\nimport { buyInstant } from '../../actions/settings/buyInstant'\nimport { sellItem } from '../../actions/settings/sellItem'\nimport { sellInstant } from '../../actions/settings/sellInstant'\nimport { deleteLegacy } from '../../actions/settings/deleteLegacy'\nimport { forgeUniques } from '../../actions/settings/forgeUniques'\nimport { moveItem } from '../../actions/settings/moveItem'\nimport { setUIColor } from '../../actions/settings/setUIColor'\nimport { preference } from '../../actions/settings/preference'\n// Game system\nimport { welcome } from '../../actions/game/welcome'\nimport { welcome_keepQuitState } from '../../actions/game/welcome_keepQuitState'\nimport { quit } from '../../actions/game/quit'\nimport { gameCreate } from '../../actions/game/gameCreate'\nimport { levelTransition } from '../../actions/game/levelTransition'\nimport { battleIntro } from '../../actions/game/battleIntro'\nimport { startBattle } from '../../actions/game/startBattle'\nimport { victory } from '../../actions/game/victory'\nimport { defeat } from '../../actions/game/defeat'\nimport { permadeath } from '../../actions/game/permadeath'\nimport { hallOfFame } from '../../actions/game/hallOfFame'\nimport { resetThenHallOfFame } from '../../actions/game/resetThenHallOfFame'\nimport { nextLoop } from '../../actions/game/nextLoop'\nimport { openShop } from '../../actions/game/openShop'\nimport { logsToPlayerTurn } from '../../actions/game/logsToPlayerTurn'\nimport { score } from '../../actions/score/score'\n/** Combat system */\n// Attacks\nimport { attack } from '../../actions/combat/attack'\nimport { block } from '../../actions/combat/block'\nimport { specialattack } from '../../actions/combat/specialattack'\nimport { cast } from '../../actions/combat/cast'\nimport { focus } from '../../actions/combat/focus'\nimport { specialcast } from '../../actions/combat/specialcast'\nimport { skip } from '../../actions/combat/skip'\n// Skills\nimport { stun } from '../../actions/combat/stun'\nimport { itembreak } from '../../actions/combat/itembreak'\nimport { psyblast } from '../../actions/combat/psyblast'\nimport { curse } from '../../actions/combat/curse'\nimport { heal } from '../../actions/combat/heal'\nimport { quickheal } from '../../actions/combat/quickheal'\nimport { upgrade } from '../../actions/combat/upgrade'\nimport { restore } from '../../actions/combat/restore'\nimport { damage } from '../../actions/combat/damage'\nimport { sharpen } from '../../actions/combat/sharpen'\nimport { reflect } from '../../actions/combat/reflect'\n// Utils\nimport { autoResetBuff, incrementSkillCount } from '../../actions/combat/stats'\nimport { energyRefresh, maxEnergyRefresh } from '../../actions/combat/energy'\nimport { displayHits } from '../../actions/combat/hit'\n// Private views (tests, WIP, etc)\nimport { monstersDemo } from '../../actions/private/monstersDemo'\n// Utils\nimport { clog } from '../../utils/utils'\n// Initial state\nimport { initialState } from '../../conf/settings'\nimport { saveState } from '../../redux/localStorage'\nimport { version } from '../../conf/version'\n\nfunction rootReducer(state = initialState, action) {\n\n  // Prepare next state\n  let prevState = { ...state }\n  // Spread operator only shallow copy, needs deep copy\n  let nextState = JSON.parse(JSON.stringify(state))\n\n  // Switch to next player turn\n  let turnSwitch = true\n\n  // Version bumping highjack\n  if (nextState.monsters && version[0].version !== nextState.version && version[0].reset) {\n    action.type = GAMESTATE\n    action.payload = { state: `updateVersion` }\n  }\n\n  clog(action.type, `action`)\n\n  if (action.type === SETTINGS) {\n    switch (action.payload.setting) {\n      case `tutorial`:\n        clog(`tutorial`, `reducer`)\n        nextState = tutorial(nextState)\n        break;\n      case `createMonsters`:\n        clog(`createMonsters`, `reducer`)\n        nextState = createMonsters(nextState, action.payload.data)\n        break;\n      case `createPlayer`:\n        clog(`createPlayer`, `reducer`)\n        nextState = createPlayer(nextState, action.payload.style)\n        break;\n      case `resetLevel`:\n        clog(`resetLevel`, `reducer`)\n        nextState = resetLevel(nextState)\n        break;\n      case `resetGame`:\n        clog(`resetGame`, `reducer`)\n        nextState = resetGame(nextState)\n        break;\n      case `setVersion`:\n        clog(`setVersion`, `reducer`)\n        nextState = setVersion(nextState)\n        break;\n      case `submitScore`:\n        clog(`submitScore`, `reducer`)\n        nextState = submitScore(nextState)\n        break;\n      case `setItem`:\n        clog(`setItem`, `reducer`)\n        nextState = setItem(nextState, action.payload.type, action.payload.char, action.payload.item)\n        break;\n      case `setGold`:\n        clog(`setGold`, `reducer`)\n        nextState = setGold(nextState, action.payload.type, action.payload.value)\n        break;\n      case `keepItem`:\n        clog(`keepItem`, `reducer`)\n        nextState = keepItem(nextState, action.payload.type, action.payload.char, action.payload.item)\n        break;\n      case `moveItem`:\n        clog(`moveItem`, `reducer`)\n        nextState = moveItem(nextState, action.payload.type, action.payload.char, action.payload.item)\n        break;\n      case `buyItem`:\n        clog(`buyItem`, `reducer`)\n        nextState = buyItem(nextState, action.payload.type, action.payload.char, action.payload.item)\n        break;\n      case `buyInstant`:\n        clog(`buyInstant`, `reducer`)\n        nextState = buyInstant(nextState, action.payload.item)\n        break;\n      case `sellItem`:\n        clog(`sellItem`, `reducer`)\n        nextState = sellItem(nextState, action.payload.type, action.payload.char, action.payload.item)\n        break;\n      case `sellInstant`:\n        clog(`sellInstant`, `reducer`)\n        nextState = sellInstant(nextState, action.payload.index, action.payload.item)\n        break;\n      case `deleteLegacy`:\n        clog(`deleteLegacy`, `reducer`)\n        nextState = deleteLegacy(nextState)\n        break;\n      case `forgeUniques`:\n        clog(`forgeUniques`, `reducer`)\n        nextState = forgeUniques(nextState)\n        break; \n      case `setUIColor`:\n        clog(`setUIColor`, `reducer`)\n        nextState = setUIColor(nextState, action.payload.color)\n        break;\n      case `preference`:\n        clog(`preference`, `reducer`)\n        nextState = preference(nextState, action.payload.type, action.payload.value)\n        break;\n      default:\n        break;\n    }\n  }\n\n  if (action.type === GAMESTATE) {\n\n    // Store page for origin use\n    nextState.game.previousState = nextState.game.state\n\n    switch (action.payload.state) {\n      case `welcome`:\n        clog(`welcome`, `reducer`)\n        nextState = welcome(nextState)\n        break;\n      case `welcome_keepQuitState`:\n        clog(`welcome_keepQuitState`, `reducer`)\n        nextState = welcome_keepQuitState(nextState)\n        break;\n      case `quit`:\n        clog(`quit`, `reducer`)\n        nextState = quit(nextState)\n        break;\n      case `gameCreate`:\n        clog(`gameCreate`, `reducer`)\n        nextState = gameCreate(nextState)\n        break;\n      case `levelTransition`:\n        clog(`levelTransition`, `reducer`)\n        nextState = levelTransition(nextState)\n        break;\n      case `battleIntro`:\n        clog(`battleIntro`, `reducer`)\n        nextState = battleIntro(nextState)\n        break;\n      case `playerTurn`:\n        clog(`playerTurn`, `reducer`)\n        nextState = logsToPlayerTurn(nextState)\n        break;\n      case `battle`:\n        clog(`battle`, `reducer`)\n        nextState = startBattle(nextState)\n        break;\n      case `victory`:\n        clog(`victory`, `reducer`)\n        nextState = victory(nextState)\n        break;\n      case `defeat`:\n        clog(`defeat`, `reducer`)\n        nextState = defeat(nextState)\n        break;\n      case `permadeath`:\n        clog(`permadeath`, `reducer`)\n        nextState = permadeath(nextState)\n        break;\n      case `hallOfFame`:\n        clog(`hallOfFame`, `reducer`)\n        nextState = hallOfFame(nextState)\n        break;\n      case `resetThenHallOfFame`:\n        clog(`resetThenHallOfFame`, `reducer`)\n        nextState = resetThenHallOfFame(nextState)\n        break;\n      case `nextLoop`:\n        clog(`nextLoop`, `reducer`)\n        nextState = nextLoop(nextState)\n        break;\n      case `shop`:\n        clog(`shop`, `reducer`)\n        nextState = openShop(nextState)\n        break;\n      case `updateVersion`:\n        clog(`updateVersion`, `reducer`)\n        nextState = updateVersion(nextState)\n        break;\n      case `releaseNotes`:\n        clog(`releaseNotes`, `reducer`)\n        nextState = releaseNotes(nextState)\n        break;\n      // Private views\n      case `monstersDemo`:\n        clog(`monstersDemo`, `reducer`)\n        nextState = monstersDemo(nextState)\n        break;\n      case `jumptoendgame`:\n        nextState.game.state = `endgame`\n        break;\n      default:\n        break;\n    }\n  } \n\n  if (action.type === ATTACK) {\n\n    // Add score\n    nextState = score(nextState, `round`, `run`)\n\n    // Skip turn\n    if (action.payload.type === `skip`) {\n      clog(`skip`, `reducer`)\n      nextState = skip(nextState)\n    }\n  \n    // Switch attack type\n    if (action.payload.type === `physical`) {\n      switch (action.payload.mode) {\n        case `attack`:\n          clog(`attack`, `reducer`)\n          nextState = attack(nextState)\n          break;\n        case `defend`:\n          clog(`defend`, `reducer`)\n          nextState = block(nextState)\n          break;\n        case `special`:\n          clog(`special`, `reducer`)\n          nextState = specialattack(nextState)\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (action.payload.type === `magical`) {\n      switch (action.payload.mode) {\n        case `attack`:\n          clog(`attack`, `reducer`)\n          nextState = cast(nextState)\n          break;\n        case `defend`:\n          clog(`defend`, `reducer`)\n          nextState = focus(nextState)\n          break;\n        case `special`:\n          clog(`special`, `reducer`)\n          nextState = specialcast(nextState)\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (action.payload.type === `skill`) {\n      switch (action.payload.mode) {\n        case `stun`:\n          clog(`stun`, `reducer`)\n          nextState = stun(nextState)\n          break;\n        case `itembreak`:\n          clog(`itembreak`, `reducer`)\n          nextState = itembreak(nextState)\n          break;\n        case `psyblast`:\n          clog(`psyblast`, `reducer`)\n          nextState = psyblast(nextState)\n          break;\n        case `curse`:\n          clog(`curse`, `reducer`)\n          nextState = curse(nextState)\n          break;\n        case `heal`:\n          clog(`heal`, `reducer`)\n          nextState = heal(nextState)\n          break;\n        case `reflect`:\n          clog(`reflect`, `reducer`)\n          nextState = reflect(nextState)\n          break;\n        // Instants\n        case `quickheal`:\n          clog(`quickheal`, `reducer`)\n          turnSwitch = false\n          nextState = quickheal(nextState, action.payload.item, action.payload.id)\n          break;\n        case `upgrade`:\n          clog(`upgrade`, `reducer`)\n          turnSwitch = false\n          nextState = upgrade(nextState, action.payload.item, action.payload.id)\n          break;\n        case `restore`:\n          clog(`restore`, `reducer`)\n          turnSwitch = false\n          nextState = restore(nextState, action.payload.item, action.payload.id)\n          break;\n        case `damage`:\n          clog(`damage`, `reducer`)\n          turnSwitch = false\n          nextState = damage(nextState, action.payload.item, action.payload.id)\n          break;\n        case `sharpen`:\n          clog(`sharpen`, `reducer`)\n          turnSwitch = false\n          nextState = sharpen(nextState, action.payload.item, action.payload.id)\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (turnSwitch) {\n      // Mana reloads\n      nextState = energyRefresh(nextState, `magical`)\n      nextState = energyRefresh(nextState, `physical`)\n      // Reset temporary buffs\n      nextState = autoResetBuff(nextState)\n      // Increment skill counters\n      nextState = incrementSkillCount(nextState)\n      // Compute hits for UI display\n      nextState = displayHits(prevState, nextState)\n      // Switch player turn\n      nextState.game.playerTurn = !nextState.game.playerTurn\n      // Opponent can play\n      nextState.game.skipTurn = false\n    } else {\n      // Switch player turn\n      nextState.game.playerTurn = true\n      // But prevent opponent from playing\n      nextState.game.skipTurn = true\n    }\n  }\n\n  // console.log(nextState)\n\n  // In every case, compute Max values\n  // @todo : this probably should move to ATTACK only\n  nextState = maxEnergyRefresh(nextState)\n\n  // Update LocalStorage\n  saveState(nextState)\n\n  // Return updated state\n  return nextState\n}\n\nexport default rootReducer","export const GAMESTATE = \"GAMESTATE\"\nexport const ATTACK = \"ATTACK\"\nexport const SETTINGS = \"SETTINGS\"","import { createStore } from \"redux\"\nimport rootReducer from \"../reducers/index\"\nimport { loadState } from \"../localStorage/index\"\n\nconst persistedState = loadState()\n\nconst store = createStore(\n  rootReducer,\n  persistedState,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nexport default store","import { ATTACK } from \"../constants/action-types\"\nimport { GAMESTATE } from \"../constants/action-types\"\nimport { SETTINGS } from \"../constants/action-types\"\n\nfunction settings(payload) {\n  return { type: SETTINGS, payload }\n}\n\nfunction setGameState(payload) {\n  return { type: GAMESTATE, payload }\n}\n\nfunction attack(payload) {\n  return { type: ATTACK, payload }\n}\n\nexport {\n  settings,\n  setGameState,\n  attack\n}\n","/* eslint-disable react/jsx-no-target-blank */\nimport React from 'react'\nimport { connect } from \"react-redux\"\n\n/**\n  * @desc About Modal\n*/\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst ModalAbout = () => {\n\n  // Display component\n  return (\n    <div className=\"credits\">\n      <p>A game about killing monsters<br />and killing phone batteries.</p>\n      <div className=\"separator\" />\n      <div className=\"title\">Game dev & design</div>\n      <p>\n        Ultimate Manatee Studio<br />\n        <span className=\"smallText\">\n          ultimatemanatee@gmail.com<br />\n          <a href=\"https://discord.gg/C46VEGx\">Discord</a>\n        </span>\n      </p>\n      <div className=\"title\">Monsters design</div>\n      <p><a href=\"http://www.akashics.moe/\" target=\"_blank\">kashics Librarium</a></p>\n      <div className=\"title\">Pixel art assets</div>\n      <p><a href=\"https://www.deviantart.com/7soul1\" target=\"_blank\">7 Soul</a> / <a href=\"https://www.saschanaderer.com/pixel-art/\" target=\"_blank\">Pixeltier</a></p>\n      <div className=\"separator\" />\n      <p>Thank you for playing!</p>\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalAbout)\n","import React from 'react'\nimport { connect } from \"react-redux\"\n\n/**\n  * @desc About Modal\n*/\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst ModalSettings = () => {\n\n  // Display component\n  return (\n    <div key=\"modalSettings\">Settings</div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalSettings)\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport { settings } from '../../redux/actions/index'\n\n/**\n  * @desc Reset Modal\n*/\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    settings: payload => dispatch(settings(payload)),\n  }\n}\n\nconst ModalReset = ({ settings }) => {\n\n  // Display component\n  return (\n    <div className=\"credits\">\n      <div className=\"title margin-none\">Reset the game</div>\n      <p>Your run history, gold and items will be erased : are you sure ?</p>\n      <button className=\"navigation\" onClick={() => settings({ setting: `resetGame` })}>Yes! Start a new game</button>\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalReset)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n/**\n  * @desc Item visual\n*/\n\nconst propTypes = {\n  item: PropTypes.string,\n  level: PropTypes.number,\n  small: PropTypes.bool,\n  big: PropTypes.bool\n}\n\nconst defaultProps = {\n  small: false,\n  big: false\n}\n\nconst ItemVisual = ({ item, level, small, big }) => {\n\n  // Component styling\n  const defaultClasses = `item`\n  // Item reference\n  const itemReference = item+'_'+level\n  // Size\n  const itemSize = small ? `small` : ``\n  const itemSizeBig = big ? `big` : ``\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses, itemReference, itemSize, itemSizeBig].filter(val => val).join(` `)\n  // Display component\n  if (item && (typeof level === \"number\")) return (\n    <span className={itemClasses} />\n  ) \n  else return null\n}\n\n// Applying propTypes definition and default values\nItemVisual.propTypes = propTypes\nItemVisual.defaultProps = defaultProps\n\n// Exporting as default\nexport default ItemVisual\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\nimport AnimatedNumber from \"animated-number-react\"\n\nimport { gameSettings } from \"../../conf/settings\"\nimport ItemVisual from './ItemVisual'\n\n/**\n  * @desc item block\n*/\n\nconst propTypes = {\n  item: PropTypes.object,\n  effect: PropTypes.string,\n  animateNumber: PropTypes.bool,\n  noPlus: PropTypes.bool,\n  shop: PropTypes.string,\n  displayChar: PropTypes.bool,\n  animations: PropTypes.bool\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state,\n    player: state.player\n  }\n}\nclass Item extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  componentDidUpdate(prevProps) {\n    const { animations } = this.props\n\n    if (animations) {\n      if (prevProps.item && !this.props.item) {\n        this.itemDeleted()\n      }\n    }\n  }\n\n  itemDeleted = () => {\n    this.rollDelay = setTimeout(() => {\n      this.setState({ itemState: \"deleted\" })\n    }, gameSettings.itemStateDelay)\n  }\n\n  render() {\n    const { player, item, effect, noPlus, shop, animateNumber, displayChar } = this.props\n    const { itemState } = this.state\n\n    // Plus sign for bonus items\n    const plusSign = ((item && item.cost) || noPlus) ? `` : `+`\n\n    // Weapon cost type\n    let costType\n    if (item && item.char && item.char === `STR`) costType = `physical`\n    if (item && item.char && item.char === `MAG`) costType = `magical`\n\n    // Elemental glow\n    const defaultClasses = `item_wrapper`\n    const glowClasses = item && item.element ? 'glow_' + item.element : ``\n    const qualityClasses = item && item.quality ? item.quality : ``\n    const effectClasses = effect ? `animation-` + effect : ``\n    const updateClasses = itemState ? `animation-` + itemState : ``\n    const itemClasses = [defaultClasses, qualityClasses, glowClasses, effectClasses, updateClasses].filter(val => val).join(` `)\n    const emptyItemClasses = [defaultClasses, updateClasses].filter(val => val).join(` `)\n\n    // Sharpen marks\n    let marks = []\n    if (item && item.sharpen) {\n      for (let index = 0; index < item.sharpen; index++) {\n        marks.push(<div key={`markWrapper_${index}`} className=\"markWrapper\"><div className=\"mark\" /></div>)\n      }\n    }\n\n    // Set marks\n    // if (item && item.element && !item.cost) {\n    //   // Count setItems bonus\n    //   for (let index = 0; index < player.setItems[item.element]; index++) {\n    //     marks.push(<div className=\"markWrapper\"><div className=\"mark\" /></div>)\n    //   }\n    // }\n\n    // Sharpened score\n    let itemScore\n    if (item && item.type && (typeof item.id === \"number\")) itemScore =  item.score\n\n    if (item && item.sharpen) {\n      let weaponScore = itemScore.split(`d`)\n      itemScore = <span dangerouslySetInnerHTML={{ __html: `<span class=\"legacyColor\">${weaponScore[0]}</span>d${weaponScore[1]}` }} />\n    }\n\n    // Advantage hints\n    let advantage = \"itemAdvantage\"\n    if (item && shop) {\n      if (player[shop][item.char]) {\n        if (itemScore > player[shop][item.char].score) advantage = \"itemAdvantage up\"\n        if (itemScore < player[shop][item.char].score) advantage = \"itemAdvantage down\"\n      }\n      else {\n        advantage = \"itemAdvantage up\"\n      }\n    } \n\n    if (item && item.type && (typeof item.id === \"number\")) return (\n      <div className={itemClasses}>\n        {item.cost &&\n          <>\n            <div className={`itemCost ${costType}`}>{item.cost}</div>\n            {item.element !== `none` && <div className={`element ${item.element}`} /> }\n          </>\n        }\n        {shop &&\n          <div className={advantage} />\n        }\n\n        <div className={`itemAlteration`}>{marks}</div>\n      \n        {item.charges &&\n          <div className={`itemCost charge`}>{item.charges}</div>\n        }\n        <ItemVisual item={item.type} level={item.id} />\n        <span>\n          {displayChar && item.char}\n          {plusSign}\n          {animateNumber \n            ? (<AnimatedNumber\n              formatValue={value => value.toFixed(0)}\n              value={item.score}\n            />)\n            : itemScore\n          }\n          {item.label}\n        </span>\n      </div>\n    )\n    else return (\n      <div className={emptyItemClasses} />\n    )\n  }\n}\n\n// Applying propTypes definition and default values\nItem.propTypes = propTypes\n\n// Exporting as default\nexport default connect(mapStateToProps)(Item)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\n/**\n  * @desc Bar UI component (HP, etc)\n*/\n\nconst propTypes = {\n  type: PropTypes.string,\n  opponent: PropTypes.bool,\n  color: PropTypes.string,\n  current: PropTypes.number,\n  ready: PropTypes.number,\n}\n\nconst defaultProps = {\n  opponent: false\n}\n\nconst mapStateToProps = state => {\n  return {\n    connectedData: state\n  }\n}\n\nconst Bar = ({ connectedData, type, opponent, color, current, ready }) => {\n  // Current player\n  const data = opponent ? connectedData.opponent : connectedData.player\n\n  // Component styling\n  const defaultClasses = `bar`\n\n  // Gauge types\n  let value, maxValue, size\n  switch (type) {\n    case `hitPoints`:\n      value = data.hitPoints\n      maxValue = data.maxHitPoints\n      size = `big`\n      break\n    case `magicPoints`:\n      value = data.magicPoints\n      maxValue = data.maxMagicPoints\n      size = `small`\n      break\n    case `stamina`:\n      value = data.stamina\n      maxValue = data.maxStamina\n      size = `small`\n      break\n    case `physicalRage`:\n      value = data.physicalRage\n      maxValue = data.maxPhysicalRage\n      size = `small`\n      break\n    case `magicalRage`:\n      value = data.magicalRage\n      maxValue = data.maxMagicalRage\n      size = `small`\n      break\n    case `xp`:\n        value = current\n        maxValue = ready\n        size = `big`\n        break\n    default:\n      value = current\n      maxValue = ready\n      size = `small`\n      break\n  }\n\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses, type, size].filter(val => val).join(` `)\n\n  // Compute gauge width\n  let indicatorStyle = color ? {\n    background: color,\n    width: (value*100)/maxValue + `%`,\n  } : {\n    width: (value * 100) / maxValue + `%`,\n  }\n\n  // Small numbers are displayeds a blocks\n  let indicator\n\n  if (maxValue <= 5) {\n    let blocks = []\n    let blockWidth = 100 / maxValue + `%`\n    for (let index = 0; index < maxValue; index++) {\n      indicatorStyle = {\n        background: index < value ? color : `none`,\n        width: blockWidth\n      }\n      blocks.push(\n        <div key={`barb_block_${index}`} className=\"indicator\" style={indicatorStyle} />\n      )\n    }\n    indicator = blocks\n  } else {\n    indicator = <div className=\"indicator\" style={indicatorStyle} />\n  }\n\n  // Display component\n  return (\n    <div className={itemClasses}>\n      {size === `big` && <div className=\"value\">{value}/{maxValue}</div>}\n      {indicator}\n    </div>\n  )\n}\n\n// Applying propTypes definition and default values\nBar.propTypes = propTypes\nBar.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(Bar)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport { gameSettings } from \"../../conf/settings\"\nimport { attack } from '../../redux/actions/index'\nimport Bar from './Bar'\nimport ItemVisual from './ItemVisual'\nimport { toHit, hitChance } from '../../actions/combat/hit'\nimport { limitValue } from '../../utils/utils'\n\n/**\n  * @desc Action buttons\n*/\n\nconst propTypes = {\n  type: PropTypes.string.isRequired\n}\n\nconst defaultProps = {}\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attack: payload => dispatch(attack(payload))\n  }\n}\n\nconst ActionButton = ({ type, player, opponent, attack }) => {\n\n  // Component styling\n  let onClick, icon, buttonClass, note, bar\n\n  // // Compute special actions\n  let specialPhysicalReady = player.physicalRage === player.maxPhysicalRage\n  let specialMagicalReady = player.magicalRage === player.maxMagicalRage\n  let castReady = player.magicPoints >= player.weapons.MAG.cost\n  let attackReady = player.stamina >= player.weapons.STR.cost\n\n  // Placeholder function for not ready actions\n  function notready() {}\n\n  // let hitRatio\n  let physicalHitRatio = limitValue(hitChance(toHit(player, opponent, `physical`)), 0, 100)\n  let magicalHitRatio = limitValue(hitChance(toHit(player, opponent, `magical`)), 0, 100)\n\n  // Switch different buttons\n  switch (type) {\n    case `block`:\n      onClick = () => attack({ type: `physical`, mode: `defend` })\n      icon = <ItemVisual item={gameSettings.icons.block[0]} level={gameSettings.icons.block[1]} />\n      buttonClass = \"physical block\"\n      break;\n    case `focus`:\n      onClick = () => attack({ type: `magical`, mode: `defend` })\n      icon = <ItemVisual item={gameSettings.icons.focus[0]} level={gameSettings.icons.focus[1]} />\n      buttonClass = \"magical block\"\n      break;\n    case `attack`:\n      onClick = attackReady ? () => attack({ type: `physical`, mode: `attack` }) : notready\n      icon = <ItemVisual item={player.weapons.STR.type} level={player.weapons.STR.id} />\n      note = <span className=\"note\">{physicalHitRatio}%</span>\n      bar = <Bar type={\"stamina\"} />\n      buttonClass = attackReady ? `physical attack` : `physical attack disabled`\n      break;\n    case `specialattack`:\n      onClick = specialPhysicalReady ? () => attack({ type: `physical`, mode: `special` }) : notready\n      icon = <ItemVisual item={gameSettings.icons.specialattack[0]} level={gameSettings.icons.specialattack[1]} />\n      bar = <Bar type={\"physicalRage\"} />\n      buttonClass = specialPhysicalReady ? `physical special` : `physical special disabled`\n      break;\n    case `cast`:\n      onClick = castReady ? () => attack({ type: `magical`, mode: `attack` }) : notready\n      icon = <ItemVisual item={player.weapons.MAG.type} level={player.weapons.MAG.id} />\n      note = <span className=\"note\">{magicalHitRatio}%</span>\n      bar = <Bar type={\"magicPoints\"} />\n      buttonClass = castReady ? `magical attack` : `magical attack disabled`\n      break;\n    case `specialcast`:\n      onClick = specialMagicalReady ? () => attack({ type: `magical`, mode: `special` }) : notready\n      icon = <ItemVisual item={gameSettings.icons.specialcast[0]} level={gameSettings.icons.specialcast[1]} />\n      bar = <Bar type={\"magicalRage\"} />\n      buttonClass = specialMagicalReady ? `magical special` : `magical special disabled`\n      break;\n    default:\n      break;\n  }\n  \n  // Display component\n  return (\n    <button className={buttonClass} onClick={onClick}>\n      {note}\n      {icon}\n      {bar}\n    </button>\n  )\n}\n\n// Applying propTypes definition and default values\nActionButton.propTypes = propTypes\nActionButton.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ActionButton)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport { gameSettings } from \"../../conf/settings\"\nimport { attack } from '../../redux/actions/index'\nimport Bar from './Bar'\nimport ItemVisual from './ItemVisual'\n\n/**\n  * @desc Action buttons\n*/\n\nconst propTypes = {\n  type: PropTypes.string.isRequired\n}\n\nconst defaultProps = {}\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attack: payload => dispatch(attack(payload))\n  }\n}\n\nconst SkillButton = ({ type, current, ready, player, opponent, attack }) => {\n\n  // Component styling\n  let onClick, buttonClass, note\n\n  // Placeholder function for not ready actions\n  function notready() {}\n\n  // Is this skill ready ?\n  const skillReady = current === ready\n\n  // Styling \n  buttonClass = skillReady ? `skill ${type}` : `skill ${type} disabled`\n\n  // Switch different buttons\n  switch (type) {\n\n    case `stun`:\n      onClick = skillReady ? () => attack({ type: `skill`, mode: `stun` }) : notready\n      break;\n    case `itembreak`:\n      // Any items to break ?\n      let itemsReady = (Object.keys(opponent.items).length > 0) || (Object.keys(opponent.weapons).length > 0)\n      buttonClass = skillReady && itemsReady ? `skill ${type}` : `skill ${type} disabled`\n      onClick = skillReady && itemsReady ? () => attack({ type: `skill`, mode: `itembreak` }) : notready\n      break;\n    case `psyblast`:\n      onClick = skillReady ? () => attack({ type: `skill`, mode: `psyblast` }) : notready\n      break;\n    case `curse`:\n      onClick = skillReady ? () => attack({ type: `skill`, mode: `curse` }) : notready\n      break;\n    case `heal`:\n      onClick = skillReady ? () => attack({ type: `skill`, mode: `heal` }) : notready\n      break;\n    case `reflect`:\n      onClick = skillReady ? () => attack({ type: `skill`, mode: `reflect` }) : notready\n      break;\n  \n    default:\n      break;\n  }\n  \n  // Display component\n  return (\n    <button className={buttonClass} onClick={onClick}>\n      {note}\n      <ItemVisual item={gameSettings.icons[type][0]} level={gameSettings.icons[type][1]} />\n      <Bar current={current} ready={ready} />\n    </button>\n  )\n}\n\n// Applying propTypes definition and default values\nSkillButton.propTypes = propTypes\nSkillButton.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(SkillButton)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n/**\n  * @desc Item visual\n*/\n\nconst propTypes = {\n  element: PropTypes.string.isRequired\n}\n\nconst defaultProps = {\n}\n\nconst Element = ({ element, big }) => {\n\n  // Component styling\n  const defaultClasses = `elementWrapper`\n  const bigClasses = big ? \"big\" : \"\"\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses, bigClasses, element].filter(val => val).join(` `)\n\n  // Display component\n  return (\n    <span className={itemClasses} />\n  )\n}\n\n// Applying propTypes definition and default values\nElement.propTypes = propTypes\nElement.defaultProps = defaultProps\n\n// Exporting as default\nexport default Element\n","/* eslint-disable react/jsx-no-target-blank */\nimport React from 'react'\nimport { connect } from \"react-redux\"\nimport Item from '../../ui/battle/Item'\nimport ActionButton from '../../ui/battle/ActionButton'\nimport SkillButton from '../../ui/battle/SkillButton'\nimport Element from '../../ui/battle/Element'\n\nimport fumble from '../../pics/ui/fumble.png'\nimport critical from '../../pics/ui/critical.png'\nimport death from '../../pics/ui/death.png'\n\n/**\n  * @desc Help Modal\n*/\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst ModalHelp = ({player}) => {\n\n  let skillButtons = []\n  for (let [key, value] of Object.entries(player.skills)) {\n      skillButtons.push(<SkillButton type={key} current={value.current} ready={value.ready} />)\n  }\n\n  // Display component\n  return (\n    <div className=\"help\" id=\"top\">\n      <p className=\"title\">\n        Help\n      </p>\n      <p>Choose a help topic</p>\n      <div className=\"helpMenu\">\n        <a className=\"button\" href=\"#game\">The game</a>\n        <a className=\"button\" href=\"#stats\">Stats</a>\n        <a className=\"button\" href=\"#levelling\">Levelling</a>\n        <a className=\"button\" href=\"#equipment\">Equipment</a>\n        <a className=\"button\" href=\"#weapons\">Weapons</a>\n        <a className=\"button\" href=\"#hit\">Hit & damage system</a>\n        <a className=\"button\" href=\"#elements\">Elemental damage</a>\n        <a className=\"button\" href=\"#attack\">Attack</a>\n        <a className=\"button\" href=\"#defend\">Defend</a>\n        <a className=\"button\" href=\"#skills\">Skills</a>\n        <a className=\"button\" href=\"#items\">Items</a>\n        <a className=\"button\" href=\"#elite\">Elite monsters</a>\n      </div>\n\n      <div className=\"separator\" id=\"game\" />\n      <div className=\"title\">The game</div>\n\n      <p>MHD20 is a turn based battle game, using a D20 system loosely based on the classic Dungeon&Dragons tabletop game</p>\n      <p>Your goal is to fight your way to the final boss, in a minimum number of turns.</p>\n      <p>If you die, you can keep your gold and some of your best gear, and retry.</p>\n\n      <div className=\"separator\" id=\"stats\" />\n      <div className=\"title\">Stats</div>\n\n      <p>Your character is described by 5 stats</p>\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td>STR</td>\n              <td>\n                  <div className=\"sectiontitle\">Strength</div>\n                  Basic stat for physical damage\n                </td>\n          </tr>\n          <tr>\n              <td>DEX</td>\n              <td>\n                  <div className=\"sectiontitle\">Dexterity</div>\n                  Determine if you will manage to hit your opponent and if your opponent will be able to hit you\n                </td>\n          </tr>\n          <tr>\n              <td>CON</td>\n              <td>\n                  <div className=\"sectiontitle\">Constitution</div>\n                  Determines how much physical damage you can absorb, and also used for Hit points count\n                </td>\n          </tr>\n          <tr>\n              <td>MAG</td>\n              <td>\n                  <div className=\"sectiontitle\">Magic</div>\n                  Basic stats for magical damage, magical hit and magical resistance\n                </td>\n          </tr>\n          <tr>\n              <td>LCK</td>\n              <td>\n                  <div className=\"sectiontitle\">Luck</div>\n                  Each luck points lower the critical hit minimal score, for any attack\n                </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"equipment\" />\n      <div className=\"title\">Equipment</div>\n\n      <p>You will find new equipment on your opponent's dead body, or in the shop between each fight.</p>\n      <p>Equipment quality follows the beloved Diablo scale.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                <Item item={{id: 1, quality: \"normal\", type: \"belt\", score: 1}} />\n                  <span className=\"color_quality_normal\">Normal</span>\n                </td>\n              <td>\n                  Trivial items with low value and poor quality\n                </td>\n          </tr>\n          <tr>\n            <td className=\"center\">\n                <Item item={{id: 1, quality: \"magic\", type: \"armor\", score: 8}} />\n                <span className=\"color_quality_magic\">Magic</span>\n            </td>\n              <td>\n                  Low tier bonus but some of them may be interesting\n                </td>\n          </tr>\n          <tr>\n            <td className=\"center\">\n                <Item item={{id: 2, quality: \"rare\", type: \"book\", score: 16}} />\n                <span className=\"color_quality_rare\">Rare</span>\n            </td>\n              <td>\n                  Quality gear with good stats bonus\n                </td>\n          </tr>\n          <tr>\n            <td className=\"center\">\n                <Item item={{id: 163, quality: \"legendary\", type: \"helmet\", score: 25}} />\n                <span className=\"color_quality_legenday\">Legendary</span>\n            </td>\n              <td>\n                  Best available loot with high value\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                <Item item={{char: `MAG`, id: 57, quality: \"unique\", type: \"unique\", score: 35, element: `darkness`}} />\n                <span className=\"\">Set items</span>\n              </td>\n              <td>\n                  Shops sells super expensive unique items, with bonus increasing as you complete the set\n                </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"weapons\" />\n      <div className=\"title\">Weapons</div>\n      <p>Weapons damage uses the classic xD+x dice RPG system, examples :</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                <Item item={{char: `STR`, id: 1, quality: \"normal\", type: \"sword\", score: `1d6+4`, element: \"none\", cost: 5}} noPlus />\n                </td>\n              <td>\n                  This basic sword adds the result of 1 six sided dice + 4 additional points to your STR score. Using this sword costs 5 stamina points.\n                </td>\n          </tr>\n          <tr>\n            <td className=\"center\">\n                <Item item={{char: `MAG`, id: 5, quality: \"legendary\", type: \"sceptre\", score: `7d12+10`, element: `fire`, cost: 7, sharpen: 2}} noPlus />\n                </td>\n            <td>\n                  This nice magic wand adds the result of 7 D12 + 10 points to your MAG score. It also deals additional fire damage (orange dot), and has already been enchanted twice (2 diamonds). Using the wand costs 7 mana points.\n            </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"hit\" />\n      <div className=\"title\">Hit system</div>\n\n      <p>Hitting, and dealing damage, simply relies on a D20 roll.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center color_action_physical\">\n                Physical hit\n                </td>\n              <td>\n                <div className=\"rule\">20 - (10 + your DEX - his DEX)</div>\n                  For example if you have 13 DEX, and your opponent has 7 : 20-(10+13-7) = 4. You'll have to roll more than 4 on a D20 to hit : easy.\n                </td>\n          </tr>\n          <tr>\n            <td className=\"center color_action_physical\">\n                Physical damage\n            </td>\n            <td>\n                <div className=\"rule\">your STR - his CON</div>\n                Base damage is just STR versus CON. Then we add items damage, critical damage, and elemental damage.\n            </td>\n          </tr>\n          <tr>\n              <td className=\"center color_action_magical\">\n                Magical hit\n                </td>\n              <td>\n                <div className=\"rule\">20 - (10 + your MAG - his MAG)</div>\n                  For example if you have 6 MAG, and your opponent has 16 : 20-(10+6-13) = 17. You'll have to roll more than 17 on a D20 to hit.\n                </td>\n          </tr>\n          <tr>\n          <td className=\"center color_action_magical\">\n            Magical damage\n                </td>\n                <td>\n                    <div className=\"rule\">your MAG - his MAG</div>\n                    Base damage is simply MAG versus MAG. Then we again add items damage, critical damage, and elemental damage.\n                </td>\n          </tr>\n          <tr>\n          <td className=\"center\">\n              <img src={fumble} alt=\"fumble\" />\n                Fumble\n                </td>\n                <td>\n                    Rolling a super low value, like a 1, means an automatic failure and most of the time penalties.\n                </td>\n          </tr>\n          <tr>\n          <td className=\"center\">\n              <img src={critical} alt=\"critical\" />\n            Critical\n                </td>\n                <td>\n                    Rolling a natural 20, or even less if your LCK score is high, means an automatic success and most of the time additional bonus.\n                </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"attack\" />\n      <div className=\"title\">Attack</div>\n\n      <p>Attacks are the basic moves, and the major way to deal damage.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"attack\" /></div>\n                </td>\n              <td>\n                Physical attack, using physical (red) weapon. Each attack uses stamina, when the stamina bar is low, player can't attack. % number is the global chance to hit.\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"specialattack\" /></div>\n                </td>\n              <td>\n                Taking hits and losing HP make the special attack bar grow : when the bar is full player may use a devastating blow.\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"cast\" /></div>\n                </td>\n              <td>\n                Spell cast, using magical (blue) weapon. Each attack uses mana, when the mana bar is low, player can't cast. % number is the global chance to hit.\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"specialcast\" /></div>\n                </td>\n              <td>\n                Casting spells make the master spell cast bar grow : when the bar is full, a powerful spell can be used.\n                </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"defend\" />\n      <div className=\"title\">Defend</div>\n\n      <p>Two options, when you need to wait a turn or two, or prepare a better attack in your next turn.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"block\" /></div>\n                </td>\n              <td>\n                You take a defensive stance, meaning you'll be harder to hit (DEX and CON bonus), stamina also regenerates faster. Your MAG will be impacted a bit, and opponent gets a STR bonus.\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\"><ActionButton type=\"focus\" /></div>\n                </td>\n              <td>\n                You try to focus on your next magical spell : your MAG improves a great deal, but your STR and DEX are lowered.\n                </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"items\" />\n      <div className=\"title\">Items</div>\n\n      <p>Items can be purchased in the shop : you can use as much items as you want during your durn, and they'll never fail, but they can be expensive. You can carry up to 6 items.</p>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"levelling\" />\n      <div className=\"title\">Levelling</div>\n\n      <p>Winning battles increases your experience level, allowing you to carry more and more of your precious equipement to the next run : you can carry one more item each time you level up!</p>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"elements\" />\n      <div className=\"title\">Elements</div>\n\n      <p>Monsters are all based on an element : <span className=\"element_fire\">fire</span>, <span className=\"element_water\">water</span>, <span className=\"element_earth\">earth</span>, <span className=\"element_light\">light</span> or <span className=\"element_darkness\">darkness</span>.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center horizontal\">\n                <Element element=\"fire\" />\n                <Item item={{char: `STR`, id: 1, quality: \"normal\", type: \"sword\", score: `1d6+4`, element: \"fire\", cost: 5}} noPlus />\n              </td>\n              <td>\n                Bonus against <span className=\"element_earth\">earth</span> creatures.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center horizontal\">\n                <Element element=\"water\" />\n                <Item item={{char: `MAG`, id: 1, quality: \"normal\", type: \"mace\", score: `1d6+4`, element: \"water\", cost: 5}} noPlus />\n              </td>\n              <td>\n                Bonus against <span className=\"element_fire\">fire</span> creatures.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center horizontal\">\n                <Element element=\"earth\" />\n                <Item item={{char: `MAG`, id: 1, quality: \"normal\", type: \"sceptre\", score: `1d6+4`, element: \"earth\", cost: 5}} noPlus />\n              </td>\n              <td>\n                Bonus against <span className=\"element_water\">water</span> creatures.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center horizontal\">\n                <Element element=\"light\" />\n                <Item item={{char: `STR`, id: 19, quality: \"unique\", type: \"unique\", score: `1d6+4`, element: \"light\", cost: 5}} noPlus />\n              </td>\n              <td>\n                Bonus against <span className=\"element_darkness\">darkness</span> creatures.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center horizontal\">\n                <Element element=\"darkness\" />\n                <Item item={{char: `MAG`, id: 12, quality: \"unique\", type: \"unique\", score: `1d6+4`, element: \"darkness\", cost: 5}} noPlus />\n              </td>\n              <td>\n                Bonus against everything, but only randomly.\n              </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <div className=\"separator\" id=\"elite\" />\n      <div className=\"title\">Elite monsters</div>\n\n      <p>You have an increasing chance of meeting the tougher, elite version of any monster. They will be harder to beat but will also give better rewards.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                <Element element=\"elite\" />\n              </td>\n              <td>\n                Elite monster marker\n              </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n      \n      <div className=\"separator\" id=\"skills\" />\n      <div className=\"title\">Skills</div>\n\n      <p>Skills may fail and needs a few turn to recharge, but they're free and may save a desperate battle.</p>\n\n      <table className=\"help\">\n          <tbody>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[0]}</div>\n                </td>\n              <td>\n                Try to heal and get part of your hit points back. Results may vary from nothing to an almost full heal.\n                </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[1]}</div>\n                </td>\n              <td>\n                Use some dirty trick to stun your opponent, making him skip one or more turns.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[2]}</div>\n                </td>\n              <td>\n                Attempt to break an enemy's item : less loot, but less ennemy threat also.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[3]}</div>\n                </td>\n              <td>\n                If this skills succeeds, next damage dealt to player will be applyed to opponent. If the skill fails, next damage may be boosted.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[4]}</div>\n                </td>\n              <td>\n                Attempt to fry opponent's mind, heavily crippling his MAG and making spellcasting opponents useless.\n              </td>\n          </tr>\n          <tr>\n              <td className=\"center\">\n                  <div className=\"buttons\">{skillButtons[5]}</div>\n                </td>\n              <td>\n                Use an ancient curse on opponent, highly rising the fumble limit of his dice rolls for a few turns.\n              </td>\n          </tr>\n          </tbody>\n      </table>\n      <a className=\"backToTop\" href=\"#top\">Back to menu</a>\n\n      <img className=\"death\" src={death} alt=\"You lose\" />\n\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalHelp)\n","/* eslint-disable react/jsx-no-target-blank */\nimport React from 'react'\nimport { connect } from \"react-redux\"\nimport SkillButton from '../../ui/battle/SkillButton'\nimport help from '../../pics/ui/help.svg'\n\n/**\n  * @desc Help Modal\n*/\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst ModalHelp = ({player}) => {\n\n  let skillButtons = []\n  for (let [key, value] of Object.entries(player.skills)) {\n      skillButtons.push(<SkillButton type={key} current={value.current} ready={value.ready} />)\n  }\n\n  // Display component\n  return (\n    <div className=\"help\" id=\"top\">\n      <p className=\"title\">\n        Welcome to MHD20 !\n      </p>\n  \n      <p>If you feel lost, help and user guide are located in the upper left corner of the app : <br /><img className=\"helpInline\" src={help} alt=\"help menu\" /></p>\n      <p>Have fun!</p>\n\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalHelp)\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\"\n\nimport ModalAbout from './ModalAbout'\nimport ModalSettings from './ModalSettings'\nimport ModalReset from './ModalReset'\nimport ModalHelp from './ModalHelp'\nimport ModalFirst from './ModalFirst'\n\nimport '../../css/modal.scss'\nimport closeIcon from '../../pics/ui/close.svg'\n\n/**\n  * @desc Basic modal window\n*/\n\nconst mapStateToProps = state => {\n  return {\n    data: state\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst modalContent = (content) => {\n  switch (content) {\n    case `about`:\n      return <ModalAbout key=\"modalAbout\" />\n    case `help`:\n      return <ModalHelp key=\"modalHelp\" />\n    case `settings`:\n      return <ModalSettings key=\"modalSettings\" />\n    case `reset`:\n      return <ModalReset key=\"modalReset\" />\n    case `first`:\n      return <ModalFirst key=\"modalFirst\" />\n    default:\n      break;\n  }\n}\n\nconst Modal = ({ content, close, display }) => {\n\n  const handleChildClick = function(e) {\n    e.stopPropagation();\n  }\n\n  // Display component\n  if (display) return [\n    <TransitionGroup component={null}>\n      <CSSTransition\n        timeout={300}\n        classNames={\"fade\"}\n        appear\n        leave\n      >\n        <div key=\"modalWrapper\" className=\"modalWrapper\" onClick={close}>\n          <div key=\"modal\" className=\"modal\" onClick={handleChildClick}>\n            <button key=\"closeModal\" id=\"closeModal\" className=\"option\" onClick={close}><img src={closeIcon} alt=\"Close\" /></button>\n            {modalContent(content)}\n          </div>\n        </div>\n      </CSSTransition>\n    </TransitionGroup>\n  ]\n  else return null\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { clog } from '../utils/utils'\n\nimport { setGameState, settings } from '../redux/actions/index'\nimport { version } from '../conf/version'\nimport sigil from '../pics/ui/sigil-white.svg'\nimport coverart from '../pics/ui/welcome.png'\nimport logo from '../pics/ui/logo.png'\nimport logo2 from '../pics/ui/logo2.png'\n\n// Import UI utils\nimport Modal from '../ui/general/Modal'\n\nconst mapStateToProps = state => {\n  return {\n    game: state.game,\n    player: state.player,\n    opponent: state.opponent,\n    playerTurn: state.game.playerTurn,\n    log: state.log,\n    score: state.score,\n    currentVersion: state.version\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Welcome extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      openModal: false\n    }\n  }\n\n  componentDidMount() {\n\n  }\n\n  openModal = (modal) => {\n    this.setState({\n      openModal: modal\n    })\n  }\n\n  closeModal = () => {\n    this.setState({\n      openModal: false\n    })\n  }\n\n  newGame = () => {\n    const { setGameState, settings, player } = this.props\n    clog(`newGame`, `function`)\n    settings({ setting: `createPlayer`, style: 'warrior' })\n    settings({ setting: `preference`, type: `playerName`, value: player && player.name ? player.name : `` })\n    setGameState({ state: `gameCreate` })\n  }\n\n  render() {\n    const { openModal } = this.state\n    const { setGameState, game, player, score, currentVersion } = this.props\n\n    // Start button\n    let startButton\n    if (game.quitState && player && player.name) {\n      startButton = <button className=\"navigation\" onClick={() => setGameState({ state: game.quitState })}>Continue<span>{player.name} - Run #{score.game.runs} - lvl. {game.level}</span></button>\n    } else {\n      // Secondary start button\n      let innerStartButton\n      if (score && score.game && score.game.runs) innerStartButton = <>New run <span>{player.name} - Run #{score.game.runs + 1}</span></>\n      else innerStartButton = \"Start new game\"\n      startButton = <button className=\"navigation\" onClick={() => this.newGame()}>{innerStartButton}</button>\n    }\n    \n    return [\n      <Modal key=\"modalReset\" content=\"reset\" display={openModal === `reset`} close={this.closeModal} />,\n      <div key=\"mainWrapper\" className=\"mainWrapper wideScreen\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea\">\n              <img src={coverart} className=\"coverArt\" alt=\"Cover art\" />\n              <div className=\"homeSigil\">\n                <img src={sigil} alt=\"Sigil\" />\n              </div>\n              <div className=\"logoWrapper\">\n                <div className=\"logoCombine\">\n                  <img src={logo2} className=\"logo2\" alt=\"Logo2\" />\n                  <img src={logo} className=\"logo\" alt=\"Logo\" />\n                </div>\n              </div>\n            {/* \n            <button className=\"navigation\" onClick={() => setGameState({ state: `battleIntro` })}>Battle intro demo</button>\n            <button className=\"navigation\" onClick={() => setGameState({ state: `defeat` })}>Defeat demo</button> \n            <button className=\"navigation\" onClick={() => setGameState({ state: `victory` })}>Victory demo</button>\n            <button className=\"navigation\" onClick={() => setGameState({ state: `hallOfFame` })}>HOF</button>\n            <button className=\"navigation\" onClick={() => setGameState({ state: `monstersDemo` })}>Monsters demo</button>   \n            <button className=\"navigation\" onClick={() => setGameState({ state: `hallOfFame` })}>HOF</button>\n            <button className=\"navigation\" onClick={() => setGameState({ state: `monstersDemo` })}>Monsters demo</button>   \n          */}\n            \n          </div>\n          <div className=\"actionArea\">\n            {startButton}\n            {score && score.game && score.game.runs && <button className=\"textOnly\" onClick={() => this.openModal(`reset`)}>New game</button>}\n            <div className=\"version\">{currentVersion} {version[0].code} - <button className=\"textOnly inline\" onClick={() => setGameState({ state: `releaseNotes` })}>Release notes</button></div>\n          </div>\n        </div>\n      </div>\n    ]\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Welcome)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport { setGameState, settings } from '../redux/actions/index'\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass AllReset extends Component {\n  componentDidMount() {\n    const { setGameState } = this.props\n    setTimeout(() => {\n      setGameState({ state: `welcome` })\n    }, 1000);\n  }\n\n  render() {\n    return [\n      <div key=\"mainWrapper\" className=\"mainWrapper wideScreen\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea\">\n             Game erased !\n          </div>\n        </div>\n      </div>\n    ]\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllReset)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport { setGameState, settings } from '../redux/actions/index'\nimport { version } from '../conf/version'\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass ReleaseNotes extends Component {\n  componentDidMount() {\n\n  }\n\n  render() {\n    const { setGameState } = this.props\n\n    // Diplay updates posts\n    let releaseNotes = []\n    for (let index = 0; index < version.length; index++) {\n      const element = version[index];\n      \n      // Changes loop\n      let changesList = []\n      for (let newsIndex = 0; newsIndex < element.changes.length; newsIndex++) {\n        const change = element.changes[newsIndex];\n        changesList.push(\n          <li key={`change_${newsIndex}`} className=\"change\">{change}</li>\n        )\n      }\n\n      releaseNotes.push(\n        <div className=\"note\" key={`note_${index}`}>\n          <div className=\"title\">{element.version} \"{element.code}\"</div>\n          <div className=\"date\">{element.date}</div>\n          {element.reset === `run` && <div className=\"reset\">Major changes somewhere : your current run has to be reset. Sorry!</div>}\n          <div className=\"description\">{element.note}</div>\n          <ul className=\"changesList\">\n            {changesList}\n          </ul>\n        </div>\n      )\n    }\n\n    return [\n      <div key=\"mainWrapper\" className=\"mainWrapper wideScreen\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea releaseNotes\">\n            <div className=\"notes\">\n              <div className=\"pagetitle\">Game updates !</div>\n              <div>Release notes</div>\n              <div className=\"separator\" />\n                {releaseNotes}\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `welcome` })}>Ok !</button>\n          </div>\n        </div>\n      </div>\n    ]\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReleaseNotes)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport { getStat, listBuff } from '../../actions/combat/stats'\nimport { setCharToElements } from \"../../conf/settings_items\"\n\n/**\n  * @desc Caracs bar for player and monster\n*/\n\nconst propTypes = {\n  opponent: PropTypes.bool\n}\n\nconst defaultProps = {\n  opponent: false\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state\n  }\n}\n\nconst StatCounter = (char, activePlayer) => {\n\n  // Get stats values\n  let stat = getStat(activePlayer, char)\n  const { natural, temporary, items } = stat\n\n  let currentStatValue = natural + temporary\n\n  // Currently active bushs for UI\n  let uiBuffs = listBuff(char, activePlayer)\n  let displayBuffs = []\n  let displaySets = []\n  let setItemBonusDisplayed = []\n\n  for (let index = 0; index < uiBuffs.length; index++) {\n    const uiBuff = uiBuffs[index]\n    const uiBuffDirection = uiBuff.value > 0 ? `up` : `down`\n\n    // Set items have a special display\n    if (uiBuff.origin === `setItems`) {\n      if (setItemBonusDisplayed.indexOf(uiBuff.stat) === -1) {\n        displaySets.push(\n          <span key={`buff_ui_${index}`} className={`setBuff`}>\n            {activePlayer.setItems[setCharToElements[uiBuff.stat]]}\n          </span>\n        )\n        setItemBonusDisplayed.push(uiBuff.stat)\n      } \n    } \n    // Other malus/bonus display\n    else {\n      displayBuffs.push(\n        <span key={`buff_ui_${index}`} className={`statBuff ${uiBuff.origin} ${uiBuffDirection}`} />\n      )\n    }\n  }\n\n  let variationClasses = ``\n  if (currentStatValue > natural) variationClasses = `up`\n  else if (currentStatValue < natural) variationClasses = `down`\n\n  // Value glow for sets\n  let setGlow = setItemBonusDisplayed.indexOf(char) !== -1 ? \"text_glow_\"+setCharToElements[char] : ``\n\n  const itemClasses = [\"statWrapper\", variationClasses].filter(val => val).join(` `)\n\n  return (\n    <div>\n      <div className={itemClasses}>\n        <div className={setGlow}>{currentStatValue + items}</div>\n        <div className=\"uiBuffWrapper\">\n          {displayBuffs}\n        </div>\n      </div>\n      <span className={`char ${char}`}>{char} {displaySets}</span>\n    </div>\n  )\n}\n\nconst Stats = ({ opponent, data, forceData }) => { \n  // Current player\n  let activePlayer = opponent ? data.opponent : data.player\n\n  // Override store\n  if (forceData) activePlayer = forceData\n\n  // Component styling\n  const defaultClasses = `playerStats`\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n  // Display component\n  return (\n    <div className={itemClasses}>\n      {StatCounter(`STR`, activePlayer)}\n      {StatCounter(`DEX`, activePlayer)}\n      {StatCounter(`CON`, activePlayer)}\n      {StatCounter(`MAG`, activePlayer)}\n      {StatCounter(`LCK`, activePlayer)}\n    </div>\n  )\n}\n\n// Applying propTypes definition and default values\nStats.propTypes = propTypes\nStats.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(Stats)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport Item from './Item'\n\n/**\n  * @desc items bar for player and opponent\n*/\n\nconst propTypes = {\n  animations: PropTypes.bool,\n  opponent: PropTypes.bool\n}\n\nconst defaultProps = {\n  animations: true,\n  opponent: false\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state\n  }\n}\n\nconst Items = ({ data, opponent, forceData, animations }) => {\n\n  let activePlayer = opponent ? data.opponent : data.player\n\n  // Override store\n  if (forceData) activePlayer = forceData\n\n  // Component styling\n  const defaultClasses = `playerItems`\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n  function checkLegacy(type, char, legacy) {\n    let effect\n    if (legacy && legacy[type] && legacy[type][char]) effect = `legacy`\n    return effect\n  }\n  \n  // Display component\n  return (\n    <div className={itemClasses}>\n      <Item item={activePlayer.items.STR} effect={checkLegacy(`items`, `STR`, data.game.legacy)} animations={animations} />\n      <Item item={activePlayer.items.DEX} effect={checkLegacy(`items`, `DEX`, data.game.legacy)} animations={animations} />\n      <Item item={activePlayer.items.CON} effect={checkLegacy(`items`, `CON`, data.game.legacy)} animations={animations} />\n      <Item item={activePlayer.items.MAG} effect={checkLegacy(`items`, `MAG`, data.game.legacy)} animations={animations} />\n      <Item item={activePlayer.items.LCK} effect={checkLegacy(`items`, `LCK`, data.game.legacy)} animations={animations} />\n    </div>\n  )\n}\n\n// Applying propTypes definition and default values\nItems.propTypes = propTypes\nItems.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(Items)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState, settings } from '../redux/actions/index'\nimport Item from '../ui/battle/Item'\nimport Stats from '../ui/battle/Stats'\nimport Items from '../ui/battle/Items'\nimport { clog } from '../utils/utils'\nimport { getLevelFromXp } from '../actions/score/score'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    game: state.game,\n    score: state.score\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass GameCreate extends Component {\n\n  constructor(props) {\n    super(props);\n    const { player } = this.props\n\n    this.state = { \n      name: player && player.name ? player.name : ``,\n      baseStyle: 'warrior'\n    }\n  }\n\n  handleChange = (event) => {\n    this.setState({ name: event.target.value })\n  }\n\n  setStyle = (baseStyle) => {\n    const { settings } = this.props\n    clog(`setStyle`, `function`)\n    settings({ setting: `createPlayer`, style: baseStyle })\n    this.setState({ baseStyle })\n    return false\n  }\n\n  startGame = () => {\n    const { setGameState, settings } = this.props\n    const { name } = this.state\n    clog(`startGame`, `function`)\n    // Store name\n    settings({ setting: `preference`, type: `playerName`, value: name })\n    // Reset legacy\n    settings({ setting: `deleteLegacy` })\n    settings({ setting: `resetLevel` })\n    // Forge uniques\n    settings({ setting: `forgeUniques` })\n    // Move game state\n    setGameState({ state: `levelTransition` })\n  }\n\n  checkLegacy(type, char) {\n    const { game } = this.props\n    let effect\n    if (game.legacy && game.legacy[type] && game.legacy[type][char]) effect = `legacy`\n    return effect\n  }\n\n  render() {\n\n    const { player, score } = this.props\n    const { name, baseStyle } = this.state\n\n    const goldIcon = {\n      id: 5,\n      score: player.gold,\n      type: \"coins\"\n    }\n\n    // Starting items\n    let instants = []\n    for (let index = 0; index < player.instants.length; index++) {\n      const value = player.instants[index]\n      instants.push(\n        <Item\n          key={`instant_${index}`}\n          item={value}\n          displayChar={false}\n          noPlus\n        />\n      )\n    }\n    \n    return (\n      <div className=\"mainWrapper wideScreen\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea shopWrapper highIndex\">\n            {score && score.game && score.game.runs\n              ? <><div className=\"text-big\">{name}</div><div style={{marginTop: `5px`}}>Run #{score.game.runs + 1} - XP Level {getLevelFromXp(player.xp)}</div></>\n              : <><label>Your name</label><input type=\"text\" name=\"name\" value={name} onChange={this.handleChange} autoComplete=\"off\" /></>\n            }\n            <div className=\"profileSelector\">\n              <button onClick={() => this.setStyle(`warrior`)} className={baseStyle !== `warrior` ? `third-transparent` : ``}>Warrior</button>\n              <button onClick={() => this.setStyle(`mage`)} className={baseStyle !== `mage` ? `third-transparent` : ``}>Mage</button>\n              <button onClick={() => this.setStyle(`thief`)} className={baseStyle !== `thief` ? `third-transparent` : ``}>Thief</button>\n            </div>\n            <label className=\"hideOnSmall\">Stats, gear and <span className=\"legacyColor\">previous run</span> items </label>\n            <div className=\"profileStats\">\n              <Stats />\n              <Items animations={false} />\n            </div>\n\n            <span className=\"subtitle hideOnSmall\">Weapons</span>\n            <span className=\"subtitle showOnSmall\">Weapons and start items</span>\n            <div className=\"playerItems\">\n              <Item item={player.weapons[`STR`]} effect={this.checkLegacy(`weapons`, `STR`)} />\n              <Item item={player.weapons[`MAG`]} effect={this.checkLegacy(`weapons`, `MAG`)} />\n            </div>\n\n            <span className=\"subtitle hideOnSmall\">Start items level {getLevelFromXp(player.xp)}</span>\n            <div className=\"playerItems small_margin\">\n              {instants}\n            </div>\n\n            <span className=\"subtitle hideOnSmall\">Gold</span>\n            <div className=\"goldLoot noMargin noPadding\">\n              <Item item={goldIcon} effect=\"new\" animateNumber noPlus />\n            </div>\n\n          </div>\n          <div className=\"actionArea oneitem\">\n            <button \n              className=\"navigation\" \n              onClick={() => this.startGame()}\n              disabled={name.length === 0}\n            >\n              Start game\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GameCreate)\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport sigil from '../../pics/ui/sigil.svg'\n\n/**\n  * @desc Display elite picture in the background\n*/\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst TurnIndicator = () => {\n\n  // Component styling\n  const defaultClasses = `eliteIndicator`\n\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n  return (\n    <div className={itemClasses}>\n      <img src={sigil} alt=\"Elite background\" />\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(TurnIndicator)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport * as Vibrant from 'node-vibrant'\n\nimport EliteBackground from './EliteBackground'\nimport { monsterPic, monsterInfo } from '../../monsters/monster'\n\n/**\n  * @desc Functional opponent block, also smaller\n*/\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  outline: PropTypes.oneOf(['shade', 'half', 'bright']),\n  elite: PropTypes.bool.isRequired\n}\n\nconst defaultProps = {\n\n}\n\nclass Monster extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      portraitReady: false,\n      color: {\n        vibrant: `black`,\n        darkVibrant: `rgba(0, 0, 0, 0.4)`,\n        darkMuted: `rgba(0, 0, 0, 0.4)`\n      }\n    }\n  }\n\n  fetchPalette = (imgSrc) => {\n    Vibrant.from(imgSrc).getPalette()\n      .then(palette => {\n        this.setState({\n          color: {\n            vibrant: palette.Vibrant.getHex(),\n            darkVibrant: palette.DarkVibrant.getHex(),\n            darkMuted: palette.DarkMuted.getHex()\n          }\n        })\n      })\n  }\n  \n  componentDidMount() {\n    const { type } = this.props\n    const pic = monsterPic(type)\n\n    // Fetch colors\n    this.fetchPalette(pic)\n\n    // Defining portrait or landscape mode for portraits\n    var portrait = document.getElementById('portrait_'+type)\n    let that = this\n\n    portrait.addEventListener('load', function () {\n      let mode = this.naturalWidth > this.naturalHeight ? `landscape` : `portrait`\n      that.setState({\n        mode,\n        portraitReady: true\n      })\n    })\n  }\n\n  // Display component\n  render() {\n    const { type, name, outline, elite, monsterList } = this.props\n    const { mode, portraitReady, color } = this.state\n    const data = monsterInfo(type, 1, monsterList)\n\n    // Get colors from scene\n    // const monstercolor = color.vibrant\n    const monsterbackground = color.darkVibrant\n\n    // Component styling\n    let defaultClasses = `opponentWrapper round turn static`\n    if (outline === `shade`) defaultClasses = `opponentWrapper outline turn static`\n    if (outline === `bright`) defaultClasses = `opponentWrapper outline bright turn static`\n    if (outline === `half`) defaultClasses = `opponentWrapper outline half turn static`\n  \n    // Add custom classes to defined classes\n    const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n    // Monster bg styling\n    const wrapperStyle = {\n      backgroundColor: monsterbackground\n    }\n\n    // Monster portrait size\n    const portraitStyling = mode === `portrait` ? {\n      width: `250px`,\n      top: data.verticalPosition ? `${data.verticalPosition}%` : `50%`\n    } : {\n      width: `350px`,\n      top: data.verticalPosition ? `${data.verticalPosition}%` : `50%`\n    }\n\n    // Monster display\n    const portraitClasses = portraitReady ? `portrait ready` : `portrait`\n\n    if (outline) {\n      return (\n        <div key=\"opponent\" className={itemClasses}>\n          <img id={`portrait_${type}`} className={portraitClasses} src={data.pic} style={portraitStyling} alt={name} />\n        </div>\n      )\n    } else {\n      return (\n        <div key=\"opponent\" className={itemClasses} style={wrapperStyle}>\n          {elite && <EliteBackground />}\n          <div className=\"infos\">\n            <div className=\"name\">\n              {elite \n                ? <div>{name}<div className=\"details\"><span className=\"eliteMarker\">Elite</span></div></div>\n                : <div>{name}<div className=\"details\"></div></div>\n              }\n            </div>\n          </div>\n          <img id={`portrait_${type}`} className={portraitClasses} src={data.pic} style={portraitStyling} alt={name} />\n        </div>\n      )\n    }\n  }\n}\n\n// Applying propTypes definition and default values\nMonster.propTypes = propTypes\nMonster.defaultProps = defaultProps\n\nexport default Monster\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState } from '../redux/actions/index'\nimport { gameSettings } from '../conf/settings'\nimport { getLevelFromXp } from '../actions/score/score'\nimport Monster from '../ui/battle/Monster'\nimport Element from '../ui/battle/Element'\n\nimport logo2 from '../pics/ui/logo2.png'\n\nconst mapStateToProps = state => {\n  return {\n    game: state.game,\n    player: state.player,\n    opponent: state.opponent,\n    score: state.score,\n    monsterList: state.monsters,\n    opponentMap: state.game.opponentMap,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass LevelTransition extends Component {\n\n  componentDidMount() {\n    document.getElementById('currentLevel').scrollIntoView({\n      behavior: 'instant',\n      block: 'center',\n      inline: 'center'\n    })\n  }\n  \n  render() {\n    const { game, player, opponent, setGameState, score, monsterList, opponentMap, loop } = this.props\n\n    // Legacy items count\n    const legacyItems = getLevelFromXp(player.xp)\n    // Monster tier render\n    const monsterTier = Math.ceil(game.level / (gameSettings.maxLevel / gameSettings.zones))\n\n    let logoStyle = { position: `relative` }\n\n    // Render roadmap\n    let roadmap = []\n    for (let level = 1; level <= gameSettings.maxLevel; level++) {\n     \n      if (level < game.level) {\n        // Past monster\n        roadmap.push(\n          <div key={`deadmonster_${level}`} className=\"deadMonster\">\n            <Monster\n              type={score.run.history[level - 1][0]}\n              name={score.run.history[level - 1][1]}\n              elite={score.run.history[level - 1][2]}\n              monsterList={monsterList}\n            />\n          </div>\n        )\n\n      } else if (level === game.level) {\n        let wrapperStyle = { filter: `hue-rotate(${Math.round(level * (360 / gameSettings.maxLevel))}deg)` }\n        // Current level\n        roadmap.push(\n          <div key={`currentlevel_${level}`} className=\"infoWrapper\" id=\"currentLevel\">\n            <Monster\n              type={opponent.job}\n              name={opponent.name}\n              elite={opponent.elite}\n              monsterList={monsterList}\n              outline=\"half\"\n            />\n            <div className=\"leftInfo\">\n              {loop ? <div>Final run</div> : <div>Run #{score.game.runs}</div>}\n              {score.run.round > 1 && <div>{score.run.round} rounds</div>}\n              {score.run.round <= 1 && <div>Game starts !</div>}\n              {!score.run.round && <div>Game starts !</div>}\n              <br />\n              {opponentMap[level-1].elite && <div><Element element=\"elite\"/></div> }\n              <div>{opponentMap[level-1].name}</div>\n            </div>\n            <div className=\"logoWrapper\" style={logoStyle}>\n              <div className=\"logoCombine\" style={wrapperStyle}>\n                <span>{level}</span>\n                <img src={logo2} className={level === game.level && \"logo2\"} alt=\"Logo2\" />\n              </div>\n            </div>\n            <div className=\"rightInfo\">\n              <div>XP lv. {legacyItems}</div>\n              {loop ? <div>Abyss monsters</div> : <div>Monsters lv. {monsterTier}</div>}\n            </div>\n          </div>\n        )\n      } else {\n        let wrapperStyle = { filter: `grayscale(100%)`, opacity: .4, transform: `scale(.8)` }\n        // Incoming level\n        roadmap.push(\n          <div key={`incominglevel_${level}`} className=\"nextLevel\">\n            <Monster\n              type={opponentMap[level-1].job}\n              name={opponentMap[level-1].name}\n              elite={opponentMap[level-1].elite}\n              monsterList={monsterList}\n              outline={level % 5 === 0 ? \"bright\" : \"shade\"}\n            />\n            <div className=\"leftInfo\">\n              {opponentMap[level-1].elite && level % 5 === 0 && <div><Element element=\"elite\"/></div> }\n              {level % 5 === 0 && <div>{opponentMap[level-1].name}</div> }\n            </div>\n            <div className=\"logoWrapper\" style={logoStyle}>\n              <div className=\"logoCombine\" style={wrapperStyle}>\n                <span>{level}</span>\n                <img src={logo2} className={level === game.level ? \"logo2\" : \"\"} alt=\"Logo2\" />\n              </div>\n            </div>\n            <div className=\"rightInfo\">\n              {level % 5 === 0 && <div>Boss</div> }\n            </div>\n          </div>\n        )\n      }\n    }\n\n    // Abyss or special ambiant color\n    let appBodyClass = loop ? `mainWrapper wideScreen abyss` : `mainWrapper wideScreen`\n    \n    return (\n      <div className={appBodyClass}>\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea levelTransition\">\n            <div className=\"roadmap\">\n              {roadmap}\n            </div>\n          </div>\n          <div className=\"actionArea fixed\">\n            <button className={\"navigation\"} onClick={() => setGameState({ state: `battleIntro` })}>Next opponent !</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LevelTransition)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport Item from './Item'\n\n/**\n  * @desc magical and physical weapons\n*/\n\nconst propTypes = {\n  opponent: PropTypes.bool\n}\n\nconst defaultProps = {\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state\n  }\n}\n\nconst Weapons = ({ data, opponent, forceData }) => {\n\n  let activePlayer = opponent ? data.opponent : data.player\n\n  // Override store\n  if (forceData) activePlayer = forceData\n\n  // Component styling\n  const defaultClasses = `playerWeapons`\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n  // Weapon quality\n\n\n  // Display component\n  return (\n    <div className={itemClasses}>\n      <Item item={activePlayer.weapons.STR} />\n      <Item item={activePlayer.weapons.MAG} />\n    </div>\n  )\n}\n\n// Applying propTypes definition and default values\nWeapons.propTypes = propTypes\nWeapons.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(Weapons)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport Stats from './Stats'\nimport Items from './Items'\nimport Weapons from './Weapons'\n\n/**\n  * @desc Wrapper for all stats and items\n*/\n\nconst propTypes = {\n  opponent: PropTypes.bool,\n  humanoid: PropTypes.bool\n}\n\nconst defaultProps = {\n  opponent: false,\n  humanoid: false\n}\n\nconst mapStateToProps = state => {\n  return {\n\n  }\n}\n\nconst StatsAndItems = ({ opponent, humanoid, forceData }) => { \n  // Component styling\n  const defaultClasses = `statsAndItemsWrapper`\n  // Add custom classes to defined classes\n  const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n  // Display component\n  return (\n    <div className={itemClasses}>\n      <div className=\"statsWrapper\">\n        <Stats opponent={opponent} forceData={forceData} />\n        <Items opponent={opponent} forceData={forceData} />\n      </div>\n      {(humanoid || !opponent) &&\n        <Weapons opponent={opponent} forceData={forceData} />\n      }\n    </div>\n  )\n}\n\n// Applying propTypes definition and default values\nStatsAndItems.propTypes = propTypes\nStatsAndItems.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(StatsAndItems)\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport { gameSettings } from \"../../conf/settings\"\nimport ItemVisual from './ItemVisual'\n\n/**\n  * @desc Wrapper for all stats and items\n*/\n\nconst propTypes = {\n\n}\n\nconst defaultProps = {\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    opponent: state.opponent\n  }\n}\n\nconst Alterations = ({ opponent }) => { \n\n  let alterations = []\n  // Parse current status modifiers\n  if (opponent.buff && opponent.buff.temporary) {\n    for (let index = 0; index < opponent.buff.temporary.length; index++) {\n      const element = opponent.buff.temporary[index]\n      alterations.push(\n        <div key={`alteration_${index}`} className=\"alteration\">\n          <span className=\"counter\">{element.rounds + 1}</span>\n          <ItemVisual item={gameSettings.icons[element.origin][0]} level={gameSettings.icons[element.origin][1]} />\n        </div>\n      )\n    }\n  }\n  // Display component\n  return alterations\n}\n\n// Applying propTypes definition and default values\nAlterations.propTypes = propTypes\nAlterations.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(Alterations)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport chroma from \"chroma-js\"\n\nimport Bar from './Bar'\nimport StatsAndItems from './StatsAndItems'\nimport Alterations from './Alterations'\nimport EliteBackground from './EliteBackground'\nimport Element from './Element'\n\n/**\n  * @desc Main opponent block\n*/\n\nconst mapStateToProps = state => {\n  return { \n    data: state.opponent,\n    level: state.game.level\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nclass Opponent extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      portraitReady: false\n    }\n  }\n  \n  componentDidMount() {\n    // Defining portrait or landscape mode for portraits\n    var portrait = document.getElementById('portrait')\n    let that = this\n\n    portrait.addEventListener('load', function () {\n      let mode = this.naturalWidth > this.naturalHeight ? `landscape` : `portrait`\n      that.setState({\n        mode,\n        portraitReady: true\n      })\n    })\n  }\n\n  // Display component\n  render() {\n    const { data, turn, color, intro } = this.props\n    const { mode, portraitReady } = this.state\n\n    // Get colors from scene\n    const monstercolor = color.vibrant\n    const monsterbackground = color.darkVibrant\n    const appbackground = `linear-gradient(${chroma(color.darkMuted).darken(1).desaturate(.4)} 50%, transparent)`; // color.darkMuted\n    // Component styling\n    const defaultClasses = `opponentWrapper`\n    const turnClasses = turn ? `` : `turn`\n    const introClasses = intro ? intro : ``\n  \n    const wrapperStyle = !turn ? {\n      backgroundColor: monsterbackground,\n      boxShadow: `rgba(0, 0, 0, 0.59) 0px 0px 11px 0px, 0px 0px 40px ${monstercolor}`\n    } : {\n      backgroundColor: monsterbackground,\n    }\n  \n    // Add custom classes to defined classes\n    const itemClasses = [defaultClasses, turnClasses, introClasses, data.element].filter(val => val).join(` `)\n\n    // Monster bg styling\n    const bgStyling = appbackground ? {\n      backgroundImage: appbackground\n    } : {\n\n    }\n\n    // Monster portrait size\n    const portraitStyling = mode === `portrait` ? {\n      width: `400px`,\n      top: data.verticalPosition ? `${data.verticalPosition}%` : `50%`\n    } : {\n      width: `500px`,\n      top: data.verticalPosition ? `${data.verticalPosition}%` : `50%`\n    }\n\n    // Monster display\n    const portraitClasses = portraitReady ? `portrait ready` : `portrait`\n\n    return [\n      <div key=\"monsterOverlay\" className=\"monsterOverlay\" style={bgStyling} />,\n      <div key=\"opponent\" className={itemClasses} style={wrapperStyle}>\n        {data.elite && <EliteBackground />}\n        <div className=\"infos\">\n          <div className=\"level\"></div>\n          <div className=\"name\">\n            <div>\n              {data.name}\n              <div className=\"details\">\n                {data.elite && <Element element=\"elite\" />}\n                {data.element && <Element element={data.element} />}\n              </div>\n            </div>\n            <div className=\"status\">\n              <Alterations />\n            </div>\n          </div>\n        </div>\n        <StatsAndItems opponent humanoid={data.humanoid} />\n        <Bar opponent type=\"hitPoints\" color={monstercolor} />\n        <img id=\"portrait\" className={portraitClasses} src={data.pic} style={portraitStyling} alt={data.name} />\n      </div>\n    ]\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Opponent)\n","import React from 'react'\nimport { connect } from \"react-redux\"\n\n/**\n  * @desc Encounter stats for opponents\n*/\n\nconst mapStateToProps = state => {\n  return {\n    history : state.score.alltime.opponents\n  }\n}\n\nconst Encounter = ({ type, history }) => {\n\n  let title, victories, defeats\n\n  if (history && history[type]) { \n    title = `Encounters : ${history[type].total}` \n    victories = history[type].victories \n      ? history[type].victories > 1 ? `${history[type].victories} victories` : `1 victory`\n      : ``\n    defeats = history[type].defeats \n      ? history[type].defeats > 1 ? `${history[type].defeats} defeats` : `1 defeat`\n      : ``\n  }\n  else { title = \"First encounter !\"}\n\n  return (\n    <div className=\"encountersWrapper\">\n      <div className=\"title\">{title}</div>\n      <div className=\"stats\">\n        {victories && <span >{victories}</span>}\n        {defeats && <span >{defeats}</span>}\n      </div>\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps)(Encounter)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport * as Vibrant from 'node-vibrant'\n\nimport { setGameState, settings } from '../redux/actions/index'\nimport Opponent from '../ui/battle/Opponent'\nimport Element from '../ui/battle/Element'\nimport Encounter from '../ui/battle/Encounter'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass BattleIntro extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      // portraitReady: false,\n      monstercolor: {\n        vibrant: `black`,\n        darkVibrant: `rgba(0, 0, 0, 0.4)`,\n        darkMuted: `rgba(0, 0, 0, 0.4)`\n      }\n    }\n  }\n\n  fetchPalette = (imgSrc) => {\n    Vibrant.from(imgSrc).getPalette()\n      .then(palette => {\n        this.setState({\n          monstercolor: {\n            vibrant: palette.Vibrant.getHex(),\n            darkVibrant: palette.DarkVibrant.getHex(),\n            darkMuted: palette.DarkMuted.getHex()\n          }\n        })\n      })\n  }\n\n  startBattle = () => {\n    const { monstercolor } = this.state\n    const { settings, setGameState } = this.props\n\n    settings({ setting: `setUIColor`, color: monstercolor })\n    setGameState({ state: `battle` })\n  }\n\n  componentDidMount() {\n    const { opponent } = this.props\n    this.fetchPalette(opponent.pic)\n  }\n  \n  render() {\n    \n    const { opponent, loop } = this.props\n    const { monstercolor } = this.state\n\n    // Abyss or special ambiant color\n    let appBodyClass = loop ? `mainWrapper wideScreen abyss` : `mainWrapper wideScreen`\n    \n    return (\n      <div className={appBodyClass}>\n        <div className=\"appWrapper\">\n          <Opponent color={monstercolor} intro=\"intro\" />\n          <div className=\"opponentIntro\">\n            <div className=\"name\">\n              {opponent.elite && loop && <span>Abyss</span>}\n              {opponent.elite && !loop && <span>Elite</span>}\n              {opponent.name}\n            </div>\n            <div className=\"details\">\n              {opponent.elite && <Element big element=\"elite\" />}\n              {opponent.element && <Element big element={opponent.element} />}\n              <Encounter type={opponent.job} />\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation bi_action\" onClick={() => this.startBattle()}>Start battle !</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BattleIntro)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState } from '../../redux/actions/index'\nimport { getLevelFromXp } from '../../actions/score/score'\nimport { getXpToLevel } from '../../actions/score/score'\nimport Bar from '../../ui/battle/Bar'\nimport death from '../../pics/ui/death.png'\nimport AnimatedNumber from \"animated-number-react\"\n\n/**\n  * @desc Display what happened when either player has lost the battle\n*/\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game,\n    playerTurn: state.game.playerTurn,\n    dataLogs: state.dataLogs\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass EndGame extends Component {\n  constructor(props) {\n    super(props)\n\n    const { player } = this.props\n\n    this.state = {\n      xpBarValue: player.xp\n    }\n  }\n\n  componentDidMount() {\n    const { player, opponent } = this.props\n    this.rollDelay = setTimeout(() => {\n      this.setState({\n        xpBarValue: player.xp + opponent.xp\n      })\n    }, 3500)\n  }\n\n  render() {\n\n    const { player, opponent, game, display, setGameState, dataLogs } = this.props\n    const { xpBarValue } = this.state\n\n    // Component styling\n    const defaultClasses = `endGame`\n\n    // Add custom classes to defined classes\n    const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n    // Level and xp animations\n    const playerLevel = getLevelFromXp(player.xp)\n    const playerNextLevel = getLevelFromXp(player.xp + opponent.xp)\n\n    let levelUp = playerNextLevel > playerLevel ? <span className=\"levelUp\">Level up!<br /><span>You can now save up to {playerNextLevel} items!</span></span> : ``\n\n    if (display) {\n      // If player is dead\n      let opponentNameStyle = {\n        color: game.uicolor.vibrant\n      }\n\n      if (player.hitPoints === 0) {\n        // Permadeath mode in loops\n        if (game.loop) {\n          return (\n            <div className={`${itemClasses} active abyss`}>\n              <div className=\"presentationArea\">\n                <div className=\"title defeat\">Final blow!</div>\n                <div className=\"subtitle\">\n                  {player.name} fought bravely, but the Abyss of Permadeath never loses.\n                </div>\n                <div className=\"subtitle\">\n                  <span style={opponentNameStyle}>{opponent.name}</span> won<br />\n                  {dataLogs.length - 1 > 1\n                    ? <span>{`${dataLogs.length - 1} rounds`}</span>\n                    : <span>{`${dataLogs.length - 1} round !`}</span>\n                  }\n                </div>\n                <img className=\"death\" src={death} alt=\"You lose\" />\n              </div>\n              <div className=\"actionArea\">\n                <button className=\"navigation\" onClick={() => setGameState({ state: `permadeath` })}>You're dead</button>\n              </div>\n            </div>\n          ) \n        }\n        // Normal retreat\n        else {\n          return (\n            <div className={`${itemClasses} active`}>\n              <div className=\"presentationArea\">\n                <div className=\"title defeat\">Defeat !</div>\n                <div className=\"subtitle\">\n                  You quickly flee the battle,<br />trying to save as much as you can.\n                </div>\n                <div className=\"subtitle\">\n                  <span style={opponentNameStyle}>{opponent.name}</span> won<br />\n                  {dataLogs.length - 1 > 1\n                    ? <span>{`${dataLogs.length - 1} rounds`}</span>\n                    : <span>{`${dataLogs.length - 1} round !`}</span>\n                  }\n                </div>\n                <img className=\"death\" src={death} alt=\"You lose\" />\n              </div>\n              <div className=\"actionArea\">\n                <button className=\"navigation\" onClick={() => setGameState({ state: `defeat` })}>Select saved items</button>\n              </div>\n            </div>\n          ) \n        }\n      }\n      // If opponent is dead\n      else if (opponent.hitPoints === 0) {\n        return (\n          <div className={`${itemClasses} active`}>\n            <div className=\"presentationArea\">\n              <div className=\"title\">Victory !</div>\n              <div className=\"xpBarWrapper\">\n                <div>+\n                  <AnimatedNumber\n                    formatValue={value => value.toFixed(0)}\n                    value={opponent.xp}\n                  /> XP\n                  {levelUp}\n                </div>\n                <div className=\"xpBar\">\n                  <div className=\"level\">Lvl.{getLevelFromXp(player.xp)}</div>\n                  <Bar type=\"xp\" current={xpBarValue > getXpToLevel(playerLevel + 1) ? getXpToLevel(playerLevel + 1) : xpBarValue} ready={getXpToLevel(playerLevel + 1)} />\n                  <div className=\"level\">Lvl.{getLevelFromXp(player.xp)+1}</div>\n                </div>\n              </div>\n              <div className=\"crackedImage\">\n                <img src={opponent.pic} alt={opponent.name} />\n              </div>\n              <div className=\"subtitle\">\n                You defeated\n                <div className=\"opponentName\" style={opponentNameStyle}>{opponent.name}</div>\n                {dataLogs.length - 1 > 1\n                  ? <span>in {`${dataLogs.length - 1} rounds`}</span>\n                  : <span>in only {`${dataLogs.length - 1} round !`}</span>\n                }\n              </div>\n            </div>\n            <div className=\"actionArea\">\n              <button className=\"navigation\" onClick={() => setGameState({ state: `victory` })}>Loot !</button>\n            </div>\n          </div>\n        ) \n      }\n    }\n    // Nothing to display\n    else return <div className={itemClasses} />\n  }\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(EndGame)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport { attack } from '../../redux/actions/index'\nimport ItemVisual from './ItemVisual'\n\n/**\n  * @desc Instant buttons\n*/\n\nconst propTypes = {\n  id: PropTypes.number\n}\n\nconst defaultProps = {}\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attack: payload => dispatch(attack(payload))\n  }\n}\n\nconst InstantButton = ({ id, attack, data, onSell }) => {\n\n  // Component styling\n  let onClick, icon, buttonClass, charges, label\n\n  if (data) {\n    icon = <ItemVisual item={data.type} level={data.id} />\n    charges = data.charges\n    label = data.label\n\n    // Switch different buttons\n    switch (data.effect) {\n      case `quickheal`:\n        onClick = () => attack({ type: `skill`, mode: `quickheal`, item: data, id: id })\n        break;\n      case `upgrade`:\n        onClick = () => attack({ type: `skill`, mode: `upgrade`, item: data, id: id })\n        break;\n      case `restore`:\n        onClick = () => attack({ type: `skill`, mode: `restore`, item: data, id: id })\n        break;\n      case `damage`:\n        onClick = () => attack({ type: `skill`, mode: `damage`, item: data, id: id })\n        break;\n      case `sharpen`:\n        onClick = () => attack({ type: `skill`, mode: `sharpen`, item: data, id: id })\n        break;\n      default:\n        break;\n    }\n    // Shop mode override\n    if (onSell) {\n      onClick = () => onSell(id, data)\n    }\n  } else {\n    buttonClass = \"disabled\"\n  }\n\n  const actionClass = [`instant`, buttonClass].filter(val => val).join(` `)\n  \n  // Display component\n  if (onSell && data) {\n    return (\n      <div className=\"storeItemWrapper\">\n        <button className={actionClass} onClick={onClick}>\n          {charges > 0 && <span className=\"counter\">{charges}</span>}\n          {label && <span className=\"power\">{label}</span>}\n          {icon}\n        </button>\n        <span className=\"itemPrice\"><ItemVisual item=\"coins\" level={5} small />{data.reward}</span>\n      </div>\n    )\n  } else {\n    return (\n      <button className={actionClass} onClick={onClick}>\n        {charges > 0 && <span className=\"counter\">{charges}</span>}\n        {label && <span className=\"power\">{label}</span>}\n        {icon}\n      </button>\n    )\n  }\n}\n\n// Applying propTypes definition and default values\nInstantButton.propTypes = propTypes\nInstantButton.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(InstantButton)\n","import React from 'react'\nimport { connect } from \"react-redux\"\n\nimport InstantButton from './InstantButton'\n\n/**\n  * @desc Instant buttons\n*/\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n  }\n}\n\nconst InstantButtons = ({ player, onSell }) => {\n\n  // Prepare instants\n  let instantButtons = []\n  if (player.instants) {\n    for (let index = 0; index < player.instants.length; index++) {\n      const value = player.instants[index]\n      instantButtons.push(<InstantButton onSell={onSell} key={`instant_${index}`} id={parseInt(index)} data={value} />)\n    }\n  }\n  // 6 items grid\n  if (instantButtons.length < 6) {\n    for (let index = instantButtons.length; index < 6; index++) {\n      instantButtons.push(<InstantButton onSell={onSell} key={`empty_${index}`} />)\n    }\n  }\n\n  // Display component\n  return instantButtons\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(InstantButtons)\n","import React from 'react'\nimport { connect } from \"react-redux\"\n\n// import Skills from './Skills'\nimport ActionButton from './ActionButton'\nimport InstantButtons from './InstantButtons'\nimport SkillButton from './SkillButton'\n\nimport { attack } from '../../redux/actions/index'\n\n/**\n  * @desc Wrapper for all the possible action\n*/\n\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attack: payload => dispatch(attack(payload))\n  }\n}\n\nconst Actions = ({ player, opponent }) => {\n\n  // Prepare skills\n  let skillButtons = []\n  for (let [key, value] of Object.entries(player.skills)) {\n    skillButtons.push(<SkillButton type={key} current={value.current} ready={value.ready} />)\n  }\n\n  // Display component\n  return (\n    <div className=\"actionsWrapper\">\n      {/* <Skills /> */}\n      <div className=\"buttons\">\n        {/* Skills */}\n        <InstantButtons />\n        {/* Physical */}\n        <ActionButton type=\"block\" />\n        <ActionButton type=\"attack\" />\n        <ActionButton type=\"specialattack\" />\n        {skillButtons[0]}\n        {skillButtons[1]}\n        {skillButtons[2]}\n        {/* Magic */}\n        <ActionButton type=\"focus\" />\n        <ActionButton type=\"cast\" />\n        <ActionButton type=\"specialcast\" />\n        {skillButtons[3]}\n        {skillButtons[4]}\n        {skillButtons[5]}\n      </div>\n    </div>\n  )\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(Actions)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { gameSettings } from \"../../conf/settings\"\nimport ItemVisual from './ItemVisual'\nimport { getRandomInt } from '../../utils/utils'\n\n/**\n  * Wheel for \"random\" results\n*/\n\nconst propTypes = {\n  position: PropTypes.number.isRequired,\n  type: PropTypes.string.isRequired,\n  customFumble: PropTypes.array\n}\n\nconst defaultProps = {\n\n}\n\nclass Wheel extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      rollPosition: 22.5\n    }\n  }\n\n  componentDidMount() {\n    const { position } = this.props\n    this.rollDelay = setTimeout(() => {\n      let naturalRoll = getRandomInt(-3, 3)\n      this.setState({\n        rollPosition: (position * 45) + (16 * 45) + 112.5 + 360 + naturalRoll\n      })\n    }, gameSettings.widgetDelay)\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.rollDelay)\n  }\n\n  render() {\n    const { type, items, customFumble } = this.props\n    const { rollPosition } = this.state\n\n    // More natural wheel roll\n    let bezier1 = getRandomInt(50, 58) / 100\n    let bezier2 = getRandomInt(-37, 18) / 100\n    let bezier3 = getRandomInt(39, 100) / 100\n    let bezier4 = getRandomInt(60, 140) / 100\n\n    const wheelStyle = {\n      transform: `rotate(${rollPosition}deg)`,\n      transition: `transform 1.5s cubic-bezier(${bezier1},${bezier2},${bezier3},${bezier4})`\n    } \n\n    // Fumble icon\n    let fumbleIcon\n    if (customFumble) {\n      fumbleIcon = customFumble\n    } else {\n      fumbleIcon = [gameSettings.icons[`fumble`][0], gameSettings.icons[`fumble`][1]]\n    }\n\n    // Type or item wheel\n    let wheelItems\n    \n    if (items) {\n      wheelItems = (\n        <>\n          <li><ItemVisual item={items[0] === `fumble` ? fumbleIcon[0] : items[0].item.type} level={items[0] === `fumble` ? fumbleIcon[1] : items[0].item.id} /></li>\n          <li><ItemVisual item={items[1] === `fumble` ? fumbleIcon[0] : items[1].item.type} level={items[1] === `fumble` ? fumbleIcon[1] : items[1].item.id} /></li>\n          <li><ItemVisual item={items[2] === `fumble` ? fumbleIcon[0] : items[2].item.type} level={items[2] === `fumble` ? fumbleIcon[1] : items[2].item.id} /></li>\n          <li><ItemVisual item={fumbleIcon[0]} level={fumbleIcon[1]} /></li>\n          <li><ItemVisual item={items[4] === `fumble` ? fumbleIcon[0] : items[4].item.type} level={items[4] === `fumble` ? fumbleIcon[1] : items[4].item.id} /></li>\n          <li><ItemVisual item={items[5] === `fumble` ? fumbleIcon[0] : items[5].item.type} level={items[5] === `fumble` ? fumbleIcon[1] : items[5].item.id} /></li>\n          <li><ItemVisual item={items[6] === `fumble` ? fumbleIcon[0] : items[6].item.type} level={items[6] === `fumble` ? fumbleIcon[1] : items[6].item.id} /></li>\n          <li><ItemVisual item={fumbleIcon[0]} level={fumbleIcon[1]} /></li>\n        </>\n      )\n    } else {\n      wheelItems = (\n        <>\n          <li><ItemVisual item={gameSettings.icons[type][0]} level={gameSettings.icons[type][1]} /></li>\n          <li><ItemVisual item={gameSettings.icons[`critical`][0]} level={gameSettings.icons[`critical`][1]} /></li>\n          <li><ItemVisual item={gameSettings.icons[type][0]} level={gameSettings.icons[type][1]} /></li>\n          <li><ItemVisual item={fumbleIcon[0]} level={fumbleIcon[1]} /></li>\n          <li><ItemVisual item={gameSettings.icons[type][0]} level={gameSettings.icons[type][1]} /></li>\n          <li><ItemVisual item={fumbleIcon[0]} level={fumbleIcon[1]} /></li>\n          <li><ItemVisual item={gameSettings.icons[type][0]} level={gameSettings.icons[type][1]} /></li>\n          <li><ItemVisual item={gameSettings.icons[`critical`][0]} level={gameSettings.icons[`critical`][1]} /></li>\n        </>\n      )\n    }\n\n    // Display component\n    return (\n      <div className=\"wheelWrapper\">\n        <ul className=\"needleWrapper\" style={wheelStyle}>\n          <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>\n        </ul>\n\n        <ul className='circle-container'>\n          {wheelItems}\n        </ul>\n      </div>\n    )\n  }\n}\n\n// Applying propTypes definition and default values\nWheel.propTypes = propTypes\nWheel.defaultProps = defaultProps\n\n// Exporting as default\nexport default Wheel\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from \"react-redux\"\n\nimport { criticalChance, fumbleChance } from '../../actions/combat/hit'\nimport { gameSettings } from '../../conf/settings'\n\n/**\n  * @desc Display an animated hit bar\n*/\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  hit: PropTypes.object.isRequired,\n  color: PropTypes.object\n}\n\nconst defaultProps = {\n  color: false,\n  playerTurn: false\n}\n\nconst mapStateToProps = state => {\n  return {\n    connectedData: state\n  }\n}\n\n\nclass HitBar extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      rollPosition: 0\n    }\n  }\n\n  componentDidMount() {\n    const { hit } = this.props\n    this.rollDelay = setTimeout(() => {\n      this.setState({\n        rollPosition: hit.roll\n      })\n    }, gameSettings.widgetDelay)\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.rollDelay)\n  }\n\n  render() {\n    const { connectedData, color, hit, type } = this.props\n    const { rollPosition } = this.state\n    // Current player\n    const opponent = connectedData.game.playerTurn\n    const data = opponent ? connectedData.opponent : connectedData.player\n\n    // Component styling\n    const defaultClasses = `hitbar`\n\n    // Add custom classes to defined classes\n    const itemClasses = [defaultClasses].filter(val => val).join(` `)\n\n    // Get limits\n    let fumbleLimit = fumbleChance(data)\n    let hitLimit = hit.toHit\n    let criticalLimit = criticalChance(data)\n    let roll = hit.roll\n\n    // Compute hit stages\n    let stages = []\n    let position = []\n    for (let index = 1; index <= 20; index++) {\n      let limit\n      let style = {}\n      // Compute current class\n      if (index <= fumbleLimit) limit = `fumble`\n      else if (index >= criticalLimit) {\n        limit = `critical`\n        style = opponent ? { backgroundColor: color.vibrant } : {}\n      }\n      else if(index >= hitLimit) {\n        limit = `hit`\n        style = opponent ? { backgroundColor: color.darkVibrant } : {}\n      }\n      else limit = `miss`\n\n      limit = type + ` ` + limit\n\n      stages.push(\n        <div key={index} className={limit} style={style} />\n      )\n    }\n\n    for (let index = 1; index <= roll; index++) {\n\n      let rollMarker\n      // Compute roll indicator\n      if (index === rollPosition) rollMarker = <div className=\"roll\"></div>\n\n      position.push(\n        <div key={index}>{rollMarker}</div>\n      )\n    }\n\n    // Animate\n    const indicatorStyle = {\n      width: (rollPosition * 5)  + `%`,\n    }\n\n    // Display component\n    return (\n      <div className={itemClasses}>\n        <div style={indicatorStyle} className=\"wrapper position\">\n          {position}\n        </div>\n        <div className=\"wrapper stages\">{stages}</div>\n      </div>\n    )\n  }\n}\n\n// Applying propTypes definition and default values\nHitBar.propTypes = propTypes\nHitBar.defaultProps = defaultProps\n\n// Exporting as default\nexport default connect(mapStateToProps)(HitBar)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass Delayed extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {hidden : true}\n    }\n\n    componentDidMount() {\n        setTimeout(() => {\n            this.setState({hidden: false})\n        }, this.props.waitBeforeShow)\n    }\n\n    render() {\n      return this.state.hidden \n        ? this.props.placeholder ? this.props.placeholder : null\n        : this.props.children\n    }\n}\n\nDelayed.propTypes = {\n  waitBeforeShow: PropTypes.number.isRequired\n}\n\nexport default Delayed","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\"\nimport chroma from \"chroma-js\"\n\nimport { gameSettings } from \"../../conf/settings\"\n\nimport ItemVisual from './ItemVisual'\nimport Wheel from './Wheel'\nimport HitBar from './HitBar'\nimport Delayed from '../general/Delayed'\n\n\n/**\n  * @desc Display what happened in the last battle action\n*/\n\nconst mapStateToProps = state => {\n  return {\n    log: state.log,\n    game: state.game,\n    playerTurn: state.game.playerTurn\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nclass Logs extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (\n      (nextProps.log.display && (prevState.message !== nextProps.log.display.message)) || (nextProps.log.display && (prevState.note !== nextProps.log.display.note))) {\n      return {\n        message: nextProps.log.display.message,\n        note: nextProps.log.display.note\n      }\n    }\n\n    // Return null to indicate no change to state.\n    return null;\n  }\n\n  render() {\n    const { log, playerTurn, color, skip, game } = this.props\n    const { message, note } = this.state\n    const { type, data } = log\n\n    // Component styling\n    const defaultClasses = `LogsWrapper ${type}`\n\n    // Build log message\n    let effect, widget\n    let wrapperStyling\n\n    // Color styling\n    const logStyle = playerTurn && !game.skipTurn\n      ? { \n        background: chroma(color.darkMuted).alpha(0.96),\n        borderColor: color.darkVibrant\n      }\n      : { }\n    const eyeColor = { backgroundColor: color.vibrant }\n\n    // Display special effects\n    if (data && data.hit && (data.hit === `critical` || data.hit.critical)) effect = playerTurn ? <Delayed waitBeforeShow={1200}><div className=\"effect_critical\" /></Delayed> : <Delayed waitBeforeShow={1200}><div className=\"effect_critical_opponent\" /></Delayed>\n    if (data && data.hit && (data.hit === `fumble` || data.hit.fumble)) effect = playerTurn ? <Delayed waitBeforeShow={1200}><div className=\"effect_fumble\" /></Delayed> : <Delayed waitBeforeShow={1200}><div className=\"effect_fumble_opponent\" /></Delayed>\n\n    // Big switch for various cases\n    switch (type) {\n\n      case `block`:\n        break;\n\n      case `focus`:\n        break;\n\n      case `attack`:\n        widget = <HitBar type={type} hit={data.hit} color={color} />\n        break;\n\n      case `cast`:\n        widget = <HitBar type={type} hit={data.hit} color={color} />\n        break;\n\n      case `psyblast`:\n        widget = <Wheel type=\"psyblast\" position={data.wheelPosition} />\n        break;\n\n      case `stun`:\n        widget = <Wheel type=\"stun\" position={data.wheelPosition} />\n        break;\n\n      case `itembreak`:\n        widget = <Wheel type=\"itembreak\" items={data.wheelPositions} position={data.wheelPosition} />\n        break;\n\n      case `curse`:\n        widget = <Wheel type=\"curse\" position={data.wheelPosition} />\n        break;\n\n      case `heal`:\n        widget = <Wheel type=\"heal\" items={data.wheelPositions} position={data.wheelPosition} customFumble={[\"potion\", 13]} />\n        break;\n\n      case `reflect`:\n        widget = <Wheel type=\"heal\" items={data.wheelPositions} position={data.wheelPosition} customFumble={[\"skill\", 17]} />\n        break;\n\n      case `quickheal`:\n      case `upgrade`:\n      case `restore`:\n      case `damage`:\n        widget = <ItemVisual big item={log.data.icon[0]} level={log.data.icon[1]} />\n        break;\n\n      case `sharpen`:\n        widget = [\n          <Wheel key=\"sharpenWheel\" type=\"itembreak\" items={data.wheelPositions} position={data.wheelPosition} />,\n          // <ItemVisual key=\"item_enhancer\" big item={log.data.icon[0]} level={log.data.icon[1]} />,\n          // <ItemVisual key=\"item_enhanced\" big item={log.data.icon[2]} level={log.data.icon[3]} />\n        ]\n        break;\n\n      default:\n        break;\n    }\n\n    // Turn related stuff\n    const turnClasses = !playerTurn || game.skipTurn ? `player` : `opponent`\n\n    // Action icon\n    let actionType, actionLevel\n    if (type === `attack`) {\n      actionType = log.activePlayer.weapons.STR && log.activePlayer.weapons.STR.type\n      actionLevel = log.activePlayer.weapons.STR && log.activePlayer.weapons.STR.id\n    }\n    else if (type === `cast`) {\n      actionType = log.activePlayer.weapons.MAG && log.activePlayer.weapons.MAG.type\n      actionLevel = log.activePlayer.weapons.MAG && log.activePlayer.weapons.MAG.id\n    }\n    else if (log.data && log.data.icon) {\n      actionType = log.data.icon[0]\n      actionLevel = log.data.icon[1]\n    }\n    else {\n      actionType = gameSettings.icons[type] && gameSettings.icons[type][0]\n      actionLevel = gameSettings.icons[type] && gameSettings.icons[type][1]\n    }\n\n    // Action headers\n    const turnTag = playerTurn && !game.skipTurn\n    ? [\n      <div key=\"monster_turnTag\" className=\"turnTag\" />,\n      <div key=\"monster_turnColor\" className=\"turnColor\" style={eyeColor} />\n    ]\n    : [\n        <div key=\"player_turnTag\" className=\"turnTag\" />,\n        <div key=\"player_turnAction\" className={`turnAction ${type}`}>\n          <ItemVisual small item={actionType} level={actionLevel} />\n        </div>\n    ]\n\n    // Attack effects (get form opponent buffs list)\n    const displayEffect = (log.data && log.data.displayEffect) ? log.data.displayEffect : ``\n\n    // Add custom classes to defined classes\n    const itemClasses = [defaultClasses, turnClasses, wrapperStyling].filter(val => val).join(` `)\n    const logClasses = [\"log\", displayEffect].filter(val => val).join(` `)\n\n    let logContent, containerStyle\n\n    // Final display\n    if (type) {\n      containerStyle = {\n        zIndex: 100,\n        background: playerTurn && !game.skipTurn ? chroma(color.darkMuted).alpha(0.5) : `rgba(33,53,38,.5)`\n      }\n\n      // Delayed or immediate display\n      let displayMessage, displayNote\n\n      if (log.delay === `immediate`) {\n        displayMessage = <div className=\"message\" dangerouslySetInnerHTML={{ __html: message }} />\n        displayNote = <div className=\"note\" dangerouslySetInnerHTML={{ __html: note }} />\n      } else {\n        displayMessage = <Delayed waitBeforeShow={1700} placeholder={<div className=\"message\">Rolling...</div>}><div className=\"message\" dangerouslySetInnerHTML={{ __html: message }} /></Delayed>\n        displayNote = <Delayed waitBeforeShow={1700} placeholder={<div className=\"note\">Rolling...</div>}><div className=\"note\" dangerouslySetInnerHTML={{ __html: note }} /></Delayed>\n      }\n\n      logContent = (\n        <div className={itemClasses} onClick={()=>skip()}>\n          <div className={logClasses} style={logStyle}>\n            {turnTag}\n            <div className=\"title\" dangerouslySetInnerHTML={{ __html: log.display.title }} />\n            {displayMessage}\n            {widget}\n            {displayNote}\n          </div>\n        </div>\n      )\n    } else {\n      containerStyle = {\n        zIndex: 0,\n        background: `none`\n      }\n      logContent = <span/>\n    }\n    \n    return (\n      <div className=\"LogsContainer\" style={containerStyle}>\n        <TransitionGroup component={null}>\n          <CSSTransition\n            key={+new Date()}\n            timeout={600}\n            classNames={playerTurn && !game.skipTurn ? \"playerLog\" : \"opponentLog\"}\n          >\n            {logContent}\n          </CSSTransition>\n        </TransitionGroup>\n        {effect}\n      </div>\n    )\n  }\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(Logs)\n","import React from 'react'\nimport { connect } from \"react-redux\"\nimport chroma from \"chroma-js\"\n\nimport ItemVisual from './ItemVisual'\n\n/**\n  * @desc Display detailed logs of battle\n*/\n\nconst mapStateToProps = state => {\n  return {\n    dataLogs: state.dataLogs,\n    game: state.game,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n\n  }\n}\n\nconst DataLogs = ({ dataLogs, game }) => {\n\n  // Shade color\n  let shadeStyle = {\n    background: `linear-gradient(0deg, rgba(0,0,0,0) 0%, ${chroma(game.uicolor.darkMuted).darken(1).desaturate(.4)} 100%)`\n  }\n\n  let logs = []\n  for (let index = 0; index < dataLogs.length; index++) {\n    const log = dataLogs[index]\n    logs.push(\n      <li key={`datalog_${index}`}><ItemVisual item={log.icon[0]} level={log.icon[1]} small /><span className=\"dataLog\" dangerouslySetInnerHTML={{ __html: log.log }} /></li>\n    )\n  }\n\n  return (\n    <div className=\"dataLogsWrapper\">\n      <div className=\"dataLogShadow\" style={shadeStyle} />\n      <ul className=\"dataLogs\">\n        {logs}\n      </ul>\n    </div>\n  )\n\n}\n\n// Exporting as default\nexport default connect(mapStateToProps, mapDispatchToProps)(DataLogs)\n","import React from 'react'\n\nconst VibrationWrapper = ({ condition, wrapper, children }) => condition ? \n  <div className=\"vibrationWrapper animation-rumble\">\n    {children}\n  </div> \n  : <div className=\"vibrationWrapper\">{children}</div>\n\nexport default VibrationWrapper\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport EndGame from '../ui/battle/EndGame'\nimport Opponent from '../ui/battle/Opponent'\nimport StatsAndItems from '../ui/battle/StatsAndItems'\nimport Bar from '../ui/battle/Bar'\nimport Actions from '../ui/battle/Actions'\nimport Logs from '../ui/battle/Logs'\nimport DataLogs from '../ui/battle/DataLogs'\nimport VibrationWrapper from '../ui/battle/VibrationWrapper'\nimport { toHit, hitChance } from '../actions/combat/hit'\nimport { getRandomInt, clog } from \"../utils/utils\"\nimport { findBuff } from '../actions/combat/stats'\n\nimport { setGameState, attack } from '../redux/actions/index'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    playerTurn: state.game.playerTurn,\n    game: state.game,\n    settings: state.game.settings,\n    log: state.log,\n    uicolor: state.game.uicolor,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attack: payload => dispatch(attack(payload)),\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass Battle extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      playerTurnUI: this.props.playerTurn\n    }\n  }\n\n  // Alternate turn UI and battle mode\n  changeTurn = () => {\n    const { opponent, game, attack, setGameState } = this.props\n    \n    if (game.playerTurn || game.skipTurn) {\n      // Display player's attack UI\n      this.setState({\n        playerTurnUI: true\n      })\n      // Reset log to \"your turn\" state\n      setGameState({ state: `playerTurn` })\n    } else {\n      // Enemy's attack after reflexion delay, if not stunned\n      if (findBuff(opponent, `temporary`, `STUN`)) {\n        attack({ type: `skip` })\n      }\n      else {\n        attack({ type: this.opponentAttackChoice(), mode: `attack` })\n      }\n      // Display enemy's attack UI\n      this.setState({\n        playerTurnUI: false\n      })\n    }\n  }\n\n  // Skip timer\n  skipTurnChange = () => {\n    const { opponent, player } = this.props\n    // Skip animations, only if nobody's dead\n    if (opponent.hitPoints !== 0 && player.hitPoints !== 0) {\n      clearTimeout(this.opponentTurn)\n      clearTimeout(this.playerTurn)\n      this.changeTurn()\n    }\n  }\n \n  opponentAttackChoice = () => {\n    const { opponent, player } = this.props\n    let attackType\n    \n    // Opponent is humanoid or beast ?\n    if (opponent.humanoid) {\n      let physicalHitChance = hitChance(toHit(opponent, player, `physical`))\n      let magicalHitChance = hitChance(toHit(opponent, player, `magical`))\n      const hasSTRWeapon = opponent.weapons.STR\n      const hasMAGWeapon = opponent.weapons.MAG\n      // If weapon, motivation is 30% better than \"naked\" hit\n      if (hasSTRWeapon) physicalHitChance += 30\n      if (hasMAGWeapon) magicalHitChance += 30\n      // Motivation rule\n      const totalMotivation = physicalHitChance + magicalHitChance\n      const physicalMotivation = Math.round(physicalHitChance * 100 / totalMotivation)\n      const roll = getRandomInt(1, 100)\n      // Temporary basic system\n      if (roll <= physicalMotivation) attackType = `physical`\n      else attackType = `magical`\n    } else {\n      // Beasts just attack\n      attackType  = `physical`\n    }\n\n    return attackType\n  }\n\n  launchOpponentTurn = () => {\n    const { settings, log } = this.props\n\n    // Slow logs needs more time\n    let waitTime\n    if (log.delay === `long`) {\n      waitTime = settings.combatSpeed * 1.5\n    } else {\n      waitTime = settings.combatSpeed\n    }\n\n    clearTimeout(this.opponentTurn)\n    this.opponentTurn = setTimeout(function() { \n      this.changeTurn()\n    }.bind(this), waitTime)\n  }\n\n  componentDidUpdate(prevProps) {\n    const { opponent, player, playerTurn, settings, game } = this.props\n    const { battleEnd } = this.state\n\n    // If opponent or player is dead, clear timer\n    if (opponent.hitPoints === 0 || player.hitPoints === 0) {\n      clearTimeout(this.opponentTurn)\n      clearTimeout(this.playerTurn)\n\n      if (!battleEnd) {\n        this.endGame = setTimeout(function () {\n          this.setState({\n            battleEnd: true\n          })\n        }.bind(this), 2000)\n      }\n\n      return false\n    } else {\n      // If turn changed, and it's opponent turn\n      if (prevProps.playerTurn !== playerTurn && playerTurn === false && !game.skipTurn) {\n        this.launchOpponentTurn()\n      }\n  \n      // If turn changed and it's player's turn\n      if (prevProps.playerTurn !== playerTurn && playerTurn === true) {\n        clearTimeout(this.playerTurn)\n        this.playerTurn = setTimeout(function () {\n          this.changeTurn()\n        }.bind(this), settings.combatSpeed)\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // Clear timers\n    clearTimeout(this.opponentTurn)\n    clearTimeout(this.playerTurn)\n    clearTimeout(this.endGame)\n  }\n\n  render() {\n    const { playerTurnUI, battleEnd } = this.state\n    const { game, player, uicolor, loop } = this.props\n\n    clog(`Battle render`, `location`)\n\n    // Low HP\n    const hpRange = 10 - Math.round((player.hitPoints * 10) / player.maxHitPoints)\n\n    const playerAreaClass = playerTurnUI ? `playerArea playerTurn` : `playerArea opponentTurn`\n    const wrapperClass = loop ? `appWrapper battle danger_${hpRange} abyss` : `appWrapper battle danger_${hpRange}`\n\n    return (\n      <div className=\"mainWrapper\">\n        <div className={wrapperClass}>\n          <EndGame display={battleEnd} />\n          <VibrationWrapper condition={game.opponentHit}>\n            <Opponent color={uicolor} turn={playerTurnUI} />\n          </VibrationWrapper>\n          <DataLogs />\n          <Logs color={uicolor} skip={this.skipTurnChange} />\n          <VibrationWrapper condition={game.playerHit}>\n            <div className={playerAreaClass}>\n              <Bar type=\"hitPoints\" />\n              <StatsAndItems />\n              <Actions />\n            </div>\n          </VibrationWrapper>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Battle)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport Item from '../ui/battle/Item'\nimport ItemVisual from '../ui/battle/ItemVisual'\nimport { getMonsterLoot } from '../monsters/getMonsterReward'\nimport { clog } from '../utils/utils'\nimport StatsAndItems from '../ui/battle/StatsAndItems'\nimport InstantButtons from '../ui/battle/InstantButtons'\n\nimport { setGameState, settings } from '../redux/actions/index'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Victory extends Component {\n  constructor(props) {\n    super(props)\n\n    const { opponent, game } = this.props\n\n    this.state = { \n      moveditems: [],\n      solditems: [],\n      soldMonsterParts: [],\n      lootedGold: this.props.opponent.reward,\n      monsterLoot: opponent.humanoid ? null : getMonsterLoot(game.level, opponent.elite)\n    }\n  }\n\n  getLoot = (type, char, item) => {\n    const { settings } = this.props\n    const { moveditems } = this.state\n    let updatedMovedItems = moveditems ? moveditems : []\n\n    clog(`getLoot`, `function`)\n\n    // Update store\n    settings({ setting: `moveItem`, type: type, char: char, item: item })\n    // Update UI\n    updatedMovedItems.push({ type: type, char: char})\n    this.setState({\n      moveditems: updatedMovedItems\n    })\n  }\n\n  sellLoot = (type, char, item) => {\n    const { opponent, settings } = this.props\n    const { solditems, lootedGold } = this.state\n    let updatedSoldItems = solditems ? solditems : []\n\n    clog(`sellLoot`, `function`)\n\n    // Update store\n    settings({ setting: `sellItem`, type: type, char: char, item: item })\n    // Update UI\n    updatedSoldItems.push({ type: type, char: char })\n    this.setState({\n      lootedGold: lootedGold + opponent[type][char].reward\n    })\n  }\n\n  sellMonsterPart = (index, reward) => {\n    const { settings } = this.props\n    const { soldMonsterParts, lootedGold } = this.state\n    let updatedSoldMonsterParts = soldMonsterParts ? soldMonsterParts : []\n\n    clog(`sellMonsterPart`, `function`)\n\n    // Update store\n    settings({ setting: `setGold`, type: `add`, value: reward })\n    // Update UI\n    updatedSoldMonsterParts.push(index)\n    this.setState({\n      lootedGold: lootedGold + reward\n    })\n  }\n\n  checkLoot = (type, char) => {\n    const { moveditems, solditems } = this.state\n    let loot\n\n    clog(`checkLoot`, `function`)\n\n    for (let index = 0; index < moveditems.length; index++) {\n      if (moveditems[index].type === type && moveditems[index].char === char) loot = `new`\n    }\n\n    for (let index = 0; index < solditems.length; index++) {\n      if (solditems[index].type === type && solditems[index].char === char) loot = `sold`\n    }\n\n    return loot\n  }\n\n  parseLoot = (type) => {\n    const { opponent } = this.props\n\n    clog(`parseLoot`, `function`)\n\n    let loot = []\n\n    for (let [key, value] of Object.entries(opponent[type])) {\n\n      // Check if item has been looted\n      const looted = this.checkLoot(type, key)\n\n      // Button labels\n      let sellButton = <><ItemVisual item=\"coins\" level={5} small /> {opponent[type][key].reward}</>\n      let equipButton = \"Equip\"\n\n      if (looted === `sold`) {\n        sellButton = `Sold!`\n        equipButton = ``\n      } \n      else if (looted === `new`) {\n        sellButton = ``\n        equipButton = `Got it!`\n      } \n\n      loot.push(\n        <div className=\"lootBox lootItemWrapper\" key={`lootbox_${type}_${key}`}>\n          <Item \n            item={opponent[type][key]}\n            shop={type === `items` ? `items` : ``}\n            displayChar={type === `items`} \n          />\n          <button onClick={() => this.getLoot(type, key, value)} disabled={looted}>\n            {equipButton}\n          </button>\n          <button onClick={() => this.sellLoot(type, key, value)} disabled={looted}>\n            {sellButton}\n          </button>\n        </div>\n      )\n    }\n\n    return loot\n  }\n\n  parseMonsterLoot = (type) => {\n    const { monsterLoot, soldMonsterParts } = this.state\n\n    clog(`parseMonsterLoot`, `function`)\n\n    let loot = []\n\n    for (let index = 0; index < monsterLoot.length; index++) {\n\n      // Button labels\n      let sellButton = <><ItemVisual item=\"coins\" level={5} small /> {monsterLoot[index].reward}</>\n\n      let looted = soldMonsterParts.indexOf(index) !== -1\n\n      if (looted) {\n        sellButton = `Sold!`\n      }\n\n      loot.push(\n        <div className=\"lootBox\" key={`lootbox_${index}`}>\n          <div className=\"storeWrapper\">\n            <Item item={!looted ? monsterLoot[index] : {}} noPlus />\n          </div>\n          <div className=\"actions\">\n            <button onClick={() => this.sellMonsterPart(index, monsterLoot[index].reward)} disabled={looted}>\n              {sellButton}\n            </button>\n          </div>\n        </div>\n      )\n    }\n\n    return loot\n  }\n\n  render() {\n    const { setGameState, opponent, player } = this.props\n    const { lootedGold } = this.state\n    \n    clog(`Victory render`, `location`)\n\n    const goldIcon = {\n      id: 5,\n      score: player.gold,\n      type: \"coins\"\n    }\n\n    const shopClasses = opponent.humanoid ? \"shopWrapper\" : \"shopWrapper shop\"\n\n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea highIndex\">\n            <div className={shopClasses}>\n              <span className=\"title\">Loot</span>\n              {opponent.humanoid ?\n                <div className=\"lootBoxes itemBox\">\n                  {this.parseLoot(`items`)}\n                  {this.parseLoot(`weapons`)}\n                </div>\n                :\n                <>\n                  <span className=\"subtitle\">Sell monster parts</span>\n                  <div className=\"lootBoxes\">\n                    {this.parseMonsterLoot()}\n                  </div>\n                </>\n              }\n\n              <div className=\"goldLootWrapper\">\n                <div className=\"goldLoot\">\n                  <div><ItemVisual item=\"coins\" level={2} /></div>\n                  +{lootedGold}\n                </div>\n\n                <div className=\"goldLoot total\">\n                  <Item item={goldIcon} effect=\"new\" animateNumber noPlus />\n                </div>\n              </div>\n\n              <div className=\"playerArea shop\">\n                <StatsAndItems />\n                <div className=\"buttons\">\n                  <InstantButtons onSell={this.sellInstant} />\n                </div>\n              </div>\n\n              <img src={opponent.pic} alt={opponent.name} />\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `shop` })}>Shop</button>\n            {/* <button className=\"navigation\" onClick={() => setGameState({ state: `levelTransition` })}>Enter next round</button> */}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Victory)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport Item from '../ui/battle/Item'\nimport ItemVisual from '../ui/battle/ItemVisual'\nimport { setGameState, settings  } from '../redux/actions/index'\nimport { clog } from '../utils/utils'\nimport { gameSettings } from '../conf/settings'\nimport { getLevelFromXp } from '../actions/score/score'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game,\n    score: state.score,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Defeat extends Component {\n\n  constructor(props) {\n    super(props)\n\n    const { score } = this.props\n\n    this.state = {\n      movedItems: [],\n      scoreSubmitted: score.run.scoreSent ? `success` : false\n    }\n  }\n\n  componentDidMount() {\n    const { player, loop, score, settings } = this.props\n\n    if (!score.run.scoreSent) {\n      // POST request using fetch with error handling\n      const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'text/plain' },\n        body: JSON.stringify({\n          name: player.name,\n          run_rounds: score.run.round,\n          run_maxlevel: score.run.maxlevel,\n          game_runs: score.game.runs,\n          game_rounds: score.game.round,\n          game_maxlevel: score.game.maxlevel,\n          game_battles: score.game.battles.total,\n          game_battles_defeats: score.game.battles.defeats,\n          game_battles_victories: score.game.battles.victories,\n          alltime_runs: score.alltime.runs,\n          alltime_rounds: score.alltime.round,\n          loop: loop\n        })\n      }\n  \n      fetch(gameSettings.postScoreUrl, requestOptions)\n        .then(async response => {\n          const data = await response.json();\n\n          this.setState({\n            scoreSubmitted: `success`\n          })\n\n          // Prevent multiple sending using refresh\n          settings({ setting: `submitScore` })\n  \n          // check for error response\n          if (!response.ok) {\n            // get error message from body or default to response status\n            const error = (data && data.message) || response.status;\n            this.setState({\n              scoreSubmitted: `responseError`\n            })\n            return Promise.reject(error);\n          }\n        })\n        .catch(error => {\n          console.error('There was an error!', error);\n          this.setState({\n            scoreSubmitted: `networkError`\n          })\n        }\n      )\n    }\n  }\n\n  checkLoot = (type, char) => {\n    const { movedItems } = this.state\n    let loot\n\n    clog(`checkLoot`, `function`)\n\n    for (let index = 0; index < movedItems.length; index++) {\n      if (movedItems[index].type === type && movedItems[index].char === char) loot = `new`\n    }\n\n    return loot\n  }\n\n  keepLoot = (type, char, item) => {\n    const { settings } = this.props\n    const { movedItems } = this.state\n    let updatedmovedItems = movedItems ? movedItems : []\n\n    clog(`keepLoot`, `function`)\n\n    // Update store\n    settings({ setting: `keepItem`, type: type, char: char, item: item })\n    // Update UI\n    updatedmovedItems.push({ type: type, char: char })\n    this.setState({\n      movedItems: updatedmovedItems\n    })\n  }\n\n  parseLoot = (type) => {\n    const { player } = this.props\n    const { movedItems } = this.state\n    const itemCount = getLevelFromXp(player.xp)\n\n    clog(`parseLoot`, `function`)\n\n    let loot = []\n    \n    for (let [key, value] of Object.entries(player[type])) {\n\n      // Check if item has been looted\n      const looted = this.checkLoot(type, key)\n\n      // Button labels\n      let keepButton = `Keep`\n\n      if (looted === `new`) {\n        keepButton = `Saved!`\n      }\n\n      loot.push(\n        <div className={`lootBox ${type} ${looted}`} key={`lootbox_${type}_${key}`}>\n          <div className=\"storeWrapper\">\n            <Item \n              item={player[type][key]} \n              effect={looted} \n              displayChar={type === `items`}\n            />\n          </div>\n          <div className=\"actions\">\n            <button onClick={() => this.keepLoot(type, key, value)} disabled={looted || movedItems.length === itemCount}>\n              {keepButton}\n            </button>\n          </div>\n        </div>\n      )\n    }\n\n    return loot\n  }\n\n  render() {\n    const { setGameState, player } = this.props\n    const { scoreSubmitted } = this.state\n\n    clog(`Defeat render`, `location`)\n\n    const itemCount = getLevelFromXp(player.xp)\n    const itemCountLabel = itemCount === 1 ? `1 item` : <>{itemCount} items</>\n\n    // Submit score botton\n    let submitButton = <span>Submitting score...</span>\n    if (scoreSubmitted === `success`) submitButton = <span>Score sent !</span>\n    else if (scoreSubmitted === `responseError`) submitButton = <span>Score not sent, sorry =[</span>\n    else if (scoreSubmitted === `networkError`) submitButton = <span>No internet, score not sent =[</span>\n    \n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea highIndex\">\n            <div className=\"shopWrapper shop legacy\">\n              <div className=\"legacyTitle\">You can choose up to<span className=\"legacyCount big\">{itemCountLabel}</span>to use in your next run.</div>\n              <div className=\"lootBoxes\"> \n                {this.parseLoot(`items`)}\n                {this.parseLoot(`weapons`)}\n              </div>\n              <div className=\"legacyTitle\">You also saved <span className=\"legacyCount\">{player.gold} <ItemVisual item=\"coins\" level={5} small /></span></div>\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `hallOfFame` })}>Hall of fame{submitButton}</button>\n            <button className=\"navigation\" onClick={() => setGameState({ state: `welcome` })}>Start again !</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Defeat)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState, settings } from '../redux/actions/index'\nimport { getMonsterItems } from '../monsters/getMonsterItems'\nimport { getMonsterWeapons } from '../monsters/getMonsterWeapons'\nimport { getShopInstants } from '../monsters/getShopInstants'\nimport StatsAndItems from '../ui/battle/StatsAndItems'\nimport InstantButtons from '../ui/battle/InstantButtons'\nimport Item from '../ui/battle/Item'\nimport ItemVisual from '../ui/battle/ItemVisual'\nimport { clog, randomValue } from '../utils/utils'\nimport { uniqueItems } from \"../conf/settings_items\"\n\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    game: state.game,\n    uniques: state.uniques\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Shop extends Component {\n\n  constructor(props) {\n    super(props)\n\n    // build store catalog\n    const catalog = {\n      items: this.generateCatalog(`items`, this.props.game.level, false),\n      weapons: this.generateCatalog(`weapons`, this.props.game.level, false),\n      instants: this.generateCatalog(`instants`, this.props.game.level, false),\n      instants_weapon: this.generateCatalog(`instants_weapon`, this.props.game.level, false),\n      unique_weapons: this.generateCatalog(`unique_weapons`, this.props.game.level, false),\n      unique_items: this.generateCatalog(`unique_items`, this.props.game.level, false),\n    }\n\n    this.state = {\n      storeTab: `equipment`,\n      soldItems: [],\n      gold: this.props.player.gold,\n      catalog: catalog\n    }\n  }\n\n  changeTab = (tab) => {\n    // Update state\n    this.setState({\n      storeTab: tab\n    })\n  }\n\n  buyLoot = (type, index, item) => {\n    const { settings } = this.props\n    const { soldItems, gold } = this.state\n    let updatedsoldItems = soldItems ? soldItems : []\n\n    clog(`buyLoot`, `function`)\n\n    // Update UI\n    updatedsoldItems.push({ type: type, char: index })\n    \n    // For store, unique_weapons = weapons\n    if (type === `unique_weapons`) type = `weapons`\n    if (type === `unique_items`) type = `items`\n\n    // Update store\n    if (type === `instants` || type === `instants_weapon`) settings({ setting: `buyInstant`, item: item })\n    else settings({ setting: `buyItem`, type: type, char: item.char, item: item })\n    \n    // Update state\n    this.setState({\n      gold: gold - item.price,\n      soldItems: updatedsoldItems\n    })\n  }\n\n  sellInstant = (index, item) => {\n    const { settings } = this.props\n    const { gold } = this.state\n\n    clog(`sellInstant`, `function`)\n\n    // Update store\n    settings({ setting: `sellInstant`, index: index, item: item })\n    // Update state\n    this.setState({\n      gold: gold + item.reward\n    })\n  }\n\n  generateCatalog = (catalog, level, elite) => {\n    const { uniques } = this.props\n\n    clog(`generateCatalog`, `function`)\n\n    // Get items in the catalog\n    let items = [] \n    let numberOfitems, itemsRange\n\n    if (catalog === `items`) {\n      // randomize selection\n      numberOfitems = 10\n      itemsRange = [`STR`, `DEX`, `CON`, `MAG`, `LCK`, `STR`, `DEX`, `CON`, `MAG`, `LCK`]\n      for (let index = 0; index < numberOfitems; index++) {\n        let char = itemsRange[index]\n        items.push(char)\n      }\n    } \n    else if(catalog === `weapons`) {\n      // randomize selection\n      numberOfitems = 6\n      itemsRange = [`STR`, `STR`, `STR`, `MAG`, `MAG`, `MAG`]\n      for (let index = 0; index < numberOfitems; index++) {\n        items.push(randomValue(itemsRange))\n      }\n    }\n    else if (catalog === `instants`) {\n      // randomize selection\n      numberOfitems = 6\n      itemsRange = [`quickheal`, `quickheal`, `temporaryupgrade`, `temporaryluckupgrade`, `permanentupgrade`, `restore`]\n      for (let index = 0; index < numberOfitems; index++) {\n        items.push(itemsRange[index])\n      }\n    }\n    else if (catalog === `instants_weapon`) {\n      // randomize selection\n      numberOfitems = 4\n      itemsRange = [`damage`, `damage`, `sharpenphysical`, `sharpenmagical`]\n      for (let index = 0; index < numberOfitems; index++) {\n        items.push(itemsRange[index])\n      }\n    }\n\n    let itemList = []\n\n    /** Return list of items */\n\n    let char, selectedItems, elements, selecteditemsElement, itemKey\n    \n    // Unique weapons\n    if (catalog === `unique_weapons`) {\n      numberOfitems = 2\n      itemsRange = [`STR`, `MAG`]\n      for (let index = 0; index < numberOfitems; index++) {\n        char = itemsRange[index]\n        selectedItems = uniqueItems.weapons[char]\n        elements = Object.keys(selectedItems);\n        selecteditemsElement = selectedItems[elements[elements.length * Math.random() << 0]]\n        itemKey = randomValue(selecteditemsElement)\n        itemList.push(uniques.weapons[itemKey])\n      }\n    } \n    // Unique gear\n    else if (catalog === `unique_items`) {\n      numberOfitems = 5\n      itemsRange = [`STR`, `DEX`, `CON`, `MAG`, `LCK`]\n      for (let index = 0; index < numberOfitems; index++) {\n        char = itemsRange[index]\n        selectedItems = uniqueItems.items[char]\n        elements = Object.keys(selectedItems);\n        selecteditemsElement = selectedItems[elements[elements.length * Math.random() << 0]]\n        itemKey = randomValue(selecteditemsElement)\n        itemList.push(uniques.items[itemKey])\n      }\n    }\n    // Classic items\n    else {\n      for (let index = 0; index < items.length; index++) {\n        let itemData\n        if (catalog === `items`) itemData = getMonsterItems([items[index]], level, true, elite)\n        else if (catalog === `weapons`) itemData = getMonsterWeapons([items[index]], level, true, elite)\n        else if (catalog === `instants`) itemData = getShopInstants([items[index]], level)\n        else if (catalog === `instants_weapon`) itemData = getShopInstants([items[index]], level)\n  \n        itemList.push(itemData[items[index]])\n      }\n    }\n\n    return itemList\n  }\n\n  checkLoot = (type, char) => {\n    const { soldItems } = this.state\n    let loot\n\n    clog(`checkLoot`, `function`)\n\n    for (let index = 0; index < soldItems.length; index++) {\n      if (soldItems[index].type === type && soldItems[index].char === char) loot = `new`\n    }\n\n    return loot\n  }\n\n  parseLoot = (type, displayChar) => {\n    const { player } = this.props\n    const { catalog } = this.state\n\n    clog(`parseLoot`, `function`)\n\n    let loot = []\n\n    for (let index = 0; index < catalog[type].length; index++) {\n      const key = index\n      const value = catalog[type][index]\n\n      // Check if item has been looted\n      const looted = this.checkLoot(type, key)\n\n      // Button labels\n      let buyButton = <span className=\"itemPrice\"><ItemVisual item=\"coins\" level={5} small />{value.price}</span>\n\n      if (looted === `new`) {\n        buyButton = <span className=\"itemPrice\">Sold !</span>\n      }\n\n      // Overburden\n      let overburden\n      if (player.instants && player.instants.filter(Boolean).length === 6 && (type === `instants` || type === `instants_weapon`)) {\n        overburden = <div className=\"overburden\"><ItemVisual item=\"bag\" level={12} /><span>Full bag!</span></div>\n      }\n\n      loot.push(\n        <div key={`lootbox_${type}_${key}`} className=\"storeItemWrapper\">\n          {overburden}\n          <button \n            className={`storeItem ${type}`}\n            onClick={() => this.buyLoot(type, index, value)} \n            disabled={looted || player.gold < value.price || overburden}\n          >\n            <Item \n              item={looted ? null : value} \n              displayChar={displayChar} \n              noPlus={type === `instants` || type === `instants_weapon`} \n              shop={type === `items` || type === `unique_items` ? `items` : ``}\n            />\n            {buyButton}\n          </button>\n        </div>\n      )\n    }\n\n    return loot\n  }\n\n  render() {\n    const { setGameState } = this.props\n    const { gold, storeTab } = this.state\n\n    clog(`Shop render`, `location`)\n\n    const goldIcon = {\n      id: 5,\n      score: gold,\n      type: \"coins\"\n    }\n\n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea highIndex\">\n            <div className=\"shopWrapper shop panelStore\">\n              {/* <span className=\"title\">Shop</span> */}\n              <div className=\"panelStoreTabs\">\n                <button className={storeTab !== `equipment` ? `off` : `on`} onClick={() => this.changeTab(`equipment`)}>\n                  <ItemVisual item=\"armor\" level={70} />Gear\n                </button>\n                <button className={storeTab !== `items` ? `off` : `on`} onClick={() => this.changeTab(`items`)}>\n                  <ItemVisual item=\"potion\" level={23} />Items\n                </button>\n                <button className={storeTab !== `weapons` ? `off` : `on`} onClick={() => this.changeTab(`weapons`)}>\n                  <ItemVisual item=\"sword\" level={158} />Weapons\n                </button>\n                <button className={storeTab !== `uniques` ? `off` : `on`} onClick={() => this.changeTab(`uniques`)}>\n                  <ItemVisual item=\"unique\" level={16} />Antiques\n                </button>\n              </div>\n              <div className={`storeBox store_${storeTab}`}>\n                {storeTab === `equipment` && this.parseLoot(`items`, true)}\n                {storeTab === `items` && this.parseLoot(`instants`, false)}\n                {storeTab === `items` && this.parseLoot(`instants_weapon`, false)}\n                {storeTab === `weapons` && this.parseLoot(`weapons`, false)}\n                {storeTab === `uniques` && this.parseLoot(`unique_items`, true)}\n                {storeTab === `uniques` && this.parseLoot(`unique_weapons`, false)}\n              </div>\n            </div>\n\n            <div className=\"goldLoot\">\n              <Item item={goldIcon} noPlus animateNumber />\n            </div>\n\n            <div className=\"playerArea shop\">\n              <StatsAndItems />\n              <div className=\"buttons\">\n                <InstantButtons onSell={this.sellInstant} />\n              </div>\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `levelTransition` })}>Next battle</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState, settings  } from '../redux/actions/index'\nimport { clog } from '../utils/utils'\nimport { gameSettings } from '../conf/settings'\n\nimport death from '../pics/ui/death.png'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game,\n    score: state.score,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Defeat extends Component {\n\n  constructor(props) {\n    super(props)\n\n    const { score } = this.props\n\n    this.state = {\n      scoreSubmitted: score.run.scoreSent ? `success` : false\n    }\n  }\n\n  componentDidMount() {\n    const { player, loop, score, settings } = this.props\n\n    if (!score.run.scoreSent) {\n      // POST request using fetch with error handling\n      const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'text/plain' },\n        body: JSON.stringify({\n          name: player.name,\n          run_rounds: score.run.round,\n          run_maxlevel: score.run.maxlevel,\n          game_runs: score.game.runs,\n          game_rounds: score.game.round,\n          game_maxlevel: score.game.maxlevel,\n          game_battles: score.game.battles.total,\n          game_battles_defeats: score.game.battles.defeats,\n          game_battles_victories: score.game.battles.victories,\n          alltime_runs: score.alltime.runs,\n          alltime_rounds: score.alltime.round,\n          loop: loop\n        })\n      }\n  \n      fetch(gameSettings.postScoreUrl, requestOptions)\n        .then(async response => {\n          const data = await response.json();\n\n          this.setState({\n            scoreSubmitted: `success`\n          })\n\n          // Prevent multiple sending using refresh\n          settings({ setting: `submitScore` })\n  \n          // check for error response\n          if (!response.ok) {\n            // get error message from body or default to response status\n            const error = (data && data.message) || response.status;\n            this.setState({\n              scoreSubmitted: `responseError`\n            })\n            return Promise.reject(error);\n          }\n        })\n        .catch(error => {\n          console.error('There was an error!', error);\n          this.setState({\n            scoreSubmitted: `networkError`\n          })\n        }\n      )\n    }\n  }\n\n  render() {\n    const { setGameState, player, score } = this.props\n    const { scoreSubmitted } = this.state\n\n    clog(`EndGame screen`, `location`)\n\n    // Submit score botton\n    let submitButton = <span>Submitting score...</span>\n    if (scoreSubmitted === `success`) submitButton = <span>Score sent !</span>\n    else if (scoreSubmitted === `responseError`) submitButton = <span>Score not sent, sorry =[</span>\n    else if (scoreSubmitted === `networkError`) submitButton = <span>No internet, score not sent =[</span>\n    \n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea highIndex\">\n            <div className=\"victoryWrapper\">\n              <div className=\"bigTitle\">You won !</div>\n              <div>All hail the mighty {player.name} !</div>\n              <div className=\"separator\"></div>\n              <div className=\"stats\">\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>Runs</td>\n                      <td>{score.game.runs}</td>\n                    </tr>\n                    <tr>\n                      <td>Battles</td>\n                      <td>{score.game.battles.total} ({score.game.battles.defeats} lost)</td>\n                    </tr>\n                    <tr>\n                      <td>Rounds</td>\n                      <td>{score.game.round}</td>\n                    </tr>\n                    <tr>\n                      <td>Damage dealt</td>\n                      <td>{score.game.damage}</td>\n                    </tr>\n                    <tr>\n                      <td>Physical damage</td>\n                      <td><span className=\"physicaldamage\">{score.game.action.attack.damage}</span> ({score.game.action.attack.total})</td>\n                    </tr>\n                    <tr>\n                      <td>Magical damage</td>\n                      <td><span className=\"magicaldamage\">{score.game.action.cast.damage}</span> ({score.game.action.cast.total})</td>\n                    </tr>\n                    <tr>\n                      <td>Health restored</td>\n                      <td>{score.game.heal}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div>Congratulations ! <br /><br />But the <span className=\"element_darkness\">Abyss of Permadeath</span> awaits...</div>\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `hallOfFame` })}>Hall of fame{submitButton}</button>\n            <button className=\"navigation abyss picture\" onClick={() => setGameState({ state: `nextLoop` })}><img src={death} alt=\"The Abyss of Permadeath\"/>Enter the Abyss</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Defeat)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState, settings  } from '../redux/actions/index'\nimport { clog } from '../utils/utils'\nimport { gameSettings } from '../conf/settings'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    game: state.game,\n    score: state.score,\n    loop: state.game.loop\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass Defeat extends Component {\n\n  constructor(props) {\n    super(props)\n\n    const { score } = this.props\n\n    this.state = {\n      scoreSubmitted: score.run.scoreSent ? `success` : false\n    }\n  }\n\n  componentDidMount() {\n    const { player, score, loop, settings } = this.props\n\n    if (!score.run.scoreSent) {\n      // POST request using fetch with error handling\n      const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'text/plain' },\n        body: JSON.stringify({\n          name: player.name,\n          run_rounds: score.run.round,\n          run_maxlevel: score.run.maxlevel,\n          game_runs: score.game.runs,\n          game_rounds: score.game.round,\n          game_maxlevel: score.game.maxlevel,\n          game_battles: score.game.battles.total,\n          game_battles_defeats: score.game.battles.defeats,\n          game_battles_victories: score.game.battles.victories,\n          alltime_runs: score.alltime.runs,\n          alltime_rounds: score.alltime.round,\n          abyss: loop\n        })\n      }\n  \n      fetch(gameSettings.postScoreUrl, requestOptions)\n        .then(async response => {\n          const data = await response.json();\n\n          this.setState({\n            scoreSubmitted: `success`\n          })\n\n          // Prevent multiple sending using refresh\n          settings({ setting: `submitScore` })\n  \n          // check for error response\n          if (!response.ok) {\n            // get error message from body or default to response status\n            const error = (data && data.message) || response.status;\n            this.setState({\n              scoreSubmitted: `responseError`\n            })\n            return Promise.reject(error);\n          }\n        })\n        .catch(error => {\n          console.error('There was an error!', error);\n          this.setState({\n            scoreSubmitted: `networkError`\n          })\n        }\n      )\n    }\n  }\n\n  render() {\n    const { setGameState, game, player, score } = this.props\n    const { scoreSubmitted } = this.state\n\n    clog(`EndGame screen`, `location`)\n\n    // Submit score botton\n    let submitButton = <span>Submitting score...</span>\n    if (scoreSubmitted === `success`) submitButton = <span>Score sent !</span>\n    else if (scoreSubmitted === `responseError`) submitButton = <span>Score not sent, sorry =[</span>\n    else if (scoreSubmitted === `networkError`) submitButton = <span>No internet, score not sent =[</span>\n\n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea highIndex\">\n            <div className=\"victoryWrapper\">\n              <div className=\"bigTitle\">The End</div>\n              <div>Congratulations {player.name} !</div>\n              <div className=\"separator\"></div>\n              <div className=\"stats\">\n                  You reached Abyss level\n                  <div className=\"abyssTitle\">{game.level}</div>\n              </div>\n              <div>Thank you for playing !</div>\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation abyss\" onClick={() => setGameState({ state: `resetThenHallOfFame` })}>Hall of fame{submitButton}</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Defeat)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState } from '../redux/actions/index'\nimport { gameSettings } from '../conf/settings'\n\nimport death from '../pics/ui/death.png'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player,\n    opponent: state.opponent,\n    playerTurn: state.game.playerTurn,\n    log: state.log,\n    score: state.score,\n    game: state.game\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass HallOfFame extends Component {\n\n  constructor(props) {\n    super(props)\n    const { game } = this.props\n\n    this.state = {\n      scoreTab: game.previousState === `permadeath` ? `abyss` : `run`\n    }\n  }\n\n  async componentDidMount() {\n    // GET request using fetch with error handling\n    try {\n      const response = await fetch(gameSettings.getScoreUrl);\n      const json = await response.json();\n      this.setState({ score: json });\n\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  changeTab = (tab) => {\n    // Update state\n    this.setState({\n      scoreTab: tab\n    })\n  }\n\n  parseScore = (mode) => {\n    const { score } = this.state\n\n    if (!score) {\n      return <div className=\"loading\">Loading scores, please wait!</div>\n    } else {\n      // Parse score data\n      let scores = []\n      let scoresHeader\n\n      switch (mode) {\n        case `run`:\n          scoresHeader = (\n            <>\n              <span className=\"name\">Name</span>\n              <span className=\"\">Level</span>\n              <span className=\"\">Rounds</span>\n              <span className=\"\">Run #</span>\n            </>\n          )\n\n          for (let index = 0; index < score.run.length; index++) {\n            const element = score.run[index];\n            let levelStyle = { filter: `hue-rotate(${Math.round(element.run_maxlevel * (360 / gameSettings.maxLevel))}deg)` }\n\n            scores.push(\n              <div id={`run_${element.id}`} className=\"score\" key={`score_run_${index}`}>\n                <span className=\"name\">{element.name}</span>\n                <span className=\"level\" style={levelStyle}>{element.run_maxlevel}</span>\n                <span className=\"\">{element.run_rounds}</span>\n                <span className=\"\">{element.game_runs}</span>\n              </div>\n            )\n          }\n          break;\n\n        case `game`:\n          scoresHeader = (\n            <>\n              <span className=\"name\">Name</span>\n              <span className=\"\">Level</span>\n              <span className=\"\">Runs</span>\n              <span className=\"\">Battles</span>\n            </>\n          )\n\n          for (let index = 0; index < score.game.length; index++) {\n            const element = score.game[index];\n            let levelStyle = { filter: `hue-rotate(${Math.round(element.game_maxlevel * (360 / gameSettings.maxLevel))}deg)` }\n\n            scores.push(\n              <div id={`game_${element.id}`} className=\"score\" key={`score_game_${index}`}>\n                <span className=\"name\">{element.name}</span>\n                <span className=\"level\" style={levelStyle}>{element.game_maxlevel}</span>\n                <span className=\"\">{element.game_runs}</span>\n                <span className=\"\">{element.game_battles}</span>\n              </div>\n            )\n          }\n          break;\n\n        case `abyss`:\n          scoresHeader = (\n            <>\n              <span className=\"name\">Name</span>\n              <span className=\"abyss\">Abyss level</span>\n            </>\n          )\n\n          for (let index = 0; index < score.abyss.length; index++) {\n            const element = score.abyss[index];\n            let levelStyle = { filter: `hue-rotate(${Math.round(element.game_maxlevel * (360 / gameSettings.maxLevel))}deg)` }\n\n            scores.push(\n              <div id={`abyss_${element.id}`} className=\"score\">\n                <span className=\"name\">{element.name}</span>\n                <span className=\"level\" style={levelStyle}>{element.run_maxlevel}</span>\n              </div>\n            )\n          }\n          break;\n      \n        default:\n          break;\n      }\n\n      return [\n        <div className=\"scoreTitle columns\" key=\"score_title\">{scoresHeader}</div>,\n        <div className=\"hallList\" key=\"score_list\">\n          <div className=\"hallListContent columns\">\n            {scores}\n          </div>\n        </div>\n      ]\n    }\n  }\n\n  render() {\n\n    const { setGameState, game } = this.props\n    const { scoreTab } = this.state\n    \n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea\">\n            <div className=\"hall\">\n              <span className=\"title\">Hall of Fame</span>\n              <div className=\"hallTabs\">\n                <button className={scoreTab !== `run` ? `off` : `on`} onClick={() => this.changeTab(`run`)}>\n                  Best run<span>Single run</span>\n                </button>\n                <button className={scoreTab !== `game` ? `off` : `on`} onClick={() => this.changeTab(`game`)}>\n                  Best game<span>Multiple runs</span>\n                </button>\n                <button className={scoreTab !== `abyss` ? `off` : `on`} onClick={() => this.changeTab(`abyss`)}>\n                  Abyss<span>of Permadeath</span>\n                </button>\n              </div>\n              {scoreTab === `run` && this.parseScore(`run`)}\n              {scoreTab === `game` && this.parseScore(`game`)}\n              {scoreTab === `abyss` && this.parseScore(`abyss`)}\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            {game.previousState === `welcome` && <button className=\"navigation\" onClick={() => setGameState({ state: `welcome_keepQuitState` })}>Back</button>}\n            {game.previousState === `defeat` && <button className=\"navigation\" onClick={() => setGameState({ state: `welcome` })}>Start again !</button>}\n            {game.previousState === `permadeath` && <button className=\"navigation\" onClick={() => setGameState({ state: `welcome` })}>Start again !</button>}\n            {game.previousState === `endgame` && <button className=\"navigation picture abyss\" onClick={() => setGameState({ state: `nextLoop` })}><img src={death} alt=\"The Abyss of Permadeath\"/>Enter the Abyss</button>}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HallOfFame)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport { setGameState, settings } from '../redux/actions/index'\n\nimport death from '../pics/ui/death.png'\nimport portal from '../pics/ui/portal.png'\n\nconst mapStateToProps = state => {\n  return {\n    player: state.player\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload)),\n    settings: payload => dispatch(settings(payload))\n  }\n}\n\nclass ReleaseNotes extends Component {\n  componentDidMount() {\n\n  }\n\n  render() {\n    const { setGameState, player } = this.props\n\n    return [\n      <div key=\"mainWrapper\" className=\"mainWrapper wideScreen abyss\">\n        <div className=\"appWrapper\">\n          <div className=\"presentationArea\">\n            <div className=\"victoryWrapper\">\n              <div className=\"bigTitle abyss\">The Abyss of Permadeath</div>\n              <div>{player.name} gets ready for the final run.</div>\n              <img src={portal} alt=\"Portal\" />\n              <div>\n                <p>No one knows where the Abyss ends,<br />as no one ever escaped.</p>\n                <p>You can't win, but how far will you go?</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation picture\" onClick={() => setGameState({ state: `levelTransition` })}><img src={death} alt=\"The Abyss of Permadeath\"/>Enter the Abyss</button>\n          </div>\n        </div>\n      </div>\n    ]\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReleaseNotes)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\n\nimport { setGameState } from '../redux/actions/index'\n// import Monster from '../ui/battle/Monster'\n// import { monsterInfo } from '../monsters/monster'\n// import { forgeUniqueItems } from '../utils/forge'\nimport Item from '../ui/battle/Item'\n// import ItemVisual from '../ui/battle/ItemVisual'\nimport { gameSettings } from \"../conf/settings\"\nimport { getMonsterFromLevel } from '../monsters/getMonsterFromLevel'\nimport { getStat } from '../actions/combat/stats'\nimport { getLevelFromXp } from '../actions/score/score'\nimport Element from '../ui/battle/Element'\nimport { getItemQuality } from '../utils/forge'\n\nconst mapStateToProps = state => {\n  return {\n    data: state,\n    player: state.player,\n    opponent: state.opponent,\n    playerTurn: state.game.playerTurn,\n    log: state.log, \n    monsterList: state.monsters\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass MonstersDemo extends Component {\n\n  render() {\n\n    const { data, setGameState } = this.props\n\n    /** ----------- Old demos ------------- */\n\n    // // Parse monster list\n    // for (const property in monsterList) {\n    //   monsters.push(\n    //     <Monster \n    //       key={`monster_${property}`}\n    //       type={property} \n    //       level={20}\n    //       data={monsterInfo(property, 1, monsterList)}\n    //     />\n    //   )\n    // }\n\n    // // Parse uniques list\n    // let uniques = forgeUniqueItems()\n    // let museum = []\n\n    // for (let [key, value] of Object.entries(uniques.items)) {\n    //   museum.push(\n    //     <div key={`lootbox_${key}`} className=\"storeItemWrapper\">\n    //       <button\n    //         className={`storeItem`}\n    //       >\n    //         <Item\n    //           item={value}\n    //           displayChar={true}\n    //         // shop={type === `items` && `items`}\n    //         />\n    //         <span className=\"itemPrice\"><ItemVisual item=\"coins\" level={5} small />{value.price}</span>\n    //       </button>\n    //     </div>\n    //   )\n    // }\n\n    // for (let [key, value] of Object.entries(uniques.weapons)) {\n    //   museum.push(\n    //     <div key={`lootbox_${key}`} className=\"storeItemWrapper\">\n    //       <button\n    //         className={`storeItem`}\n    //       >\n    //         <Item\n    //           item={value}\n    //           displayChar={false}\n    //           // shop={type === `items` && `items`}\n    //         />\n    //         <span className=\"itemPrice\"><ItemVisual item=\"coins\" level={5} small />{value.price}</span>\n    //       </button>\n    //     </div>\n    //   )\n    // }\n    /** ---------------------------------- */\n\n    let levels = []\n    data.game.pastOpponents = []\n    let monsterTiers = data.monsterTiers\n    let monsters = data.monsters\n    let opponent\n    let cumulatedReward = 0\n    let cumulatedXp = 0\n\n    // Roadmap / balance demo\n    for (let level = 1; level <= gameSettings.maxLevel; level++) {\n      \n      opponent = getMonsterFromLevel(level, monsterTiers, monsters, data.game.pastOpponents)\n\n      // console.log(opponent)\n\n      // Add monster to history\n      if (!data.game.pastOpponents) data.game.pastOpponents = [opponent.job]\n      else data.game.pastOpponents.push(opponent.job)\n\n      // console.log(opponent)\n\n      let STR = getStat(opponent, `STR`)\n      let DEX = getStat(opponent, `DEX`)\n      let CON = getStat(opponent, `CON`)\n      let MAG = getStat(opponent, `MAG`)\n      let LCK = getStat(opponent, `LCK`)\n\n      let STRreward = opponent.items.STR ? opponent.items.STR.reward : 0\n      let DEXreward = opponent.items.DEX ? opponent.items.DEX.reward : 0\n      let CONreward = opponent.items.CON ? opponent.items.CON.reward : 0\n      let MAGreward = opponent.items.MAG ? opponent.items.MAG.reward : 0\n      let LCKreward = opponent.items.LCK ? opponent.items.LCK.reward : 0\n\n      let STRWreward = opponent.weapons.STR ? opponent.weapons.STR.reward : 0\n      let MAGWreward = opponent.weapons.MAG ? opponent.weapons.MAG.reward : 0\n\n      let itemsReward = STRreward + DEXreward + CONreward + MAGreward + LCKreward + STRWreward + MAGWreward\n      cumulatedReward += itemsReward + opponent.reward\n      cumulatedXp += opponent.xp\n\n      levels.push(\n        <tr>\n          <td>{level}</td>\n          <td>{opponent.job}</td>\n          <td>{STR.natural}/{STR.total}</td>\n          <td>{DEX.natural}/{DEX.total}</td>\n          <td>{CON.natural}/{CON.total}</td>\n          <td>{MAG.natural}/{MAG.total}</td>\n          <td>{LCK.natural}/{LCK.total}</td>\n          <td>{STR.total + DEX.total + CON.total + MAG.total + LCK.total}</td>\n          <td>{opponent.xp}</td>\n          <td>{cumulatedXp}</td>\n          <td>{getLevelFromXp(cumulatedXp)}</td>\n          <td>{opponent.hitPoints}</td>\n          <td>\n            <div style={{display:`flex`}}>\n              <Item item={opponent.items.STR} />\n              <Item item={opponent.items.DEX} />\n              <Item item={opponent.items.CON} />\n              <Item item={opponent.items.MAG} />\n              <Item item={opponent.items.LCK} />\n            </div>\n          </td>\n          <td>\n            {getItemQuality(level).toString()}\n          </td>\n          <td>\n            <div style={{display:`flex`}}>\n              <Item item={opponent.weapons.STR} />\n              <Item item={opponent.weapons.MAG} />\n            </div>\n          </td>\n          <td>{opponent.humanoid && `H`}</td>\n          <td><Element element={opponent.elite && `elite`} /></td>\n          <td><Element element={opponent.element} /></td>\n          <td>{opponent.reward}</td>\n          <td>{itemsReward}</td>\n          <td>{cumulatedReward}</td>\n        </tr>\n      )\n    }\n\n\n    return (\n      <div className=\"mainWrapper\">\n        <div className=\"appWrapper\">\n          <div className=\"scrollArea highIndex shop\">\n            <table style={{width:`100%`, padding: `20px`}}><tbody>\n              <tr>\n                <td>Lv</td>\n                <td>Job</td>\n                <td>STR</td>\n                <td>DEX</td>\n                <td>CON</td>\n                <td>MAG</td>\n                <td>LCK</td>\n                <td>SUM</td>\n                <td>Xp</td>\n                <td>Sum Xp</td>\n                <td>XpLvl</td>\n                <td>HP</td>\n                <td>Items</td>\n                <td>Qualities</td>\n                <td>Weapons</td>\n                <td>H/B</td>\n                <td>Elite</td>\n                <td>Elmt</td>\n                <td>Reward</td>\n                <td>Item Rwd</td>\n                <td>Sum rwd</td>\n              </tr>\n              {levels}\n            </tbody></table>\n            {/* {monsters} */}\n            {/* <div className=\"storeBox\">{museum}</div> */}\n          </div>\n          <div className=\"actionArea\">\n            <button className=\"navigation\" onClick={() => setGameState({ state: `welcome` })}>Back</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MonstersDemo)\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport { CSSTransition, SwitchTransition } from \"react-transition-group\"\n\n// Get CSV master file for monsters list\nimport Papa from 'papaparse'\nimport monsterData from './monsters/monsterdata.csv'\n\n // Import redux actions\nimport { settings, setGameState } from './redux/actions/index'\n\n// Import views\nimport Welcome from './views/Welcome'\nimport AllReset from './views/AllReset'\nimport ReleaseNotes from './views/ReleaseNotes'\nimport GameCreate from './views/GameCreate'\nimport LevelTransition from './views/LevelTransition'\nimport BattleIntro from './views/BattleIntro'\nimport Battle from './views/Battle'\nimport Victory from './views/Victory'\nimport Defeat from './views/Defeat'\nimport Shop from './views/Shop'\nimport EndGame from './views/EndGame'\nimport PermaDeath from './views/PermaDeath'\nimport HallOfFame from './views/HallOfFame'\nimport NextLoop from './views/NextLoop'\nimport MonstersDemo from './views/MonstersDemo'\n\n// Import UI utils\nimport Modal from './ui/general/Modal'\n\n// Import pictures\nimport help from './pics/ui/help.svg'\nimport close from './pics/ui/close.svg'\nimport score from './pics/ui/score.svg'\n\n// Import current version number\nimport { version } from './conf/version'\n\n// Import style\nimport './css/app.scss'\nimport './css/buttons.scss'\nimport './css/animations.scss'\nimport './css/welcome.scss'\nimport './css/levelTransition.scss'\nimport './css/battleIntro.scss'\nimport './css/form.scss'\nimport './css/shop.scss'\nimport './css/battle_logs.scss'\nimport './css/battle_stats.scss'\nimport './css/victory.scss'\nimport './css/defeat.scss'\nimport './css/hall.scss'\nimport './css/items.scss'\nimport './css/wheel.scss'\nimport './css/releasenotes.scss'\nimport './css/smallscreen.scss'\n\nconst mapStateToProps = state => {\n  return {\n    game: state.game.state,\n    loop: state.game.loop,\n    tutorial: state.game.tutorial,\n    currentVersion: state.version,\n    monsters: state.monsters\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    settings: payload => dispatch(settings(payload)),\n    setGameState: payload => dispatch(setGameState(payload))\n  }\n}\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      openModal: false\n    }\n  }\n\n  openModal = (modal) => {\n    this.setState({\n      openModal: modal\n    })\n  }\n\n  closeModal = () => {\n    this.setState({\n      openModal: false\n    })\n  }\n\n  componentDidMount() {\n    const { settings, currentVersion, monsters } = this.props\n\n    // Never played : apply current version\n    if (monsters) {\n      if (version[0].version !== currentVersion) {\n        if (!version[0].reset) settings({ setting: `setVersion` })\n      }\n    } else settings({ setting: `setVersion` })\n\n    // Send raw csv to reducer\n    Papa.parse(monsterData, {\n      header: true,\n      dynamicTyping: true,\n      complete: function (results) {\n        settings({ setting: `createMonsters`, data: results.data })\n      }\n    })\n  }\n\n  render() {\n\n    const { game, tutorial, setGameState, settings, loop } = this.props\n    const { openModal } = this.state\n\n    let view\n    let ambiantFog = (\n      <div className=\"fogWrapper\" key=\"fogwrapper\">\n        <div className=\"smoke\" key=\"smoke\" />\n        <div className=\"fog\" key=\"fog\" />\n      </div>\n    )\n\n    let options\n    let fullOptions = (\n      <div className=\"optionsWrapper\" key=\"options\">\n        <button className=\"option\" onClick={() => this.openModal(`about`)}><img src={help} alt=\"About\" /></button>\n        <button className=\"option\" onClick={() => setGameState({ state: `hallOfFame` })}><img src={score} alt=\"Score\" /></button>\n        {/* <button className=\"option\" onClick={() => this.openModal(`settings`)}><img src={settingsPic} alt=\"Settings\" /></button> */}\n      </div>\n    )\n\n    let smallOptions = (\n      <div className=\"optionsWrapper\" key=\"options\">\n        <button className=\"option\" onClick={() => setGameState({ state: `quit` })}><img src={close} alt=\"Quit\" /></button>\n        {/* <button className=\"option\" onClick={() => this.openModal(`settings`)}><img src={settingsPic} alt=\"Settings\" /></button> */}\n      </div>\n    )\n\n    let helpOptions = (\n      <div className=\"optionsWrapper help\" key=\"options\">\n        <button className=\"option fade\" onClick={() => this.openModal(`help`)}><img src={help} alt=\"Help\" /></button>\n      </div>\n    )\n\n    switch (game) {\n      case `welcome`:\n        view = <Welcome />\n        options = fullOptions\n        break;\n      case `allReset`:\n        view = <AllReset />\n        options = []\n        break;\n      case `releaseNotes`:\n        view = <ReleaseNotes />\n        options = []\n        break;\n      case `gameCreate`:\n        view = <GameCreate />\n        options = smallOptions\n        break;\n      case `levelTransition`: \n        view = <LevelTransition />\n        options = []\n        break;\n      case `battleIntro`:\n        view = <BattleIntro />\n        options = []\n        break;\n      case `battle`:\n        // Detect first visit ever\n        if (!tutorial) {\n          // Display welcome modal, update store\n          settings({ setting: `tutorial` })\n          this.setState({ openModal: `first` })\n        }\n        view = <Battle />\n        ambiantFog = []\n        options = helpOptions\n        break;\n      case `victory`:\n        view = <Victory />\n        options = smallOptions\n        break;\n      case `defeat`:\n        view = <Defeat />\n        options = smallOptions\n        break;\n      case `shop`:\n        view = <Shop />\n        options = smallOptions\n        break;\n      case `endgame`:\n        view = <EndGame />\n        options = smallOptions\n        break;\n      case `hallOfFame`:\n        view = <HallOfFame />\n        options = smallOptions\n        break;\n      case `permadeath`:\n        view = <PermaDeath />\n        options = []\n        break;\n      case `nextLoop`:\n        view = <NextLoop />\n        options = []\n        break;\n      case `monstersDemo`:\n        view = <MonstersDemo />\n        options = []\n        break;\n      default:\n        break;\n    }\n\n    // Abyss or special ambiant color\n    let appBodyClass = loop ? `appBody abyss` : `appBody`\n\n    return [\n      <SwitchTransition key=\"switch\">\n        <CSSTransition\n          key={game}\n          timeout={1000}\n          classNames={\"fadeView_1000\"}\n          addEndListener={(node, done) => node.addEventListener(\"transitionend\", done, false)}\n          appear\n        >\n          {view}\n        </CSSTransition>\n      </SwitchTransition>,\n      options,\n      <Modal key=\"modalAbout\" content=\"about\" display={openModal === `about`} close={this.closeModal} />,\n      <Modal key=\"modalSettings\" content=\"settings\" display={openModal === `settings`} close={this.closeModal} />,\n      <Modal key=\"modalHelp\" content=\"help\" display={openModal === `help`} close={this.closeModal} />,\n      <Modal key=\"modalFirst\" content=\"first\" display={openModal === `first`} close={this.closeModal} />,\n      ambiantFog,\n      <div className={appBodyClass} />\n    ]\n    \n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","export default \"code,name,verticalPosition,Poor visual,tier,humanoid,items,weapons,profile,element,boost,elite\\r\\nblindworm,\\\"Blind Worm, Cave Worm, Giant Worm\\\",,,1,,,,brute,earth,STR,3\\r\\ndryad,\\\"Dryad, Sylve Dryad, Dryad Swordmaster\\\",,,1,1,\\\"DEX, STR, LCK\\\",STR,duelist,earth,DEX,3\\r\\ngiantfish,\\\"Giant Fish, River Monster, Giant Carp\\\",30,,1,,,,tank,water,,3\\r\\nfireimp,\\\"Fire Bird, Phoenix, Fire Crow\\\",,,1,1,MAG,MAG,archmage,fire,,3\\r\\nbloodmage,\\\"Blood Mage, Blood Warlock, Crimson Mage\\\",60,,1,1,\\\"DEX, CON, MAG\\\",\\\"STR, MAG\\\",archmage,fire,,3\\r\\nclairvoyant,\\\"Battle Mage, Archknight, Scythe Mage\\\",,,1,1,\\\"DEX, CON, MAG, STR\\\",\\\"STR, MAG\\\",balanced,darkness,\\\"DEX, MAG\\\",3\\r\\nrootgolem,\\\"Root Golem, Angry Root, Root Elemental\\\",,,1,1,LCK,STR,balanced,earth,\\\"STR, CON\\\",3\\r\\nlamprey,\\\"Psychic Lamprey, Psionic Worm, Mana Leech\\\",49,,1,,,,wizard,water,MAG,3\\r\\nwaterspirit,\\\"Water Spirit, Water Djinn, Ocean Djinn\\\",40,,1,1,\\\"STR, MAG\\\",\\\"STR, MAG\\\",balanced,water,,3\\r\\ncrow,\\\"Giant Crow, High Raven, Black Raven\\\",30,,1,,,,duelist,earth,DEX,3\\r\\nsuccubus,\\\"Succubus, Servant of Lilith, Void Demon\\\",,,1,1,\\\"STR, DEX, CON\\\",STR,balanced,darkness,DEX,3\\r\\nscarletwyrm,\\\"Scarlet Wyrm, Scaled Beast, Red Drake\\\",20,,2,,,,brute,earth,STR,5\\r\\nrunicgolem,\\\"Runic Golem, Ancient Golem, Razor Golem\\\",40,,2,1,\\\"DEX, STR, LCK, MAG\\\",STR,balanced,water,DEX,5\\r\\ngazer,\\\"Eldritch Gazer, Abomination, Abyss Gazer\\\",,,2,,,,brute,darkness,\\\"STR, DEX\\\",5\\r\\nsunwarrior,\\\"Sun Warrior, Sun Knight, Fire Warrior\\\",,,2,1,\\\"MAG, DEX, CON\\\",\\\"STR, MAG\\\",archmage,fire,\\\"STR,DEX\\\",5\\r\\nvampire,\\\"Count Solomon, Vampire Lord, Lord Solomon\\\",70,,2,1,\\\"STR, DEX, CON, MAG, LCK\\\",STR,balanced,darkness,\\\"DEX, MAG\\\",5\\r\\nstonegolem,\\\"Stone Golem, Rock Golem, Rock Spirit\\\",60,,2,,,,brute,earth,STR,5\\r\\narcanegolem,\\\"Arcane Golem, Crystal Golem, Construct\\\",60,,2,,,,brute,water,\\\"MAG, DEX\\\",5\\r\\nsparkdragon,\\\"Spark Dragon, Yellow Drake, White Wyvern\\\",40,,2,,,,balanced,earth,\\\"DEX, STR\\\",5\\r\\ngoblinmage,\\\"Iron Mage, Iron Wizard, Iron Warlock\\\",80,,2,1,\\\"MAG, DEX\\\",MAG,wizard,earth,MAG,5\\r\\nwindpriest,\\\"Wind Priest, Zephyr Wizard, Wind Mage\\\",,,3,1,\\\"DEX, MAG, LCK\\\",MAG,wizard,water,,7\\r\\nkoboldarcher,\\\"Gargoyle Bandit, Gargoyle Assassin, Gargoyle Duelist\\\",,,3,1,\\\"DEX, LCK, STR\\\",STR,duelist,earth,DEX,7\\r\\nimp,\\\"Forest Imp, Forest Demon, Tree Gargoyle\\\",,,3,1,\\\"DEX, LCK, STR, MAG\\\",\\\"STR, MAG\\\",duelist,water,,7\\r\\nfireangel,\\\"Fire Angel, Red Angel, Burning Angel\\\",,,3,1,\\\"STR, DEX, MAG\\\",STR,balanced,fire,DEX,7\\r\\nbehemoth,\\\"Behemoth, Green Wyvern, Green Drake\\\",40,,3,,,,balanced,earth,\\\"STR, CON\\\",7\\r\\ncultist,\\\"Insane Cultist, Chaos Mage, Dark Mage\\\",,,3,1,\\\"MAG, LCK, DEX\\\",MAG,archmage,darkness,\\\"MAG, DEX\\\",7\\r\\nfirelord,\\\"Fire Lord, Blaze Lord, Flame Lord\\\",55,,3,,,,balanced,fire,\\\"DEX, CON\\\",7\\r\\nmage,\\\"Insane Wizard, Al-Hazred, Librarian\\\",80,bof,3,1,\\\"MAG, DEX, LCK\\\",\\\"STR, MAG\\\",wizard,darkness,\\\"MAG, DEX\\\",7\\r\\nminordemon,\\\"Flame Servant, Flame Slave, Flame Minion\\\",,,3,1,\\\"STR, DEX, LCK, CON\\\",\\\"STR, MAG\\\",brute,fire,STR,7\\r\\ncrocodilerogue,\\\"Vapor Fighter, Smoke Fighter, Wind Fighter\\\",80,,4,1,\\\"DEX, STR, LCK, CON\\\",STR,duelist,water,DEX,9\\r\\nghostknight,\\\"Ghost Knight, Spectral Knight, Fantom Knight\\\",80,,4,1,\\\"DEX, STR, LCK, MAG\\\",STR,duelist,darkness,\\\"DEX, STR\\\",9\\r\\nforestgolem,\\\"Forest Golem, Moss Golem, Forest Elemental\\\",40,,4,,,,tank,earth,STR,9\\r\\nchimera,\\\"Chimera, Peryton, Illusion Beast\\\",32,,4,,,,balanced,earth,\\\"DEX, STR\\\",9\\r\\ndryadqueen,\\\"Dryad Queen, Forest Queen, Forest Sorceress\\\",65,,4,1,\\\"DEX, LCK, MAG, CON\\\",MAG,wizard,earth,\\\"DEX, MAG\\\",9\\r\\nastrallich,\\\"Astral Lich, Void Eater, Void Elemental\\\",48,,4,,,,brute,darkness,\\\"CON, MAG\\\",9\\r\\nferalbeast,\\\"Feral Beast, Fire Wolf, Wereflame\\\",,,4,1,\\\"DEX, STR, LCK, CON\\\",,duelist,fire,\\\"DEX, STR\\\",9\\r\\ndarknesstitan,\\\"Dancing Flame, Burning Titan, Hell Knight\\\",,,4,1,\\\"STR, DEX, LCK, CON\\\",STR,duelist,fire,\\\"DEX, MAG\\\",9\\r\\ncrystalmage,\\\"Crystal Mage, Ice Mage, Frozen Sorcerer\\\",60,,4,1,\\\"MAG, DEX, LCK\\\",MAG,archmage,water,\\\"MAG, DEX, CON\\\",9\\r\\niceelemental,\\\"Ice Spirit, Ice Queen, Crystal Spirit\\\",70,,5,1,\\\"MAG, CON\\\",MAG,archmage,water,\\\"DEX, CON\\\",15\\r\\nelvenmage,\\\"Elven Mage, Forest Mage, Elven Overseer\\\",80,,5,1,\\\"LCK, MAG, DEX, CON\\\",\\\"MAG, STR\\\",wizard,earth,\\\"MAG, CON\\\",15\\r\\nradulac,\\\"Ancient Ghoul, Lord Ghoul, Garghoul\\\",,,5,1,\\\"DEX, STR, LCK, MAG\\\",STR,tank,darkness,\\\"STR, MAG\\\",15\\r\\ngolddragon,\\\"Gold Dragon, Lucky Dragon, Gold Wyvern\\\",,,5,1,LCK,,wizard,earth,LCK,15\\r\\ndragonemperor,\\\"Dragon Emperor, Dracolich, Darkness Emperor\\\",,,5,1,\\\"LCK, CON\\\",,balanced,darkness,\\\"STR, DEX, MAG\\\",15\\r\\nvoidgargoyle,\\\"Void Gargoyle, Void Beast, Mi-Go\\\",,,5,,,,balanced,darkness,\\\"DEX, MAG\\\",15\\r\\nbulldragon,\\\"Bull Dragon, Great Beast, Bull Drake\\\",60,,5,,,,brute,earth,\\\"STR, CON\\\",15\\r\\nknightking,\\\"Night King, Night Emperor, Night Sword\\\",,,5,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",duelist,darkness,\\\"DEX, STR\\\",15\\r\\nansellus,\\\"Ansellus, Isembard, Fendrel\\\",,,6,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",duelist,darkness,\\\"MAG, DEX\\\",20\\r\\nexcelsios,\\\"Annoras the Unholy, Annoras the Void Rider, Annoras the World Eater\\\",,,6,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",archmage,darkness,\\\"MAG, DEX, STR\\\",20\\r\\nthanatos,\\\"Thanatos, Death, The Reaper\\\",40,,6,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",archmage,earth,MAG,20\\r\\nalfadriel,\\\"Alfadriel the Rigtheous, Alfadriel Lord of the Light, Archangel Alfadriel\\\",,,6,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",balanced,fire,\\\"DEX, STR\\\",20\\r\\nyoggoth,\\\"Yoggoth, Beast of Oort, Void Thing\\\",49,,6,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",wizard,darkness,\\\"CON, MAG\\\",20\\r\\nfirewitch,\\\"Fire Witch, Fire Angel, Fire Sorceress\\\",,,boss-1,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",wizard,fire,MAG,100\\r\\nshadowscythe,\\\"Scythe Shadow, Smoke Reaper, Mister Reaper\\\",,,boss-1,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",brute,darkness,\\\"DEX, MAG\\\",100\\r\\nignis,\\\"Ignis, Arcane Blaze, Infernis\\\",,,boss-2,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",archmage,fire,\\\"MAG, DEX\\\",100\\r\\ncorruptedelemental,\\\"Corrupted Elemental, Chaos Elemental, Void Elemental\\\",,,boss-2,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",brute,darkness,\\\"STR, CON\\\",100\\r\\nharbinger,\\\"Messenger, Harbinger, Caller\\\",,,boss-3,1,\\\"STR, DEX, LCK, CON, MAG\\\",MAG,balanced,darkness,\\\"MAG, DEX\\\",100\\r\\ncorruptedhorseman,\\\"Corrupted Horseman, Chaos Horseman, Void Horseman\\\",,,boss-3,1,\\\"STR, DEX, LCK, CON, MAG\\\",STR,balanced,darkness,\\\"STR, DEX\\\",100\\r\\nprimaldemon,\\\"Primal Demon, Feral Demon, Void Chimera\\\",,,boss-4,1,\\\"STR, DEX, CON, LCK, MAG\\\",\\\"STR, MAG\\\",brute,fire,\\\"STR, CON\\\",100\\r\\ndynamo,\\\"Immortal Flame, Unburning Fire, Sudden Blaze\\\",60,,boss-4,1,\\\"STR, DEX, CON, LCK, MAG\\\",\\\"STR, MAG\\\",archmage,fire,\\\"MAG, DEX\\\",100\\r\\nlichwarlord,\\\"Lich Warlord, Nazghoul, Lich Knight\\\",,,boss-5,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",wizard,darkness,\\\"DEX, MAG\\\",100\\r\\ndemon,\\\"Abaddon, Apollyon\\\",,,boss-5,1,\\\"STR, DEX, CON, MAG, LCK\\\",\\\"STR, MAG\\\",balanced,fire,\\\"STR, MAG\\\",100\\r\\ncthulhu,\\\"The Great Cthulhu, The Great Old One, Cthulhu\\\",40,,boss-6,,,,balanced,darkness,\\\"STR, MAG, DEX, CON\\\",100\\r\\nmyrdin,\\\"Myrdin Sovereign of the Void, Myrdin Ruler of the Void, Myrdin Mistress of the Void\\\",,,boss-6,1,\\\"STR, DEX, CON, MAG, LCK\\\",MAG,wizard,darkness,\\\"MAG, DEX\\\",100\";","import React from \"react\"\nimport { render } from \"react-dom\"\nimport { Provider } from \"react-redux\"\nimport store from \"./redux/store/index\"\nimport App from \"./App\"\n\nconsole.log(\"%c\\n   _____    ___ ___     .__________________   \\n  /     \\\\  /   |   \\\\  __| _/\\\\_____  \\\\   _  \\\\  \\n /  \\\\ /  \\\\/    ~    \\\\/ __ |  /  ____/  /_\\\\  \\\\ \\n/    Y    \\\\    Y    / /_/ | /       \\\\  \\\\_/   \\\\\\n\\\\____|__  /\\\\___|_  /\\\\____ | \\\\_______ \\\\_____  /\\n        \\\\/       \\\\/      \\\\/         \\\\/     \\\\/ \\n\", 'background: #03181f; color: #bc0f53')\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n)","module.exports = __webpack_public_path__ + \"static/media/logo2.dc4cd8ba.png\";","module.exports = __webpack_public_path__ + \"static/media/help.705c6bc8.svg\";","module.exports = __webpack_public_path__ + \"static/media/close.93c82e57.svg\";"],"sourceRoot":""}